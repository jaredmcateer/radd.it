<?php
  $mysqli = new mysqli($vars['dbserver'], $vars['dbread']['user'], $vars['dbread']['pass'], $vars['dbname']);
  if ($mysqli->connect_error) die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);
  $mysqli->set_charset("utf8");

  $embedded = false;
  if (substr_count($_SERVER['HTTP_HOST'], "embed.") != 0 || isset($_GET["embed"])) $embedded = true;

  $username = "";
  $loggedIn = false;
  if (!empty($_COOKIE["user"]) && !isset($_GET["nouser"])) $username = $mysqli->real_escape_string($_COOKIE["user"]);
  if (!empty($username)) {
    $loggedIn = true;
    if ($bucket != "media") include "login/quickrefresh.php";
  }

  // user (or default) feeds
  $qry = "SELECT cat, source, hasOpts, url, label, descrip, is_sticky, is_default, is_user, id_feed from feeds where bucket = '" . $bucket . "'"
    . " and (is_sticky = 1 or user = '" . $username . "')"
    . " order by is_sticky, cat, label;"
  ;

  // user's subreddits and subs they've upvoted in
  if ($loggedIn)
    $qry .= 
      "SELECT id_user_sub, source, is_multi, name, url, label FROM user_subs" // removed: , descrip
     . " WHERE active = 0 and user = '" . $username . "'" // active here means it's been made a feed by user
     . " UNION "
     . "SELECT 0 as id_user_sub, 'reddit', 0 as is_multi, subreddit as name, subreddit as url, subreddit as label from user_upvotes"  // , '' as descrip
     . " WHERE user = '" . $username . "' GROUP BY subreddit"

     . " ORDER BY id_user_sub = 0, is_multi = 0, name;"
    ;
  else $qry .= "SELECT id_user_sub, source, is_multi, name, url, label FROM user_subs where id_user_sub = 0;";

  // likes
  if ($loggedIn)
    $qry .= "SELECT cat, label, url, thumb, permalink, id_like, descrip FROM likes WHERE user = '" . $username . "' and bucket = '" . $bucket . "' ORDER BY cat, label;";
  else $qry .= "SELECT cat, label, url, thumb, permalink, id_like, descrip FROM likes where id_like = 0;";

  $qry .= "SELECT kind, source, label, descrip, url, permalink, thumb, id_suggestion from user_suggestions where user = '" . $username . "' and bucket = '" . $bucket . "' ORDER BY hotScore DESC"; // kind, 

  $result = $mysqli->multi_query($qry); 
  if ($result === false) die("db error: " . $mysqli->error);

  $feeds = $mysqli->store_result();
  $mysqli->next_result(); $userSubs = $mysqli->store_result();
  $mysqli->next_result(); $userLikes = $mysqli->store_result();
  $mysqli->next_result(); $suggestions = $mysqli->store_result();

  $userCats = "";
  $stickyCats = "";
  $defaultCats = "";

  // used when adding feeds, code below
  $urlsShown = array();

  $userPlaylists = array();  // All feeds in the "~a|Playlists" category
  $playlistOpts = "";   // <option>s for playlist <select>s
  $playlistCnt = 0;

  $foundLinks = false;
  $foundFeeds = false;
  if (!$embedded) {
    while ($sug = $suggestions->fetch_row()) {
      $s_kind = $sug[0];

      if ($s_kind == "link") $foundLinks = true;
      else if ($s_kind == "feed") $foundFeeds = true;
    }
  }

echo "<!--" . chr(10)
  . "bucket: " . $bucket . chr(10)
  . "user: " . $username . chr(10)
  . "url: " . $listrURL . chr(10)
 // . "qry: " . $qry . chr(10) . chr(10)
  . "feeds: " . $feeds->num_rows . chr(10)
  // . "subCats: " . $subCats->num_rows . chr(10)
  // . "userCats: " . $userCats->num_rows . chr(10)
  . "userSubs: " . $userSubs->num_rows . chr(10)
  . "userLikes: " . $userLikes->num_rows . chr(10)
  . "suggestions: " . $suggestions->num_rows . chr(10)
  . chr(10) . "-->" . chr(10);
?>
<!DOCTYPE html><html><head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> <meta property="og:image" content="/img/little_r.png" /> <meta name="description" content="music, videos, pics." /> <meta name="keywords" content="music,movies,video,reddit,tv,radio,pics,images,playlister,gallery,<?=$listrURL?>" /> <meta charset="utf-8" /> <title>radd.it!</title> <link href="/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/> <link href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.5/css/jquery.dataTables.min.css" type="text/css" rel="stylesheet" media="screen,projection">
<style>*{box-sizing:border-box}body{overflow-x:hidden;color:#212121}a{cursor:pointer;user-select:none}i{user-select:none}i.small{font-size:24px}i.mdi-action-exit-to-app,i.mdi-image-exposure{background-repeat:no-repeat}i.mdi-action-exit-to-app:before,i.mdi-image-exposure:before,i.mdi-editor-attach-money:before{opacity:0}i.mdi-editor-attach-money{background-image:url(/img/patreon.png);background-position:0 -1px;background-size:15px 15px}i.mdi-image-exposure{background-image:url(/img/chrome_r.png);background-position:0 2px;background-size:32px 32px}.capitalize{text-transform:capitalize}div.modal{max-height:90%;max-width:900px;padding-bottom:0;z-index:1001}div.modal a{z-index:1001}div.modal .modal-footer{text-align:center}ul.select-dropdown{overflow-x:hidden;z-index:1999}#toast-container,div.material-tooltip,#hoverCard{z-index:2048}nav{height:40px!important;line-height:40px!important;position:fixed;z-index:666}nav ul{float:none}nav ul li a{color:#eee!important;margin-top:.49px}nav ul li.title{overflow:hidden;width:75%;height:34px;margin-left:12.5%;padding-top:1px;text-align:center;text-overflow:ellipsis;float:left}nav ul li.title span.title{font-weight:300;font-size:24px;color:#fff!important}nav ul li div.select-wrapper{margin-top:-1.3px}nav span.btns a.btn-floating{margin-right:4px}nav li.nav-user{margin-top:1px;margin-right:16px}nav li.nav-user a{width:150px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}div.navBtns{position:fixed;top:4px;right:8px;z-index:999}div.navBtns a{height:32px;width:32px;line-height:32px;margin-right:8px}div.navBtns a i{line-height:32px}#logo-container img{max-height:44px}nav div.select-wrapper span.select-dropdown{color:#eee;width:100px}nav ul li:hover,nav ul li.active{background-color:inherit}ul.quickLoad{top:42px!important}ul.quickLoad.keepOpen{display:block!important;opacity:1!important;overflow-y:auto!important}ul.quickLoad li{font-size:17px;clear:both;min-height:100px}ul.quickLoad li.active{border:#303f9f .133rem solid;border-radius:2px}ul.quickLoad li span{text-align:end}ul.quickLoad li span img.thumb{max-height:80px;min-width:50px;max-width:80px;float:left;padding-right:2px}.hidden{display:none}.z-depth-light{box-shadow:0 2px 4px 0 rgba(225,225,225,0.16),0 2px 2px 0 rgba(225,225,225,0.12)}.z-depth-light:hover{box-shadow:0 4px 8px 0 rgba(225,225,225,0.18),0 4px 4px 0 rgba(255,255,255,0.15)}div.container{padding-top:40px}div.container div.section.content.no-opts{height:100%}div.container div.section.opts{width:100%;padding-top:0;margin-top:-10px}div.container.media{background-color:#121211;width:100%;max-width:100%;padding:40px 0 0}div.container.media div.media-dsp iframe{border:none;width:100%;height:100%;overflow:hidden}div.container.media div.media-dsp img{height:100%;max-width:100%}div.container.media div.section.content{padding:4px 0 0;text-align:center}div.container.media div.section.content div{margin-bottom:6px;overflow:hidden}div.container.media div.section.opts{overflow:hidden;margin-top:0;height:250px}div.mediaAbout{position:absolute;bottom:0;width:100%;padding:8px}div.mediaAbout h5{float:left}div.mediaAbout h6{float:right;margin-right:226px;margin-top:18px}div.mediaAbout h6 a,#naviDown span.btns a.fromOpts{margin-right:12px;padding:8px;border-radius:4px}div.mediaAbout h6 a.blue-grey,#naviDown span.btns a.blue-grey.fromOpts{background-color:#37474f!important;font-weight:700}div.container.media div.section.opts div.progressBar{background:#455a64;display:inline-block;height:16px;border-radius:16px;width:400px;margin:18px 0;cursor:w-resize;box-shadow:inset 0 1px 0 rgba(10,10,10,.1),inset 0 -1px 1px rgba(0,0,0,.1),0 1px 0 rgba(158,158,158,.666);background-clip:padding-box}div.container.media div.section.opts div.progressBar:active{cursor:pointer}#progress{background:#263238;display:inline-block;width:0;max-width:100%;height:15px;border-radius:15px;box-shadow:0 1px 0 rgba(0,0,0,.3),0 -1px 0 rgba(0,0,0,.1);background-clip:padding-box}#visualizer{position:absolute;top:44px;z-index:420;padding-top:4px;background-color:#000}div.container.media div.section.opts div.qsCont{width:300px;padding:6px 4px 2px;margin-left:8px;margin-top:3px;float:left}div.container.media div.section.opts div.qsCont div{display:inline-block;float:left}div.container.media div.section.opts div.afterCont{padding:4px 0 0 8px;float:right;margin-top:3px;margin-right:166px}div.container.media div.section.opts span.title{padding:8px}div.container.media div.section.opts span.title h4{color:#fff;font-size:18px;font-style:italic;font-weight:300;text-align:center;overflow:hidden;line-height:normal;height:66.6px}div.container.media div.section.opts input{color:#eee;background-color:#2c2c2c;border-radius:10px;height:30px;width:140px;padding:0 10px;margin-right:10px}div.container ul.collection li{cursor:pointer;overflow:hidden}div.container ul.collection li.collection-header a{float:right;margin-top:-42px;clear:left}div.container .secondary-reveal{display:none}h1.contLabel{position:absolute;right:2%;margin-top:96px;transform:rotate(90deg)}div.container.feeds ul.collection{border:none}div.container.feeds ul.collection li div b{margin-right:16px}div.container ul.collection li.collection-item a.secondary-content{margin-right:8px}div.container.liked div.section.content ul.collection li.collection-item img{margin:-90px 4px -12px -16px;height:64px;max-width:33%}div.container ul.tabs .indicator{display:none!important}div.container ul.tabs{background-color:transparent}div.container ul.tabs li{overflow:hidden;border-radius:4px;margin:0 .5% 16px;padding:0 8px}div.container ul.tabs li a{font-size:90%}div.container ul.tabs li a.active{font-size:160%}div.container ul.tabs li.s3{width:25%!important}div.container ul.tabs li.s4{width:32.333%!important}div.container div.section.content ul.collection{padding:0;border:none}div.container.feeds ul.collection li.card{margin-bottom:16px}div.container.feeds ul.collection li.card div.details{height:150px;overflow:hidden}div.container.liked ul.collection li div.btns{margin-top:-12px}div.container.liked ul.collection li.card{height:120px;margin-bottom:16px;padding:8px}div.container.liked ul.collection li div.title{overflow:hidden;height:90px;margin-bottom:4px;max-width:63%;font-weight:700}div.container.liked ul.collection li i.small{font-size:32px}div.container.liked div.section.content.no-opts{height:initial}#addFeed .card{cursor:pointer;border-radius:5px}#addFeed .card .card-image{text-align:center}#addFeed .card .card-image img{height:160px;opacity:.95}#addFeed .card .card-content p{min-height:70px}#addLike div.modal-content{overflow-x:hidden}#addlike-thumb-img{max-height:150px}#nixLinks{width:320px;text-align:center}#nixLinks a{white-space:nowrap}#plAppend div.modal-content{overflow-x:hidden}#plAppend-thumb-img{max-height:150px}div.container.options{padding-top:50px}div.container.options div.section.content.no-opts{background-color:#fff}div.container.options div.section{border:1px #000 solid;border-radius:5px;padding:1rem 25px}div.container.options div.section h4{text-align:right;margin-right:20px}div.container.options div.section div h5{width:100%;text-align:center;margin:25px}div.container.options div.section label{margin-right:1%}div.container.options div.section.hotkeys{margin-top:25px;margin-bottom:25px;background-color:#fff}div.container.options div.section.hotkeys p{text-align:center}div.container.options div.section.hotkeys table tr th:first-child{text-align:center}div.container.options div.section.hotkeys table tr td:first-child{text-align:center;font-weight:bolder}div.link-dsp{border:1px solid #000;border-radius:5px;margin:10px;min-height:140px;overflow:hidden}div.link-dsp div.opts{text-align:right;margin-top:20px}div.link-dsp div.opts a{margin-right:10px}div.link-dsp p{text-align:left;margin:5px 7.5px}div.link-dsp h5,div.link-dsp h6{text-align:left}div.link-dsp img.thumb{max-width:120px;float:left;margin:10px}#linksAdd div.results div div h4,#addFeed div.results div div h4{text-align:right;margin-top:20px}#linksAdd div.results span.title{font-weight:700}#linksAdd div.results div.opts{clear:both}#loading{position:fixed;top:42px;right:2px}div.container.buckets{padding-top:0}#reddHead{text-align:center;margin-top:50px}div.container div.boxCont{height:600px;padding:8px 20px;border-radius:2px;overflow:hidden}div.container div.boxCont div.row.links{overflow-y:auto}div.container.grid div.boxCont.cardCont{overflow-y:auto;padding:8px 2px}div.container.grid div.cardCont div.card{height:120px;margin-bottom:8px;cursor:pointer}div.container.grid div.cardCont div.card.active{background-color:#c5cae9!important}div.container.grid div.cardCont div.card:hover{background-color:#fff}div.container.grid div.card div.btns{clear:both;width:63%;float:left;text-align:right}div.container.grid div.card div.btns i{margin-left:6px}div.container.grid div.card .details{font-size:88%}div.container.grid div.card div.thumb{height:112px;z-index:10;text-align:center;margin:-82px 4px 4px -12px;font-style:italic;float:right}div.container.grid div.card div.thumb img{height:64px;max-width:60px;cursor:none}div.container.grid div.card div.thumb div.details{margin-left:-4px;margin-top:-4px}div.container.grid div.card div.about{margin:4px;max-width:63%;float:left}div.container.grid div.card div.about div.title{font-weight:700;height:82px;overflow:hidden}div.container.grid div.card div.about div.title span.genres{white-space:nowrap}div.container.grid div.card div.about div.details{white-space:nowrap;overflow:hidden;color:#666}div.container.grid div.section.opts{float:right;width:initial;height:46px;border-radius:12px;display:inline-block;margin-top:-26px;padding:2px 12px 2px 4px}div.container.grid div.section.opts a.btn-floating{margin-left:8px}#links_length{display:none}#links_filter{position:absolute;bottom:-32px;left:4px}table.dataTable thead th.sorting_asc,table.dataTable thead th.sorting_desc{background:none}#links_wrapper div.dataTables_scrollBody{overflow-x:hidden!important}#links{height:560px}#links tr{cursor:pointer}#links td{white-space:pre-line}#links tbody tr td:nth-child(1) i{font-size:1.44rem}table th.pos,table th.score,table th.length,table th.opts,table td:nth-child(1){text-align:center}table th.opts i{font-size:18px;line-height:16px;border-radius:8px}table.others td:nth-child(5),table.others td:nth-child(7){text-align:center}table.music td:nth-child(5),table.music td:nth-child(6),table.music td:nth-child(7),table.music td:nth-child(9){text-align:center}table.music td:nth-child(2),table.music td:nth-child(3),table.music td:nth-child(4){text-transform:capitalize}table.vids td:nth-child(3),table.vids td:nth-child(6){text-align:center}div.container.links div.content table.dataTable thead .sorting{border-style:groove;border-radius:4px;cursor:pointer}div.container.links div.content table.dataTable thead .sorting_asc,table.dataTable thead .sorting_desc{color:#7986cb;border-bottom-width:4px;border-bottom-color:#7986cb}div.container.links div.content table.dataTable tbody tr:hover,div.container.links div.content table.dataTable tbody tr.selected{background-color:#c5cae9!important}div.container.links div.section.opts{float:right;width:initial;height:46px;border-radius:12px;display:inline-block;margin-top:-6px;padding:2px 12px 2px 4px}div.container.links div.section.opts a.btn-floating{margin-left:8px}div.container.links div.content div.dataTables_wrapper div.dataTables_scrollHead{margin-bottom:3px}div.container.links div.content div.dataTables_wrapper div.dataTables_info{display:none}div.container.links div.content div.dataTables_wrapper div.dataTables_filter{padding-right:4px}div.container.links div.content div.dataTables_wrapper div.dataTables_filter label{color:#333}div.container.links div.content div.dataTables_wrapper div.dataTables_filter input[type=search]{padding:4px;border:none;border-radius:2px;background-color:#c5cae9}div.container.links div.content div.dataTables_wrapper div.dataTables_filter input[type=search]:focus{margin-bottom:-1px!important;outline:none;border-bottom:solid 1px #1b1b1b}.dataTables_wrapper.no-footer .dataTables_scrollBody{border-bottom:none}div.container.links div.listings{margin:36px 0;float:left}div.container.links div.listings a{margin:5px 5px 0;white-space:nowrap;overflow:hidden}#hoverCard{position:absolute;width:360px;z-index:2048;padding-top:6px}#hoverCard div.card-image img{max-height:320px}#naviUp{position:fixed;bottom:48px;right:10px;z-index:99}#naviDown{position:fixed;bottom:0;right:0;padding:0 8px 4px;z-index:99}#naviUp a,#naviDown a.btn-large{width:52px;height:52px}#naviUp a i,#naviDown a.btn-large i{line-height:52px}#naviDown span.btns{margin-right:32px;display:none}#naviDown span.btns a.btn-floating{margin-right:8px}#naviDown span.btns a.btn-floating.next{margin-right:32px}span.btns a.btn-floating{margin-right:8px}#naviDown a.navi{position:fixed;right:8px;bottom:-12px}div.suggestions .card{background-color:#121211}div.suggestions .card img{height:240px;opacity:.666}div.suggestions .card .card-title{padding:10px;max-height:260px}footer.page-footer{text-align:center;padding-bottom:1px}footer.page-footer a img{max-width:50%;border-radius:10px}</style>
<link rel="icon" href="/img/favicon.ico" type="image/x-icon" /> <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" /> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.5/js/jquery.dataTables.min.js"></script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-35550542-1', 'auto');ga('send', 'pageview');</script></head><body class="grey lighten-1"> <nav class="blue-grey darken-4" role="navigation"> <div class="nav-wrapper"> <a id="logo-container" class="brand-logo" <?php if ($embedded) echo 'target="_blank" href="' . explode("?", $listrURL)[0] . '/' . $bucket . '"'; else echo 'href="/"'; ?>> <img src="/img/raddit_logo.png" class="hide-on-small-only"><img src="/img/little_r.png" class="hide-on-med-and-up" title="r a d d . i t!"></a><?php if ($bucket == "music"): ?><a class="easter" href="#" style="position:absolute;top:0;left:100px;" title="don't click, totally not an easter egg"><img src="/img/blank.png" class="hide-on-small-only easter" style="width:10px;height:10px;"></a><?php endif; ?> <ul class="hide-on-embed"> <li class="title hide-on-med-and-down"><span class="title"></span></li> <li class="hidden"><select class="jump virgin"><option selected disabled value="|nil"><i>Loaded</i></option></select></li> </ul> </div> </nav> <div class="navBtns"> <a class="btn-floating tooltipped blue-grey darken-4 z-depth-light hide-on-media-bucket hide-on-embed modal-trigger" href="#options" data-position="bottom" data-tooltip="options & hotkeys"><i class="mdi-action-settings"></i></a> <?php if ($loggedIn): ?> <a class="btn-floating tooltipped blue-grey darken-2 z-depth-light hide-on-embed" href="/logout" data-position="bottom" data-tooltip="log-out from u/<?=$username ?>"><i class="mdi-social-person"></i></a> <?php else: ?> <a class="btn-floating tooltipped blue-grey darken-4 z-depth-light hide-on-embed" href="/login" data-position="bottom" data-tooltip="log-in via reddit account"><i class="mdi-social-person-outline"></i></a> <?php endif; ?> <a class="btn-floating tooltipped blue-grey darken-4 z-depth-light hide-on-embed" onClick="$('div.quickLoad span.select-dropdown').click();" data-position="bottom" data-tooltip="open/ close menu"><i class="mdi-navigation-menu"></i></a> </div> <div class="container media hidden"> <div class="section content"><div class="hide-on-load media-dsp" style="height:600px;padding-top:20%;color:#eee;font-size:32px;"><marquee hspace="25%" scrollamount="12"><i>loading!</i></marquee></div></div> <div class="section opts"> <div class="mediaAbout grey-text text-lighten-3"> <div style="margin:8px;width:100%"> <h5 class="hide-on-small-only"><span class="abPostSource"></span> <span class="abPostFeed"></span><span class="abCommentsCnt"></span> <span class="abLinksCnt"></span> <a class="relatedNext hide-on-load tooltipped grey-text text-lighten-4 grey darken-4 z-depth-light" data-position="top" data-tooltip="load next found link">&nbsp;&#187;&nbsp;</a> </h5> <h6 class="hide-on-med-and-down"> <a class="hotkeys hidden tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light" onclick="return false;" data-position="top" data-tooltip="hotkeys off, click anywhere to enable"><i class="mdi-device-brightness-auto"></i></a> <a class="addLink hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light modal-trigger" href="#linksAdd" data-position="top" data-tooltip="open search"><i class="mdi-action-search"></i></a> <a class="offliberty hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light modal-trigger" data-position="top" data-tooltip="download via offliberty.com"><i class="mdi-file-file-download"></i></a>  <a class="explode youtube-playlist hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light" data-position="top" data-tooltip="add all vids in playlist to links"><i class="mdi-content-add-circle-outline"></i></a>  <a class="explode imgur-album hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light" data-position="top" data-tooltip="add all pics in album to links"><i class="mdi-content-add-circle-outline"></i></a> <a class="imgurDownload hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light modal-trigger" data-position="top" data-tooltip="download .zip of album"><i class="mdi-file-file-download"></i></i></a> <a class="addLike hide-on-no-user tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light modal-trigger" href="#addLike" data-position="top" data-tooltip="upvote & add to liked"><i class="mdi-action-thumb-up"></i></a> <a class="dislike hide-on-no-user hide-on-load tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light" data-position="top" data-tooltip="remove from suggested links"><i class="mdi-action-thumb-down"></i></a> <a class="plAppend hide-on-no-user tooltipped grey-text text-lighten-2 grey darken-4 z-depth-light modal-trigger" href="#plAppend" data-position="top" data-tooltip="add link to a playlist"><i class="mdi-av-playlist-add"></i></a> </h6> </div> </div> <span class="hidden title"><h4></h4></span> </div> </div>
<div class="container grid hidden"> <h1 class="contLabel hide-on-med-and-down">loaded</h1> <div class="section content"> <div class="cardCont boxCont row grey darken-1 z-depth-1"> </div> </div> <div class="section opts hide-on-small-only blue-grey darken-4 z-depth-2"> <a class="nixLinks btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#nixLinks" data-position="top" data-tooltip="remove links"><i class="mdi-content-remove"></i></a> <a class="addLink btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#linksAdd" data-position="top" data-tooltip="add a link"><i class="mdi-content-add"></i></a> <a class="plAdd hide-on-media-bucket btn-floating blue-grey darken-2 save z-depth-1 tooltipped modal-trigger" href="#plAdd" data-position="top" data-tooltip="save all links to playlist"><i class="mdi-content-save"></i></a> <a class="share btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#share" data-position="top" data-tooltip="Share or embed this feed."><i class="mdi-social-share"></i></a> <a class="togShuffle btn-floating blue-grey darken-2 z-depth-1 tooltipped" href="#shuffle" data-position="top" data-tooltip="shuffle links"><i class="mdi-av-shuffle"></i></a> <a class="togLinks hide-on-media-bucket btn-floating blue-grey darken-2 z-depth-1 tooltipped" href="#table" data-position="top" data-tooltip="switch to table view"><i class="mdi-editor-format-list-numbered"></i></a> </div> </div> <div class="container links hidden"> <h1 class="contLabel hide-on-med-and-down">loaded</h1> <div class="section content"><?php if ($bucket == 'music') echo '<table id="links" class="music compact hover row-border z-depth-2"><thead><tr><th class="pos">#</th><th class="artist">Artist</th><th class="track">Track</th><th class="genre">Genre(s)</th><th class="year">Year</th><th class="length">Length</th><th class="score">Score</th><th class="subreddit">Sub</th><th class="source">Source</th><th class="opts shuffle"><i class="shuffle tiny mdi-av-shuffle lighten-2' . (isset($_GET["shuffle"]) ? " green" : "") . '"></i></th></tr></thead><tbody></tbody></table>'; else if ($bucket == 'vids') echo '<table id="links" class="vids compact hover row-border z-depth-2"><thead><tr><th class="pos">#</th><th class="title">Title</th><th class="length">Length</th><th class="kind">Kind</th><th class="author">Author</th><th class="score">Score</th><th class="subreddit">Sub</th><th class="source">Source</th><th class="opts shuffle"><i class="shuffle tiny mdi-av-shuffle lighten-2' . (isset($_GET["shuffle"]) ? " green" : "") . '"></i></th></tr></thead><tbody></tbody></table>'; else echo '<table id="links" class="others compact hover row-border z-depth-2"><thead><tr><th class="pos">#</th><th class="title">Title</th><th class="kind">Kind</th><th class="author">Author</th><th class="score">Score</th><th class="subreddit">Sub</th><th class="source">Source</th><th class="opts shuffle"><i class="shuffle tiny mdi-av-shuffle lighten-2' . (isset($_GET["shuffle"]) ? " green" : "") . '"></i></th></tr></thead><tbody></tbody></table>';?> <div class="listings"></div> </div> <div class="section opts hide-on-small-only blue-grey darken-4 z-depth-2"> <a class="nixLinks btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#nixLinks" data-position="top" data-tooltip="remove links"><i class="mdi-content-remove"></i></a> <a class="addLink btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#linksAdd" data-position="top" data-tooltip="add a link"><i class="mdi-content-add"></i></a> <a class="plAdd btn-floating blue-grey darken-2 save z-depth-1 tooltipped modal-trigger" href="#plAdd" data-position="top" data-tooltip="save all links to playlist"><i class="mdi-content-save"></i></a> <a class="share btn-floating blue-grey darken-2 z-depth-1 tooltipped modal-trigger" href="#share" data-position="top" data-tooltip="Share or embed this feed."><i class="mdi-social-share"></i></a> <a class="togLinks btn-floating blue-grey darken-2 z-depth-1 tooltipped" href="#grid" data-position="top" data-tooltip="switch to grid view"><i class="mdi-action-view-module"></i></a> </div> </div>
<?php
  if ($bucket == 'media') {
    $switchURL = $url;
    if (strpos($switchURL, "?") === false) {
      if (strpos($switchURL, "/r/") === false) $switchURL .= '?bucket={BUCKET}'; 
      else $switchURL .= '/{BUCKET}';
    }
    else $switchURL .= '&bucket={BUCKET}';


    echo '<div class="row"><div class="col s12 m12 l8 offset-l2"><div class="card small center-align z-depth-2" style="height:248px;margin-top:50px;"><div class="card-action">';
    echo "<h3>You are in the 'media' bucket.<br>Some functionality is not available!</h3><h5>Switch to";
    foreach ($vars['buckets'] as $key => $value) {
      $bURL = str_replace("{BUCKET}", $value, $switchURL);
      echo " <a href='" . $bURL . "' title='" . $vars['bucketDescrips'][$value] . "'>" . $value . "</a>";
    }

    echo "</h5><br><br></div></div></div></div>";
  }
?>
<div class="container liked hidden half-height"> <h1 class="contLabel hide-on-med-and-down">liked</h1> <div class="section content no-opts"> <div class="boxCont grey darken-1 z-depth-1" style="padding:8px 20px;border-radius:2px;">
<?php
  $catCnt = 0;
  $lastCat = "";

  echo '<div class="row"><div class="input-field col s12 grey lighten-3 z-depth-2" style="border-radius:4px"><select id="likedCats">';
  if ($foundLinks) {
    echo '<option value="0">Suggested</option>';
    $catCnt = 1;
  }

  while ($like = $userLikes->fetch_row()) {
    // cat, label, url, thumb, permalink
    $l_cat = $like[0];
    $l_cat_full = $l_cat;
    if (strpos($l_cat, "|") !== false) $l_cat = substr($l_cat, strpos($l_cat, "|") + 1);

    $l_label = $like[1];
    $l_url = $like[2];
    $l_thumb = str_replace("http:", "https:", $like[3]);
    $l_perma = $like[4];
    $l_idx = $like[5];
    $l_descrip = $like[6];

    if ($l_cat_full !== $lastCat) {
      if (
        substr($l_cat_full, 0, 1) !== "~"
        && strpos($userCats, 'value="' . $l_cat_full . '"') === false 
        && strpos($stickyCats, 'value="' . $l_cat_full . '"') === false
      ) $userCats .= '<option value="' . $l_cat_full . '">' . $l_cat . '</option>';

      // if ($cnt > 0) echo "</ul></div></li>";
      // echo "<li class='collapsible-item'><div class='collapsible-header'><h5>" . $l_cat . "</h5></div><div class='collapsible-body'><ul class='collection'>";

      // if ($cnt > 0) echo '</ul></div>';

      // echo '<li class="tab col s4 green darken-4 z-depth-2"><a class="grey-text text-lighten-3" href="#liked-' . $catCnt . '">' . $l_cat . '</a></li>';
      echo '<option value="' . $catCnt . '">' . $l_cat . '</option>';

      $lastCat = $l_cat_full;
      $catCnt++;
    }    
  }
  // echo "</ul></div><div class='links row'>";
  echo "</select></div></div><div class='links row'>";

  $cnt = 0;
  $catCnt = 0;
  $hidden = "";

  if ($foundLinks) {
    echo '<div class="results" id="liked-0"><ul class="collection z-depth-1 suggested">';

    $catCnt = 1;
    $hidden = " hidden";

    $suggestions->data_seek(0);
    while ($sug = $suggestions->fetch_row()) {
        // kind, source, label, descrip, url, permalink, thumb
      $s_kind = $sug[0];
      if ($s_kind != "link" || $cnt > 98) continue;
      $s_source = $sug[1];
      $s_label = $sug[2];
      $s_descrip = $sug[3];
      $s_url = $sug[4];
      $s_permalink = $sug[5];
      $s_thumb = $sug[6];
      $s_id = $sug[7];

      if ($s_thumb == "" || substr($s_thumb, 0, 4) != "http") {
        if ($bucket == "ladycandy") $s_thumb = "/img/eyecandy.jpg";
        else if ($bucket == "gaynsfw") $s_thumb = "/img/nsfw.jpg";
        else if ($bucket == "media") $s_thumb = "/img/little_r.png";
        else $s_thumb = "/img/" . $bucket . ".jpg";
      }

      echo 
        '<div class="col s12 m4 l3">'
          . '<li class="card collection-item avatar idx-' . ($cnt * -1) . ' z-depth-2">'
            . '<div class="title">' . $s_label . '</div>'
            // . '<span class="hide-on-small-only"><br>' . $l_url . '</span>'  // . ') ' . $l_descrip . 
            . '<img class="right z-depth-1" src="' . $s_thumb . '">'  //  alt=""

            . '<div class="btns">'
              . '<a class="nixSugg secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="remove from suggestions"><i class="small mdi-content-clear"></i></a>'
              . '<a class="likeOpen secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="open on host site"><i class="small mdi-action-open-in-new"></i></a>'
              . '<a class="likeAppend secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="add to loaded"><i class="small mdi-content-add"></i></a>'
            . '</div>'
          . '</li>'
        . '</div>'
      ;

      $cnt++;
    }

    // echo "</ul></div>";  // closed in while() below
  }

  $lastCat = "";

  $userLikes->data_seek(0);
  while ($like = $userLikes->fetch_row()) {
    // cat, label, url, thumb, permalink
    $l_cat = $like[0];
    $l_cat_full = $l_cat;
    if (strpos($l_cat, "|") !== false) $l_cat = substr($l_cat, strpos($l_cat, "|") + 1);

    $l_label = $like[1];
    $l_url = $like[2];
    $l_thumb = str_replace("http:", "https:", $like[3]);
    $l_perma = $like[4];
    $l_idx = $like[5];
    $l_descrip = $like[6];

    if ($l_cat_full !== $lastCat) {
      // if ($cnt > 0) echo "</ul></div></li>";
      // echo "<li class='collapsible-item'><div class='collapsible-header'><h5>" . $l_cat . "</h5></div><div class='collapsible-body'><ul class='collection'>";

      if ($cnt > 0) {
        echo '</ul></div>';
        $hidden = " hidden";
      }
 

      // echo 
      //   '<div class="row"><ul class="collection with-header z-depth-1">'
      //     . '<div class="col s12 l12"><li class="collection-header blue-grey lighten-1 grey-text text-lighten-4"><h5>' . $l_cat . '</h5></li></div>';

      echo '<div class="results' . $hidden . '" id="liked-' . $catCnt . '"><ul class="collection z-depth-1">';

      $lastCat = $l_cat_full;
      $catCnt++;
    }

    // echo 
    //   '<li class="collection-item avatar idx-' . $l_idx . '">'
    //     . '<img src="' . $l_thumb . '">'  //  alt=""
    //     . '<div class="title"><b>' . $l_label . '</b> ' . $l_descrip . '</div>'
    //     // These <a>s float: left so order is reversed.
    //     . '<a class="secondary-content nix btn-floating tooltipped red darken-4 z-depth-1" data-position="bottom" data-tooltip="remove from liked"><i class="mdi-content-clear"></i></a>'
    //     . '<a class="secondary-content append btn-floating tooltipped green darken-4 z-depth-1" data-position="bottom" data-tooltip="add to loaded"><i class="mdi-content-add"></i></a>'
    //   . '</li>'
    // ;

    echo 
      '<div class="col s12 m4 l3">'
        . '<li class="card collection-item avatar idx-' . $l_idx . ' z-depth-2">'
          . '<div class="title">' . $l_label . '</div>'
          // . '<span class="hide-on-small-only"><br>' . $l_url . '</span>'  // . ') ' . $l_descrip . 
          . '<img class="right z-depth-1" src="' . $l_thumb . '">'  //  alt=""

          . '<div class="btns">'
            . '<a class="likeNix secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="remove from liked"><i class="small mdi-content-clear"></i></a>'
            . '<a class="likeOpen secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="open on host site"><i class="small mdi-action-open-in-new"></i></a>'
            . '<a class="likeAppend secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="add to loaded"><i class="small mdi-content-add"></i></a>'
          . '</div>'
        . '</li>'
      . '</div>'
    ;

    $cnt++;
  }

  // if ($cnt > 0) echo "</ul></div></li>";
  if ($cnt > 0) echo "</ul></div>";
  echo "</div>";  // close <div class="row">
?>
 </ul> </div> </div> </div> <div class="container feeds hide-on-embed"> <h1 class="contLabel hide-on-med-and-down">feeds</h1> <div class="section no-opts"> <div class="boxCont grey darken-1 z-depth-1" style="padding:8px 20px;border-radius:2px;">
<?php
  $catCnt = 0;
  $lastCat = "";

  // echo '<div class="row"><ul class="tabs">';
  $width = 's12';
  if ($loggedIn) $width = 's10';
  echo '<div class="row"><div class="input-field col ' . $width . ' grey lighten-3 z-depth-2" style="border-radius:4px"><select id="feedCats">';

  if ($foundFeeds) {
    if (!$loggedIn) echo '<option value="0">Most Popular</option>';
    else echo '<option value="0">Suggested</option>';

    $catCnt = 1;
  }

  while ($l_feed = $feeds->fetch_row()) {
    // cat, source, hasOpts, url, label, descrip, is_sticky, is_default
    $l_cat_full = $l_feed[0];
    $l_cat = $l_cat_full;
    if (strpos($l_cat, "|") !== false) $l_cat = substr($l_cat, strpos($l_cat, "|") + 1);

    $l_source = $l_feed[1];
    $hasOpts = $l_feed[2];
    $l_url = $l_feed[3];

    $l_label = $l_feed[4];
    $l_descrip = str_replace(chr(10), "  ", $l_feed[5]);
    $sticky = ($l_feed[6] == 0 ? false : true);
    $default = ($l_feed[7] == 0 ? false : true);
    $userOnly = ($l_feed[8] == 0 ? false : true);

    if ($userOnly && !$loggedIn) continue;      // if not logged in, skip the user-only feeds

    if (
      !$userOnly
      && substr($l_cat_full, 0, 1) !== "~"
      && strpos($stickyCats, 'value="' . $l_cat_full . '"') === false 
      && strpos($userCats, 'value="' . $l_cat_full . '"') === false
    ) {
      if ($sticky) $stickyCats .= '<option value="' . $l_cat_full . '">' . $l_cat . '</option>';
      else $userCats .= '<option value="' . $l_cat_full . '">' . $l_cat . '</option>';
    }

    if ($default && strpos($defaultCats, 'value="' . $l_cat_full . '"') === false) $defaultCats .= '<option value="' . $l_cat_full . '">' . $l_cat . '</option>';

    if ($loggedIn && $default) continue;              // if we're logged in, skip the default feeds

    if ($l_cat_full == "~a|Playlists") {
      $playlistOpts .= '<option value="' . $playlistCnt . '">' . $l_label . '</option>';
      $playlistCnt++;

      $userPlaylists[] = array(
        "url" => $l_url
        ,"label" => $l_label
        ,"descrip" => $l_descrip
      );
    }

    if ($l_cat_full != $lastCat) {
      // echo '<li class="tab col s4 blue darken-4 z-depth-2"><a class="grey-text text-lighten-3" href="#feeds-' . $catCnt . '">' . $l_cat . '</a></li>';
      echo '<option value="' . $catCnt . '">' . $l_cat . '</option>';

      // echo 
      //   '<div class="row"><ul class="collection with-header z-depth-1">'
      //     . '<div class="col s12"><li class="collection-header blue-grey grey-text text-lighten-4"><h5>' . $l_cat . '</h5></li></div>';

      $lastCat = $l_cat_full;
      $catCnt++;
    }
  }

  echo "</select></div>";

  if ($loggedIn)
    echo '<div class="col s2"><a class="btn-large z-depth-2 blue darken-3 grey-text text-lighten-3 addFeed modal-trigger tooltipped" style="margin:16px 0 -8px;width:100%;" data-position="top" data-tooltip="add feed" href="#addFeed"><i class="mdi-content-add"></i></a></div>';

  echo "</div><div class='links row'>";

  $hidden = "";
  $cnt = 0;
  $catCnt = 0;

  if ($foundFeeds) {
    echo '<div class="results" id="feeds-0"><ul class="collection z-depth-1">';

    $catCnt = 1;
    $hidden = " hidden";

    $cnt = 0;
    $dupeFeeds = array();
    $suggestions->data_seek(0);
    while ($sug = $suggestions->fetch_row()) {
      // kind, source, label, descrip, url, permalink
      $s_kind = $sug[0];
      if ($s_kind != "feed" || $cnt > 10) continue;
      $s_source = $sug[1];
      $s_label = $sug[2];
      $s_descrip = $sug[3];
      $s_url = $sug[4];
      if (in_array(strtolower($s_url), $dupeFeeds)) continue;
      $dupeFeeds[] = strtolower($s_url);

      $s_permalink = $sug[5];

      echo
        '<div class="col s12 m6 l4">'
          . '<li class="card collection-item feed-' . $s_source . ' suggested no-opts z-depth-2"><div><div class="details"><b>' . $s_label . '</b><br><i>' . $s_url . '</i><span class="hide-on-small-only"><br>' . $s_descrip . '</span></div>'
          . '<div style="clear:both;">'
            . '<a class="secondary-content blue-text text-darken-4 tooltipped" data-position="left" data-tooltip="load feed"><i class="small mdi-hardware-keyboard-arrow-right"></i></a>'
          . '</div>'
        . "</div></li></div>"
      ;

      $cnt++;
    }

    // echo "</ul></div>";  // gets closed in while() below
  }

  $lastCat = "";
  $allSubs = "";

  $stripStrs = array("https://", "http://", "www.", "js/", ".js");  // Text to NOT display in URLs.

  $feeds->data_seek(0);
  while ($l_feed = $feeds->fetch_row()) {
    // cat, source, hasOpts, url, label, descrip, is_sticky, is_default
    $l_cat_full = $l_feed[0];
    $l_cat = $l_cat_full;
    if (strpos($l_cat, "|") !== false) $l_cat = substr($l_cat, strpos($l_cat, "|") + 1);

    $l_source = $l_feed[1];
    $hasOpts = $l_feed[2];
    $l_url = $l_feed[3];

    $l_label = $l_feed[4];
    $l_descrip = str_replace(chr(10), "  ", $l_feed[5]);
    $sticky = ($l_feed[6] == 0 ? false : true);
    $default = ($l_feed[7] == 0 ? false : true);
    $userOnly = ($l_feed[8] == 0 ? false : true);

    if ($userOnly && !$loggedIn) continue;          // if not logged in, skip the user-only feeds
    else if ($loggedIn && $default) continue;     // if we're logged in, skip the default feeds

    if (
      $embedded
      && $loggedIn
      && $l_source == 'reddit'
      && strlen($allSubs) + strlen($l_url) < 2048
      && substr($l_url, 0, 3) == '/r/'
      && strpos($l_url, "?") == false
      && strpos($l_url, "/comments/") == false
    ) $allSubs .= ($allSubs == "" ? "" : "+") . explode("/", str_replace("/r/", "", $l_url))[0];

    if ($l_cat_full != $lastCat) {
      if ($cnt > 0) {
        echo '</ul></div>';
        $hidden = " hidden";
      }

      echo '<div class="results' . $hidden . '" id="feeds-' . $catCnt . '"><ul class="collection z-depth-1">';

      $lastCat = $l_cat_full;
      $catCnt++;
    }

    if (!in_array($l_url, $urlsShown, true)) $urlsShown[] = $l_url;

    $l_descrip = str_replace(chr(10), "  ", $l_feed[5]);
    if (strlen($l_descrip) > 127) {
      $pos = strpos($l_descrip, ". ", strpos($l_descrip, ". ") + 2);
      if ($pos !== false) {
        $l_descrip = substr($l_descrip, 0, $pos + 1);
        if (strlen($l_descrip) > 127 && strpos($l_descrip, ". ") !== false)
          $l_descrip = substr($l_descrip, 0, strpos($l_descrip, ". ") + 1);
      }
    }

    $l_url = trim(str_replace($stripStrs, "", $l_url));
    $l_url = substr($l_url, 0, 24) . (strlen($l_url) > 24 ? "&hellip;" : "");

    echo '<div class="col s12 m6 l4">';

    if ($hasOpts)
      echo 
        '<li class="card collection-item collection-reveal feed-' . $l_source . ' z-depth-2"><div><div class="details"><b>' . $l_label . '</b><br><i>' . $l_url . '</i><span class="hide-on-small-only"><br>' . $l_descrip . '</span></div>'
        . '<div style="clear:both;">'
          . '<a class="secondary-content blue-text text-darken-4 tooltipped" data-position="left" data-tooltip="view feed options"><i class="small mdi-hardware-keyboard-arrow-down"></i></a>'
          . ($sticky ? '' : '<a onClick="listr.feeds.nix(' . $cnt . ');" class="secondary-content blue-text text-darken-4 tooltipped" data-position="bottom" data-tooltip="remove from feeds"><i class="small mdi-content-clear"></i></a>')
        . '</div>'
        . '<div class="secondary-reveal"> </div>'
      ;
    else
      echo 
        '<li class="card collection-item feed-' . $l_source . ' no-opts z-depth-2"><div><div class="details"><b>' . $l_label . '</b><br><i>' . $l_url . '</i><span class="hide-on-small-only"><br>' . $l_descrip . '</span></div>'
        . '<div style="clear:both;">'
          . '<a class="secondary-content blue-text text-darken-4 tooltipped" data-position="left" data-tooltip="load feed"><i class="small mdi-hardware-keyboard-arrow-right"></i></a>'
          . ($sticky ? '' : '<a onClick="listr.feeds.nix(' . $cnt . ');" class="secondary-content blue-text text-darken-4 tooltipped" data-position="bottom" data-tooltip="remove from feeds"><i class="small mdi-content-clear"></i></a>')
        . '</div>'
      ;

    echo "</div></li></div>";
    $cnt++;
  }

  if ($cnt > 0) echo '</ul></div>';  // close last cat
  echo "</div>";

  // if ($loggedIn)
  //   echo
  //     '<div style="width:100%;text-align:center">'
  //       . '<a class="addFeed btn-large green darken-4 tooltipped modal-trigger" href="#addFeed" data-position="bottom" data-tooltip="add feed"><i class="mdi-content-add left"></i>add feed</a>'
  //     . '</div>'
  //   ;
?>
</div></div></div> <div id="options" class="container options no-min-height modal"> <div class="section content no-opts modal-content"> <h4>options</h4> <div class="music hidden"> <!-- Opts are divided into buckets. --> <!-- Order of classes is important. First class must match corresponding listr.opt.* structure. --> <div class="showMedia switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Display media<span class="hide-on-small-only"> at top of page</span>? </div> <div class="showVisuals switch hide-on-mobile"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Replace media with<span class="hide-on-small-only"> more interesting</span> visuals? </div> <div class="autoSkip switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Skip to next link<span class="hide-on-small-only"> when a song finishes</span>? </div> <div class="allowNoStream switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include sites that don't stream<span class="hide-on-small-only"> automatically (i.e. bandcamp)</span>? </div> <div class="allowAds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include sites with ads<span class="hide-on-small-only"> before the media (i.e. dailymotion)</span>? </div> <div class="allowNSFW switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include links marked N<span class="hide-on-small-only">ot </span>S<span class="hide-on-small-only">afe </span>F<span class="hide-on-small-only">or </span>W<span class="hide-on-small-only">ork</span>? </div> <div class="replaceYoutube switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Attempt to replace youtube vids<span class="hide-on-small-only"> when link won't play</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div><!-- <div class="showSongkick switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Show <a target="_blank" href="http://www.songkick.com">SongKick</a> button<span class="hide-on-small-only"> when an artist is on tour</span>? </div>--> <div class="showOffliberty switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Show <a target="_blank" href="http://offliberty.com">Offliberty</a> button<span class="hide-on-small-only"> to download streaming music & video</span>? </div> <div class="showGrid switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> <div class="sleep switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically stop playback in <span class="time">an hour?</span> </div> </div> <!-- vids --> <div class="vids hidden"> <div class="autoSkip switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Skip to next link<span class="hide-on-small-only"> when a vid finishes</span>? </div> <div class="allowAds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include sites with ads<span class="hide-on-small-only"> before the media (i.e. dailymotion)</span>? </div> <div class="allowNSFW switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include links marked N<span class="hide-on-small-only">ot </span>S<span class="hide-on-small-only">afe </span>F<span class="hide-on-small-only">or </span>W<span class="hide-on-small-only">ork</span>? </div> <div class="replaceYoutube switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Attempt to replace youtube vids<span class="hide-on-small-only"> when link won't play</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showOffliberty switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Show <a href="https://offliberty.com">Offliberty</a> button<span class="hide-on-small-only"> to download streaming music & video</span>? </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> <div class="sleep switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically stop playback in <span class="time">an hour?</span> </div> </div> <div class="pics hidden"> <div class="allowZoom switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Zoom in on images<span class="hide-on-small-only"> when mouse cursor is over them</span>? </div> <div class="allowNSFW switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include links marked N<span class="hide-on-small-only">ot </span>S<span class="hide-on-small-only">afe </span>F<span class="hide-on-small-only">or </span>W<span class="hide-on-small-only">ork</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> </div> <div class="eyecandy hidden"> <div class="allowZoom switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Zoom in on images<span class="hide-on-small-only"> when mouse cursor is over them</span>? </div> <div class="allowNSFW switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include links marked N<span class="hide-on-small-only">ot </span>S<span class="hide-on-small-only">afe </span>F<span class="hide-on-small-only">or </span>W<span class="hide-on-small-only">ork</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> </div> <div class="ladycandy hidden"> <div class="allowZoom switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Zoom in on images<span class="hide-on-small-only"> when mouse cursor is over them</span>? </div> <div class="allowNSFW switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Include links marked N<span class="hide-on-small-only">ot </span>S<span class="hide-on-small-only">afe </span>F<span class="hide-on-small-only">or </span>W<span class="hide-on-small-only">ork</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> </div> <div class="nsfw hidden"> <div class="allowZoom switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Zoom in on images<span class="hide-on-small-only"> when mouse cursor is over them</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> </div> <div class="gaynsfw hidden"> <div class="allowZoom switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Zoom in on images<span class="hide-on-small-only"> when mouse cursor is over them</span>? </div> <div class="clearOnLoad switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Clear all links when loading<span class="hide-on-small-only"> a new feed</span>? </div> <div class="pushRelated switch"> <label> No <input type="checkbox"> <span class="lever"></span> Yes </label> Automatically add all found links<span class="hide-on-small-only"> to loaded links</span>? </div> <div class="onlySearchFeeds switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Only search subreddits included in feeds?<span class="hide-on-small-only"> (If no, search all of reddit.)</span> </div> <div class="showGrid switch"> <label> No <input type="checkbox" checked> <span class="lever"></span> Yes </label> Show links in a grid<span class="hide-on-small-only"> instead of a table</span>? </div> </div> </div> <div class="section hotkeys z-depth-1 hide-on-mobile"> <h4>hotkeys</h4> <table class="striped"> <tbody> <tr><td>, (comma)</td><td>Back to prev. link</td></tr> <tr><td>. (period)</td><td>Skip to next link</td></tr> <tr><td>n</td><td>Load next found link</td></tr> <tr style="display:none;"><td colspan="2">&nbsp;</td></tr> <tr><td>/ (slash)</td><td>Pause/ resume media.</td></tr> <tr><td>; (semicolon)</td><td>Turn autoskipping on/ off</td></tr> <tr style="display:none;"><td colspan="2">&nbsp;</td></tr> <tr><td>m</td><td>Toggle <b>m</b>enu open/ close</td></tr> <tr><td>s</td><td>Open close search results/ found links</td></tr> <tr style="display:none;"><td colspan="2">&nbsp;</td></tr> <tr><td colspan="2">&nbsp;</td></tr> <tr><td>o</td><td><b>O</b>pen link on host site</td></tr> <tr><td>r</td><td>Open <b>r</b>elated post/ comment</tr> <tr style="display:none;"><td colspan="2">&nbsp;</td></tr> <tr><td>l</td><td>Add link to <b>l</b>iked</td></tr> <tr><td>p</td><td>Add link to <b>p</b>laylist</td></tr> <tr style="display:none;"><td colspan="2">&nbsp;</td></tr> <tr><td colspan="2">&nbsp;</td></tr> <tr><td>z</td><td>Turn sleep on/ off</td></tr> <tr><td>t</td><td>Toggle <b>t</b>able or grid view</td></tr> <tr><td>v</td><td>Turn <b>v</b>isuals on/ off</td></tr> <tr><td>1, 2, 3, etc.</td><td>Scroll to media, links, likes, etc.</td></tr> </tbody> </table> <p><b>Note:</b> Hotkeys don't work if the media has focus (like if you click on a youtube video.)<br>Not all hotkeys are available for all buckets.</p> </div> <div class="modal-footer"> <a class="waves-effect waves-blue btn-flat modal-action modal-close">Close</a> </div> </div> <footer class="page-footer blue-grey darken-4 hide-on-embed"> <div class="row"> <div class="col s1"> <?php if ($loggedIn && empty($_COOKIE["removeads"]) && $bucket == 'music'): ?> <a target="_blank" href="https://chrome.google.com/webstore/detail/npmlbnidkjmlejhmckddifnbkcgmddnd/" class="z-depth-1 tooltipped" data-position="right" data-tooltip="use radd.it/music in your browser!"><img class="z-depth-light" src="/img/chrome.png"></a> <?php else: ?>&nbsp;<?php endif; ?> </div> <div class="col s2"><a href="/music" class="z-depth-1 tooltipped" data-position="bottom" data-tooltip="music"><img class="z-depth-light" src="/img/music.jpg"></a></div> <div class="col s2"><a href="/vids" class="z-depth-1 tooltipped" data-position="bottom" data-tooltip="vids"><img class="z-depth-light" src="/img/vids.jpg"></a></div> <div class="col s2"><a href="/pics" class="z-depth-1 tooltipped" data-position="bottom" data-tooltip="pics"><img class="z-depth-light" src="/img/pics.jpg"></a></div> <div class="col s2"><a href="/eyecandy" class="z-depth-1 tooltipped" data-position="bottom" data-tooltip="eyecandy"><img class="z-depth-light" src="/img/eyecandy.jpg"></a></div> <div class="col s2"><a href="/nsfw" class="z-depth-1 tooltipped" data-position="bottom" data-tooltip="nsfw"><img class="z-depth-light" src="/img/nsfw.jpg"></a></div> <div class="col s1">&nbsp;</div> </div> </footer> <div class="container buckets no-min-height hide-on-embed"> </div> <div id="nixLinks" class="modal"> <div class="row"> <div class="modal-content"> <span class="options"> </span> <a onclick="listr.links.clear('listing');" class="waves-effect waves-light btn-large darken-2 modal-close"><i class="mdi-content-clear left"></i>Remove Listings</a> <a onclick="listr.links.clear();" class="waves-effect waves-light btn-large darken-2 modal-close"><i class="mdi-content-clear left"></i>Remove All Links</a> </div> </div> <div class="row"> <div class="modal-footer col s12"> <a class="waves-effect waves-blue btn-flat modal-close"><b>Close</b></a> </div> </div> </div> <div id="share" class="modal"> <div class="modal-content"> <div class="row"> <div class="col s9 offset-s1"><h5 class="right">Direct URL</h5></div><div class="col s2"></div> <div class="col s9 offset-s1 input-field"><input id="share-url" type="text"></div><div class="col s2"> </div> </div> <div class="row"> <div class="col s9 offset-s1"><h5 class="right">Embed</h5></div><div class="col s2"></div> <div class="col s9 offset-s1 input-field"><input id="share-embed" type="text"></div><div class="col s2"> </div> <?php if ($bucket == 'media' || $bucket == 'vids' || $bucket == 'music'): ?> <div class="col s6 offset-s4"><input id="share-all" type="checkbox"><label for="share-all" style="margin-left:24px;">Include all media?</label></div><div class="col s2"> </div> <div class="col s6 offset-s3" style="font-size:80%;">By default, the embedded player omits any tracks that don't automatically stream. (E.g. bandcamp, veoh, <i>etc</i>.) Check to include links to these sources.</div><div class="col s3"> </div> <?php endif; ?> </div> <div class="row"> <div class="modal-footer col s12"> <a class="waves-effect waves-blue btn-flat modal-action modal-close"><b>Close</b></a> </div> </div> </div> </div> <div id="reddit-search" class="modal"> <div class="modal-content"> <form id="reddit-search-form"> <input type="hidden" id="reddit-search-url" value=""> <div class="row"> <div class="col s12"> <label>Load links by..</label> <select id="reddit-search-sort"> <option value="relevance" selected>relevance to search</option> <option value="hot" selected>score and newness (hot)</option> <option value="new">newness</option> <option value="top-week">top links this week</option> <option value="top-month">top links this month</option> <option value="top-year">top links this year</option> </select> </div> </div> <div class="row"> <div class="input-field col s10"> <input id="reddit-search-query" type="text"> <label for="reddit-search-query">Search for..</label> </div> <div class="input-field col s2"> <a class="reddit-search-go btn-floating btn-large waves-effect waves-light green darken-2"><i class="mdi-action-search"></i></a> </div> </div> </div> </form> </div> </div> <div id="reddit-flair" class="modal"> <div class="modal-content"> <form id="reddit-flair-form"> <input type="hidden" id="reddit-flair-url" value=""> <div class="row"> <div class="col s12"> <label>Load links by</label> <select id="reddit-flair-sort"> <option value="hot" selected>score and newness (hot)</option> <option value="new">newness</option> <option value="top-week">top links this week</option> <option value="top-month">top links this month</option> <option value="top-year">top links this year</option> </select> </div> </div> <div class="row"> <div class="col s12 reddit-flair-select"> </div> <!-- populated w/ <select> by feeds.js --> </div> <div class="row"> <div class="modal-footer col s12"> <a class="reddit-flair-load waves-effect waves-blue btn-flat modal-action modal-close"><b>Load</b></a> </div> </div> </div> </form> </div> <div id="plAdd" class="modal"> <div class="modal-content"> <form id="plAddForm" method="post" action="#"> <div class="row" style="overflow:hidden;"> <div class="col s9 offset-s1 plAdd-pl"> <select id="plAdd-pl" class="playlists"><option selected disabled value="|nil">Select Playlist</option><?=$playlistOpts ?><option value="|addNewPL">..or create a new playlist.</option></select> </div> <div class="col s9 offset-s1 input-field plAdd-pl-new hidden"><input id="plAdd-pl-new" type="text"><label for="plAdd-pl-new">New playlist label</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field plAdd-pl-new hidden"><input id="plAdd-descrip" type="text"><label for="plAdd-descrip">Playlist description (optional)</label></div><div class="col s2"></div> </div> <div class="row"> <div class="modal-footer"> <a class="modal-close waves-effect waves-light btn red darken-2"><i class="mdi-av-not-interested left"></i>Cancel</a> <a class="append waves-effect waves-light btn blue darken-2 tooltipped" data-position="bottom" data-tooltip="Add all links to the end of this playlist."><i class="mdi-navigation-check left"></i>Add to Playlist</a> <a class="save waves-effect waves-light btn green darken-2 tooltipped" data-position="bottom" data-tooltip="Create new or replace existing playlist with all links."><i class="mdi-av-my-library-add left"></i>Save & Replace</a> </div> </div> </form> </div> </div> <div id="plAppend" class="modal"> <div class="modal-content"> <form id="plAppendForm" method="post" action="#"> <input type="hidden" id="plAppend-perma" value=""> <div class="row" style="overflow:hidden;"> <div class="col s9 offset-s1 input-field"><h5 class="right">pick playlist</h5></div> <div class="col s9 offset-s1 plAppend-pl"> <select id="plAppend-pl" class="playlists"><option selected disabled value="|nil">Select Playlist</option><?=$playlistOpts ?><option value="|addNewPL">..or create a new playlist.</option></select> </div> <div class="col s9 offset-s1 input-field plAppend-pl-new hidden"><input id="plAppend-pl-new" type="text"><label for="plAppend-pl-new">New playlist label</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field plAppend-pl-new hidden"><input id="plAppend-descrip" type="text"><label for="plAppend-descrip">Playlist description (optional)</label></div><div class="col s2"></div> <div class="col s9 offset-s1 input-field"><h5 class="right">add link</h5></div> <div class="col s9 offset-s1 input-field"><input id="plAppend-title" type="text"><label for="plAppend-title">Title</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field"><input id="plAppend-url" type="text"><label for="plAppend-url">URL</label></div><div class="col s2"> </div> <div class="col s7 offset-s1 input-field"><input id="plAppend-thumb" type="text"><label for="plAppend-thumb">Thumbnail</label></div> <div class="col s2 input-field"><img id="plAppend-thumb-img" src="/img/little_r.png"></div> <div class="col s2"> </div> </div> <div class="row"> <div class="modal-footer"> <a class="modal-close waves-effect waves-light btn red darken-2"><i class="mdi-av-not-interested left"></i>Cancel</a> <a class="create hidden save waves-effect waves-light btn green darken-2"><i class="mdi-av-my-library-add left"></i>Create Playlist</a> <a class="append hidden save waves-effect waves-light btn green darken-2"><i class="mdi-av-my-library-add left"></i>Add to Playlist</a> </div> </div> </form> </div> </div> <div id="addLike" class="modal"> <div class="modal-content"> <div class="row"> <div class="col s12"> <h4>Add to Liked</h4> </div> </div> <form id="addLikeForm" method="post" action="#"> <div class="row" style="overflow:hidden;"> <div class="col s9 offset-s1 addlike-cat"> <select id="addlike-cat" class="cats"><option selected disabled value="|nil">Select Category</option><?=$userCats ?><?=$stickyCats ?><option value="|addNewCat">..or add a new category.</option></select> </div> <div class="col s9 offset-s1 input-field addlike-cat-new hidden"><input id="addlike-cat-new" type="text"><label for="addlike-cat-new">New category</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field"><input id="addlike-title" type="text"><label for="addlike-title">Title</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field"><input id="addlike-descrip" type="text"><label for="addlike-descrip">Description (optional)</label></div><div class="col s2"> </div> <div class="col s9 offset-s1 input-field"><input id="addlike-url" type="text"><label for="addlike-url">URL</label></div><div class="col s2"> </div> <div class="col s7 offset-s1 input-field"><input id="addlike-thumb" type="text"><label for="addlike-thumb">Thumbnail</label></div> <div class="col s2 input-field"><img id="addlike-thumb-img" src="/img/little_r.png"></div> <div class="col s2"> </div> </div> <div class="row"> <div class="modal-footer"> <a class="modal-close waves-effect waves-light btn red darken-2"><i class="mdi-av-not-interested left"></i>Cancel</a> <a class="hide-on-load upvote permalink waves-effect waves-light btn blue darken-2"><i class="mdi-navigation-check left"></i>Only Upvote</a> <a class="hide-on-load save permalink waves-effect waves-light btn green darken-2"><i class="mdi-av-my-library-add left"></i>Add & Upvote</a> <a class="hide-on-load save nopermalink waves-effect waves-light btn green darken-2"><i class="mdi-av-my-library-add left"></i>Add to Liked</a> </div> </div> </form> </div> </div> <div id="addFeed" class="modal"> <div class="modal-content"> <form id="addFeedForm" method="post" action="#"> <input id="addfeed-source" type="hidden" value=""> <div class="step1"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 1 of 3  Select Source</h5> </div> </div> <div class="row hidden firsttimer"> <div class="col s12 m10 offset-m1 white" style="border:black 1px solid;border-radius:4px;"> <p>Looks like this is the first time you're adding feeds! Feeds are the different lists of links that radd.it can load, the most common being subreddits.</p> <div class="hidden music"><p>If you're using radd.it's Chrome extension, you'll need to add feeds here on the site and then reload the player. All feeds, likes, and playlists are shared between the site and the plugin.</p></div> <p>&nbsp;</p> </div> </div> <div class="row"> <div class="col s12 m3 l1 hidden pics eyecandy ladycandy">&nbsp;</div> <!-- filler for non-youtube buckets --> <div class="col hide-on-med-and-down hidden pics eyecandy ladycandy" style="margin-right:1%;">&nbsp;</div> <div class="col s12 m6 l3"> <div class="card addfeed-reddit"> <div class="card-image"> <img src="https://i.imgur.com/hf1wtzN.png"> </div> <div class="card-content"> <span class="card-title grey-text text-darken-4">reddit</span> <p>Add a subreddit or multireddit to your feeds.</p> </div> </div> </div> <div class="col s12 m6 l3 hidden music vids nsfw gaynsfw"> <div class="card addfeed-youtube"> <div class="card-image"> <img src="/img/youtube.png"> </div> <div class="card-content"> <span class="card-title grey-text text-darken-4">Youtube</span> <p>Add a Youtube playlist or channel to your feeds.</p> </div> </div> </div> <div class="col s12 m6 l3"> <div class="card addfeed-defaults"> <div class="card-image"> <img src=<?php if ($bucket == "ladycandy") echo '"/img/eyecandy.jpg"'; else if ($bucket == "gaynsfw") echo '"/img/nsfw.jpg"'; else if ($bucket == "media") echo '"/img/little_r.png"'; else echo '"/img/' . $bucket . '.jpg"'; ?>> </div> <div class="card-content"> <span class="card-title grey-text text-darken-4">Defaults</span> <p>Add all feeds in a category from the default feeds.</p> </div> </div> </div> <div class="col s12 m6 l3"> <div class="card addfeed-direct"> <div class="card-image"> <img src="/img/little_r.png"> </div> <div class="card-content"> <span class="card-title grey-text text-darken-4">Direct URL</span> <p>Add any valid radd.it or reddit.com URL to your feeds.</p> </div> </div> </div> </div> <div class="row"> <div class="col s12 m8 offset-m2 hidden music white"> <p>You are currently in <b>music</b> which is for streaming music and music videos. To add non-music content, please switch to another category below.</p> <div class="center"> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden vids white"> <p>You are currently in <b>videos</b> which is for streaming videos (that are not music). To add non-video content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden pics white"> <p>You are currently in <b>pics</b> which is for safe for work pics of places and things. To add other content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden eyecandy white"> <p>You are currently in <b>eyecandy</b> which is for <b>safe for work pics of women</b>. To add other content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden ladycandy white"> <p>You are currently in <b>ladycandy</b> which is for <b>safe for work pics of men</b>. To add other content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden nsfw white"> <p>You are currently in <b>nsfw</b> which is for <b>NSFW (porn) content</b>. To add other content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/gaynsfw"><b>gay nsfw</b></a> -- NSFW man-on-man content</p> <p>&nbsp;</p> </div> </div> <div class="col s12 m8 offset-m2 hidden gaynsfw white"> <p>You are currently in <b>gay nsfw</b> which is for <b>gay NSFW (porn) content</b>. To add other content, please switch to another category below.</p> <div class="center"> <p><a href="/music"><b>music</b></a> -- streaming music and music videos</p> <p><a href="/vids"><b>vids</b></a> -- non-music, safe-for-work streaming video</p> <p><a href="/pics"><b>pics</b></a> -- safe for work pics of places or things</p> <p><a href="/eyecandy"><b>eyecandy</b></a> -- safe-for-work pics of attractive women</p> <p><a href="/ladycandy"><b>ladycandy</b></a> -- safe-for-work pics of attractive men</p> <p><a href="/nsfw"><b>nsfw</b></a> -- not safe for work content of breeders</p> <p>&nbsp;</p> </div> </div> </div> <div class="modal-footer"> <a class="waves-effect waves-blue btn-flat modal-action modal-close"><b>Close</b></a> </div> </div> <!-- end: step1 --> <div class="hidden step2 addfeed-defaults"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 2 of 3  Pick Category</h5> </div> </div> <div class="row"> <div class="addfeed-defaults-cat col s10 offset-s1"> <select id="addfeed-defaults-cat"><option value="|nil">Select category to import</option><?=$defaultCats ?></select> </div> <div class="col s1">&nbsp;</div> <div class="col s10 offset-s1"> <p>All default feeds in the selected category will be added to your feeds. (Unwanted feeds may be deleted afterward.)</p> </div> <div class="col s1">&nbsp;</div> </div> <div class="modal-footer"> <a class="addFeed waves-effect waves-light btn red darken-2"><i class="mdi-hardware-keyboard-arrow-left left"></i>Go back</a> <a class="step3 addfeed-defaults waves-effect waves-light btn green darken-2"><i class="mdi-hardware-keyboard-arrow-right right"></i>Next step</a> </div> </div> <div class="hidden step2 addfeed-reddit"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 2 of 3  Pick a Sub or Multi</h5> </div> </div> <div class="row"> <div class="addfeed-reddit-url col s10 offset-s1"> <select id="addfeed-reddit-url"> <option value="|nil">Select subreddit or multi</option>
<?php
  $headersShown = array();

  while ($sub = $userSubs->fetch_row()) {
    // id_user_sub, source, is_multi, name, url, label
    $idx = intval($sub[0]);
    $source = $sub[1];
    $is_multi = ($sub[2] == 0 ? false : true);
    $name = $sub[3];

    $s_url = $sub[4];

    if (in_array($s_url, $urlsShown, true)) continue;
    $urlsShown[] = $s_url;

    $label = $sub[5];

    if ($is_multi && !in_array("multis", $headersShown)) { echo '<option disabled>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;multireddits</option>'; $headersShown[] = "multis"; }
    else if (!$is_multi) {
      if ($idx > 0 && !in_array("subs", $headersShown)) {echo '<option disabled>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subreddits</option>'; $headersShown[] = "subs"; }
      else if ($idx == 0 && !in_array("upvotes", $headersShown)) {echo '<option disabled>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upvoted subs</option>'; $headersShown[] = "upvotes"; }
    }

    echo "<option value='" . $s_url . "'>". $label . " (" . $s_url . ")</option>";
  }
?>
 </select> </div> <div class="col s1">&nbsp;</div> <div class="col s10 offset-s1"> <p>Only subreddits you are subscribed to or have upvoted in are included. To add a subreddit or multi not listed here, use <a onclick="$('div.step2.addfeed-reddit').hide();$('div.card.addfeed-direct').click();"><i>Direct URL</i></a> instead.</p> </div> <div class="col s1">&nbsp;</div> </div> <div class="modal-footer"> <a class="addFeed waves-effect waves-light btn red darken-2"><i class="mdi-hardware-keyboard-arrow-left left"></i>Go back</a> <a class="step3 addfeed-reddit waves-effect waves-light btn green darken-2"><i class="mdi-hardware-keyboard-arrow-right right"></i>Next step</a> </div> </div> <div class="hidden step2 addfeed-youtube"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 2 of 3  Find Playlist or Channel</h5> </div> </div> <div class="row"> <div class="col s10 offset-s1 z-depth-2 white"> <p>When added to feeds, playlists always load the latest version from Youtube. Channels always load the vids most recently uploaded. This is useful for playlists or channels that are updated often.</p> <p>To load a playlist just once, you can add it to your links. To add all vids in a playlist individually, use the <b><i>Youtube Playlist</i></b> feed under <b>Special</b>.</p> <p>If you know the URL of the playlist, channel, or user you want to add, use <a onclick="$('div.step2.addfeed-youtube').hide();$('div.card.addfeed-direct').click();"><i>Direct URL</i></a> instead.</p> <p>&nbsp;</p> </div> <div class="col s1">&nbsp;</div> </div> <div class="row"> <div class="col s9 offset-s1 input-field"> <input id="addfeed-youtube-playlist-query" type="text"><label for="addfeed-youtube-playlist-query">Search for playlist</label> </div> <div class="input-field col s2"> <a class="addfeed-youtube-playlist-go btn-floating btn-large waves-effect waves-light blue"><i class="mdi-action-search"></i></a> </div> </div> <div class="row"> <div class="col s9 offset-s1 input-field"> <input id="addfeed-youtube-channel-query" type="text"><label for="addfeed-youtube-channel-query">Search for channel</label> </div> <div class="input-field col s2"> <a class="addfeed-youtube-channel-go btn-floating btn-large waves-effect waves-light blue"><i class="mdi-action-search"></i></a> </div> </div> <div class="row addfeed-youtube-results hidden"> <div class="results col s10 offset-s1"> </div> <div class="col s1">&nbsp;</div> </div> <div class="modal-footer"> <a class="addFeed waves-effect waves-light btn red darken-2"><i class="mdi-hardware-keyboard-arrow-left left"></i>Go back</a> </div> </div> <div class="hidden step2 addfeed-direct"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 2 of 3  Enter a URL</h5> </div> </div> <div class="row"> <div class="col s12"> <div class="input-field col s10 offset-s1"> <input id="addfeed-direct-url" type="text"> <label for="addfeed-direct-url">URL to add:</label> </div> <div class="col s10 offset-s1"> <p>You can use any radd.it or reddit.com URL. This includes subreddits, multireddits, search results, wikipages, or individual posts. Any partial URLs are assumed to be reddit URLs. Multireddits <b>must be public and use <a href="http://www.reddit.com/user/evilnight/m/truemusic" target="_blank" title="links to example">the full URL</a></b>, <i>not</i> the /me/ URL.</b></p> <p>You can also use any Youtube URL to add playlists, channels, or users. Playlists always load the latest version while channels and users load the uploaded vids with the most recent vids first. This is <b>not for adding single videos</b>, use the add button under the links instead. (If no links are loaded, use the "Empty playlist" option under <i>Special</i> feeds.)</p> </div> </div> </div> <div class="modal-footer"> <a class="addFeed waves-effect waves-light btn red darken-2"><i class="mdi-hardware-keyboard-arrow-left left"></i>Go back</a> <a class="step3 addfeed-direct waves-effect waves-light btn green darken-2"><i class="mdi-hardware-keyboard-arrow-right right"></i>Next step</a> </div> </div> <div class="hidden step3"> <div class="row"> <div class="col s12"> <h4>Add Feed</h4> <h5>Step 3 of 3  Pick Category</h5> </div> </div> <div class="row"> <div class="addfeed-cat col s10 offset-s1 select-field"> <label>Pick a Category</label> <select id="addfeed-cat" class="cats"><option selected disabled value="|nil">Select Category</option><?=$userCats ?><?=$stickyCats ?><option value="|addNewCat">..or add a new category.</option></select> </div> <div class="col s1"></div> <div class="addfeed-cat-new hidden col s10 offset-s1 input-field"> <input id="addfeed-cat-new" type="text"> <label for="addfeed-cat-new">New category name</label> </div> <div class="col s1"></div> <div class="col s10 offset-s1 input-field"> <input id="addfeed-label" type="text"> <label for="addfeed-label">Label</label> </div> <div class="col s1"></div> <div class="col s10 offset-s1 input-field"> <input id="addfeed-url" type="text"> <label for="addfeed-url">URL</label> </div> <div class="col s1"></div> <div class="col s10 offset-s1 input-field"> <input id="addfeed-descrip" type="text"> <label for="addfeed-descrip">Description (optional)</label> </div> <div class="col s1"></div><?php if ($username == "radd_it"): ?> <div class="col s10 offset-s1 center"> <input id="addfeed-is-default" type="checkbox"> <label for="addfeed-is-default">Make a default?</label> </div> <div class="col s1"></div><?php endif; ?> </div> <div class="modal-footer"> <a class="modal-close media waves-effect waves-light btn red darken-2"><i class="mdi-navigation-refresh left"></i>Cancel</a> <a class="save close media waves-effect waves-light btn green darken-2"><i class="mdi-navigation-refresh left"></i>Save & Close</a> <a class="addFeed feeds waves-effect waves-light btn red darken-2"><i class="mdi-av-not-interested left"></i>Cancel</a> <a class="save reload feeds waves-effect waves-light btn green darken-2"><i class="mdi-navigation-refresh left"></i>Save & Reload</a> <a class="save another feeds waves-effect waves-light btn blue darken-2"><i class="mdi-av-my-library-add left"></i>Save & Add Another</a> </div> </div> </form> </div> </div> <div id="linksAdd" class="modal"> <div class="modal-content"> <h4>Add Links</h4> <p> <div class="row"> <form class="col s12"> <div class="row"> <div class="input-field col s10"> <input id="linksAddQry" type="text"> <label for="linksAddQry">Search</label> </div> <div class="input-field col s2"> <a class="btn-floating btn-large waves-effect waves-light green linksSearch"><i class="mdi-action-search"></i></a> </div> </div> </form> </div> <div class="row results hidden" style='max-height:66%;overflow-y:auto'> <div class="col s12 header"><ul class="tabs"></ul></div> <div class="col s12 content"></div> </div> </p> </div> <div class="modal-footer"> <a class="waves-effect waves-blue btn-flat modal-action modal-close">Close</a> </div> </div> <div id="hoverCard" class="card z-depth-3 hidden"> <div class="card-image"><img src="/img/little_r.png"></div> <div class="card-content"></div> </div> <div id="naviUp" class="hidden"><a class="navi z-depth-1 btn-floating btn-large indigo darken-2"><i class="mdi-navigation-arrow-drop-up"></i></a></div> <div id="naviDown" class="hidden"> <span class="btns"> <a class="prev btn-floating tooltipped grey z-depth-light" data-position="top" data-tooltip="click twice for first link"><i class="mdi-av-skip-previous"></i></a> <a class="pause hide-on-load btn-large btn-floating tooltipped grey darken-2 z-depth-light" data-position="top" data-tooltip="pause"><i class="mdi-av-pause"></i></a> <a class="resume hide-on-load btn-large btn-floating tooltipped grey darken-2 z-depth-light" data-position="top" data-tooltip="resume"><i class="mdi-av-play-arrow"></i></a> <a class="next keep-color btn-floating tooltipped grey z-depth-light" data-position="top" data-tooltip="click twice to autoskip"><i class="mdi-av-skip-next"></i></a> </span> <a class="navi z-depth-1 btn-floating btn-large indigo darken-2"><i class="mdi-navigation-arrow-drop-down"></i></a> </div> <div id="loading" class="hidden"> <div class="preloader-wrapper big active"> <div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div> <div class="spinner-layer spinner-red"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div> <div class="spinner-layer spinner-yellow"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div> <div class="spinner-layer spinner-green"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div> </div> </div>

<script>
// materialize.js
function toast(t,e,n,i){function r(t){var e=$("<div class='toast'></div>").addClass(n).html(t);return e.hammer({prevent_default:!1}).bind("pan",function(t){var n=t.gesture.deltaX,i=80;e.hasClass("panning")||e.addClass("panning");var r=1-Math.abs(n/i);0>r&&(r=0),e.velocity({left:n,opacity:r},{duration:50,queue:!1,easing:"easeOutQuad"})}).bind("panend",function(t){var n=t.gesture.deltaX,i=80;Math.abs(n)>i?e.velocity({marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){e.remove()}}):(e.removeClass("panning"),e.velocity({left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),e}if(n=n||"",0==$("#toast-container").length){var a=$("<div></div>").attr("id","toast-container");$("body").append(a)}var a=$("#toast-container"),o=r(t);a.append(o),o.css({top:parseFloat(o.css("top"))+35+"px",opacity:0}),o.velocity({top:"0px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var s=e,l=setInterval(function(){0===o.parent().length&&window.clearInterval(l),o.hasClass("panning")||(s-=100),0>=s&&(o.velocity({opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){$(this).remove(),"function"==typeof i&&i()}}),window.clearInterval(l))},100)}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,r){return jQuery.easing[jQuery.easing.def](t,e,n,i,r)},easeInQuad:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOutQuad:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,r){return i*(e/=r)*e*e+n},easeOutCubic:function(t,e,n,i,r){return i*((e=e/r-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,r){return i*(e/=r)*e*e*e+n},easeOutQuart:function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,r){return i*(e/=r)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,r){return i*((e=e/r-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,r){return i*Math.sin(e/r*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+n},easeInExpo:function(t,e,n,i,r){return 0==e?n:i*Math.pow(2,10*(e/r-1))+n},easeOutExpo:function(t,e,n,i,r){return e==r?n+i:i*(-Math.pow(2,-10*e/r)+1)+n},easeInOutExpo:function(t,e,n,i,r){return 0==e?n:e==r?n+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+n},easeOutCirc:function(t,e,n,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+n},easeInOutCirc:function(t,e,n,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,r){var a=1.70158,o=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(o||(o=.3*r),s<Math.abs(i)){s=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/s);return-(s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o))+n},easeOutElastic:function(t,e,n,i,r){var a=1.70158,o=0,s=i;if(0==e)return n;if(1==(e/=r))return n+i;if(o||(o=.3*r),s<Math.abs(i)){s=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/o)+i+n},easeInOutElastic:function(t,e,n,i,r){var a=1.70158,o=0,s=i;if(0==e)return n;if(2==(e/=r/2))return n+i;if(o||(o=r*(.3*1.5)),s<Math.abs(i)){s=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/s);return 1>e?-.5*(s*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o))+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)*.5+i+n},easeInBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),i*(e/=r)*e*((a+1)*e-a)+n},easeOutBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),i*((e=e/r-1)*e*((a+1)*e+a)+1)+n},easeInOutBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),(e/=r/2)<1?i/2*(e*e*(((a*=1.525)+1)*e-a))+n:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+n},easeInBounce:function(t,e,n,i,r){return i-jQuery.easing.easeOutBounce(t,r-e,0,i,r)+n},easeOutBounce:function(t,e,n,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,r){return r/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,i,r)+n:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,i,r)+.5*i+n}}),!function(t){function e(t){var e=t.length,i=n.type(t);return"function"===i||n.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}if(!t.jQuery){var n=function(t,e){return new n.fn.init(t,e)};n.isWindow=function(t){return null!=t&&t==t.window},n.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?r[o.call(t)]||"object":typeof t},n.isArray=Array.isArray||function(t){return"array"===n.type(t)},n.isPlainObject=function(t){var e;if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!a.call(t,"constructor")&&!a.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}for(e in t);return void 0===e||a.call(t,e)},n.each=function(t,n,i){var r,a=0,o=t.length,s=e(t);if(i){if(s)for(;o>a&&(r=n.apply(t[a],i),r!==!1);a++);else for(a in t)if(r=n.apply(t[a],i),r===!1)break}else if(s)for(;o>a&&(r=n.call(t[a],a,t[a]),r!==!1);a++);else for(a in t)if(r=n.call(t[a],a,t[a]),r===!1)break;return t},n.data=function(t,e,r){if(void 0===r){var a=t[n.expando],o=a&&i[a];if(void 0===e)return o;if(o&&e in o)return o[e]}else if(void 0!==e){var a=t[n.expando]||(t[n.expando]=++n.uuid);return i[a]=i[a]||{},i[a][e]=r,r}},n.removeData=function(t,e){var r=t[n.expando],a=r&&i[r];a&&n.each(e,function(t,e){delete a[e]})},n.extend=function(){var t,e,i,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(a=arguments[l]))for(r in a)t=s[r],i=a[r],s!==i&&(c&&i&&(n.isPlainObject(i)||(e=n.isArray(i)))?(e?(e=!1,o=t&&n.isArray(t)?t:[]):o=t&&n.isPlainObject(t)?t:{},s[r]=n.extend(c,o,i)):void 0!==i&&(s[r]=i));return s},n.queue=function(t,i,r){function a(t,n){var i=n||[];return null!=t&&(e(Object(t))?!function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t}(i,"string"==typeof t?[t]:t):[].push.call(i,t)),i}if(t){i=(i||"fx")+"queue";var o=n.data(t,i);return r?(!o||n.isArray(r)?o=n.data(t,i,a(r)):o.push(r),o):o||[]}},n.dequeue=function(t,e){n.each(t.nodeType?[t]:t,function(t,i){e=e||"fx";var r=n.queue(i,e),a=r.shift();"inprogress"===a&&(a=r.shift()),a&&("fx"===e&&r.unshift("inprogress"),a.call(i,function(){n.dequeue(i,e)}))})},n.fn=n.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],t=t.apply(e),i=this.offset(),r=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return i.top-=parseFloat(e.style.marginTop)||0,i.left-=parseFloat(e.style.marginLeft)||0,t.style&&(r.top+=parseFloat(t.style.borderTopWidth)||0,r.left+=parseFloat(t.style.borderLeftWidth)||0),{top:i.top-r.top,left:i.left-r.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var r={},a=r.hasOwnProperty,o=r.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)r["[object "+s[l]+"]"]=s[l].toLowerCase();n.fn.init.prototype=n.fn,t.Velocity={Utilities:n}}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):t()}(function(){return function(t,e,n,i){function r(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var r=t[e];r&&i.push(r)}return i}function a(t){return g.isWrapped(t)?t=[].slice.call(t):g.isNode(t)&&(t=[t]),t}function o(t){var e=p.data(t,"velocity");return null===e?i:e}function s(t){return function(e){return Math.round(e*t)*(1/t)}}function l(t,n,i,r){function a(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function s(t){return 3*t}function l(t,e,n){return((a(e,n)*t+o(e,n))*t+s(e))*t}function u(t,e,n){return 3*a(e,n)*t*t+2*o(e,n)*t+s(e)}function c(e,n){for(var r=0;g>r;++r){var a=u(n,t,i);if(0===a)return n;var o=l(n,t,i)-e;n-=o/a}return n}function d(){for(var e=0;b>e;++e)S[e]=l(e*w,t,i)}function p(e,n,r){var a,o,s=0;do o=n+(r-n)/2,a=l(o,t,i)-e,a>0?r=o:n=o;while(Math.abs(a)>m&&++s<y);return o}function f(e){for(var n=0,r=1,a=b-1;r!=a&&S[r]<=e;++r)n+=w;--r;var o=(e-S[r])/(S[r+1]-S[r]),s=n+o*w,l=u(s,t,i);return l>=v?c(e,s):0==l?s:p(e,n,n+w)}function h(){C=!0,(t!=n||i!=r)&&d()}var g=4,v=.001,m=1e-7,y=10,b=11,w=1/(b-1),x="Float32Array"in e;if(4!==arguments.length)return!1;for(var k=0;4>k;++k)if("number"!=typeof arguments[k]||isNaN(arguments[k])||!isFinite(arguments[k]))return!1;t=Math.min(t,1),i=Math.min(i,1),t=Math.max(t,0),i=Math.max(i,0);var S=x?new Float32Array(b):new Array(b),C=!1,T=function(e){return C||h(),t===n&&i===r?e:0===e?0:1===e?1:l(f(e),n,r)};T.getControlPoints=function(){return[{x:t,y:n},{x:i,y:r}]};var P="generateBezier("+[t,n,i,r]+")";return T.toString=function(){return P},T}function u(t,e){var n=t;return g.isString(t)?b.Easings[t]||(n=!1):n=g.isArray(t)&&1===t.length?s.apply(null,t):g.isArray(t)&&2===t.length?w.apply(null,t.concat([e])):g.isArray(t)&&4===t.length?l.apply(null,t):!1,n===!1&&(n=b.Easings[b.defaults.easing]?b.defaults.easing:y),n}function c(t){if(t)for(var e=(new Date).getTime(),n=0,r=b.State.calls.length;r>n;n++)if(b.State.calls[n]){var a=b.State.calls[n],s=a[0],l=a[2],u=a[3],f=!!u;u||(u=b.State.calls[n][3]=e-16);for(var h=Math.min((e-u)/l.duration,1),v=0,m=s.length;m>v;v++){var y=s[v],w=y.element;if(o(w)){var k=!1;if(l.display!==i&&null!==l.display&&"none"!==l.display){if("flex"===l.display){var C=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];p.each(C,function(t,e){x.setPropertyValue(w,"display",e)})}x.setPropertyValue(w,"display",l.display)}l.visibility!==i&&"hidden"!==l.visibility&&x.setPropertyValue(w,"visibility",l.visibility);for(var T in y)if("element"!==T){var P,O=y[T],E=g.isString(O.easing)?b.Easings[O.easing]:O.easing;if(1===h)P=O.endValue;else if(P=O.startValue+(O.endValue-O.startValue)*E(h),!f&&P===O.currentValue)continue;if(O.currentValue=P,x.Hooks.registered[T]){var A=x.Hooks.getRoot(T),q=o(w).rootPropertyValueCache[A];q&&(O.rootPropertyValue=q)}var _=x.setPropertyValue(w,T,O.currentValue+(0===parseFloat(P)?"":O.unitType),O.rootPropertyValue,O.scrollData);x.Hooks.registered[T]&&(o(w).rootPropertyValueCache[A]=x.Normalizations.registered[A]?x.Normalizations.registered[A]("extract",null,_[1]):_[1]),"transform"===_[0]&&(k=!0)}l.mobileHA&&o(w).transformCache.translate3d===i&&(o(w).transformCache.translate3d="(0px, 0px, 0px)",k=!0),k&&x.flushTransformCache(w)}}l.display!==i&&"none"!==l.display&&(b.State.calls[n][2].display=!1),l.visibility!==i&&"hidden"!==l.visibility&&(b.State.calls[n][2].visibility=!1),l.progress&&l.progress.call(a[1],a[1],h,Math.max(0,u+l.duration-e),u),1===h&&d(n)}b.State.isTicking&&S(c)}function d(t,e){if(!b.State.calls[t])return!1;for(var n=b.State.calls[t][0],r=b.State.calls[t][1],a=b.State.calls[t][2],s=b.State.calls[t][4],l=!1,u=0,c=n.length;c>u;u++){var d=n[u].element;if(e||a.loop||("none"===a.display&&x.setPropertyValue(d,"display",a.display),"hidden"===a.visibility&&x.setPropertyValue(d,"visibility",a.visibility)),a.loop!==!0&&(p.queue(d)[1]===i||!/\.velocityQueueEntryFlag/i.test(p.queue(d)[1]))&&o(d)){o(d).isAnimating=!1,o(d).rootPropertyValueCache={};var f=!1;p.each(x.Lists.transforms3D,function(t,e){var n=/^scale/.test(e)?1:0,r=o(d).transformCache[e];o(d).transformCache[e]!==i&&new RegExp("^\\("+n+"[^.]").test(r)&&(f=!0,delete o(d).transformCache[e])}),a.mobileHA&&(f=!0,delete o(d).transformCache.translate3d),f&&x.flushTransformCache(d),x.Values.removeClass(d,"velocity-animating")}if(!e&&a.complete&&!a.loop&&u===c-1)try{a.complete.call(r,r)}catch(h){setTimeout(function(){throw h},1)}s&&a.loop!==!0&&s(r),a.loop!==!0||e||(p.each(o(d).tweensContainer,function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360)}),b(d,"reverse",{loop:!0,delay:a.delay})),a.queue!==!1&&p.dequeue(d,a.queue)}b.State.calls[t]=!1;for(var g=0,v=b.State.calls.length;v>g;g++)if(b.State.calls[g]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var p,f=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="<!--[if IE "+t+"]><span></span><![endif]-->",e.getElementsByTagName("span").length)return e=null,t}return i}(),h=function(){var t=0;return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-t)),t=i+n,setTimeout(function(){e(i+n)},n)}}(),g={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==i&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},v=!1;if(t.fn&&t.fn.jquery?(p=t,v=!0):p=e.Velocity.Utilities,8>=f&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=f)return void(jQuery.fn.velocity=jQuery.fn.animate);var m=400,y="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:p,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:m,easing:y,begin:i,complete:i,progress:i,display:i,visibility:i,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){p.data(t,"velocity",{isSVG:g.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};e.pageYOffset!==i?(b.State.scrollAnchor=e,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var w=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,i){var r={x:e.x+i.dx*n,v:e.v+i.dv*n,tension:e.tension,friction:e.friction};return{dx:r.v,dv:t(r)}}function n(n,i){var r={dx:n.v,dv:t(n)},a=e(n,.5*i,r),o=e(n,.5*i,a),s=e(n,i,o),l=1/6*(r.dx+2*(a.dx+o.dx)+s.dx),u=1/6*(r.dv+2*(a.dv+o.dv)+s.dv);return n.x=n.x+l*i,n.v=n.v+u*i,n}return function i(t,e,r){var a,o,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,d=1e-4,p=.016;for(t=parseFloat(t)||500,e=parseFloat(e)||20,r=r||null,l.tension=t,l.friction=e,a=null!==r,a?(c=i(t,e),o=c/r*p):o=p;s=n(s||l,o),u.push(1+s.x),c+=16,Math.abs(s.x)>d&&Math.abs(s.v)>d;);return a?function(t){return u[t*(u.length-1)|0]}:c}}();b.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},p.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){b.Easings[e[0]]=l.apply(null,e[1])});var x=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<x.Lists.colors.length;t++){var e="color"===x.Lists.colors[t]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,i,r;if(f)for(n in x.Hooks.templates){i=x.Hooks.templates[n],r=i[0].split(" ");var a=i[1].match(x.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),a.push(a.shift()),x.Hooks.templates[n]=[r.join(" "),a.join(" ")])}for(n in x.Hooks.templates){i=x.Hooks.templates[n],r=i[0].split(" ");for(var t in r){var o=n+r[t],s=t;x.Hooks.registered[o]=[n,s]}}},getRoot:function(t){var e=x.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return x.RegEx.valueUnwrap.test(e)&&(e=e.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(e)&&(e=x.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=x.Hooks.registered[t];if(n){var i=n[0],r=n[1];return e=x.Hooks.cleanRootPropertyValue(i,e),e.toString().match(x.RegEx.valueSplit)[r]}return e},injectValue:function(t,e,n){var i=x.Hooks.registered[t];if(i){var r,a,o=i[0],s=i[1];return n=x.Hooks.cleanRootPropertyValue(o,n),r=n.toString().match(x.RegEx.valueSplit),r[s]=e,a=r.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var i;return x.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(x.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var r=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(8>=f)switch(t){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){9>=f||b.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var t=0;t<x.Lists.transformsBase.length;t++)!function(){var e=x.Lists.transformsBase[t];x.Normalizations.registered[e]=function(t,n,r){switch(t){case"name":return"transform";case"extract":return o(n)===i||o(n).transformCache[e]===i?/^scale/i.test(e)?1:0:o(n).transformCache[e].replace(/[()]/g,"");case"inject":var a=!1;switch(e.substr(0,e.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":b.State.isAndroid&&o(n).transformCache[e]===i&&1>r&&(r=1),a=!/(\d)$/i.test(r);break;case"skew":a=!/(deg|\d)$/i.test(r);break;case"rotate":a=!/(deg|\d)$/i.test(r)}return a||(o(n).transformCache[e]="("+r+")"),o(n).transformCache[e]}}}();for(var t=0;t<x.Lists.colors.length;t++)!function(){var e=x.Lists.colors[t];x.Normalizations.registered[e]=function(t,n,r){switch(t){case"name":return e;case"extract":var a;if(x.RegEx.wrappedValueAlreadyExtracted.test(r))a=r;else{var o,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?o=s[r]!==i?s[r]:s.black:x.RegEx.isHex.test(r)?o="rgb("+x.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(o=s.black),a=(o||r).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==a.split(" ").length||(a+=" 1"),a;case"inject":return 8>=f?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(8>=f?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||b.State.isAndroid&&!b.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(b.State.prefixMatches[t])return[b.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,i=e.length;i>n;n++){var r;if(r=0===n?t:e[n]+t.replace(/^\w/,function(t){return t.toUpperCase()}),g.isString(b.State.prefixElement.style[r]))return b.State.prefixMatches[t]=r,[r,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return t=t.replace(n,function(t,e,n,i){return e+e+n+n+i+i}),e=i.exec(t),e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,r,a){function s(t,n){function r(){u&&x.setPropertyValue(t,"display","none")}var l=0;if(8>=f)l=p.css(t,n);else{var u=!1;if(/^(width|height)$/.test(n)&&0===x.getPropertyValue(t,"display")&&(u=!0,x.setPropertyValue(t,"display",x.Values.getDisplayType(t))),!a){if("height"===n&&"border-box"!==x.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var c=t.offsetHeight-(parseFloat(x.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(t,"paddingBottom"))||0);return r(),c}if("width"===n&&"border-box"!==x.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var d=t.offsetWidth-(parseFloat(x.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(t,"paddingRight"))||0);return r(),d}}var h;h=o(t)===i?e.getComputedStyle(t,null):o(t).computedStyle?o(t).computedStyle:o(t).computedStyle=e.getComputedStyle(t,null),(f||b.State.isFirefox)&&"borderColor"===n&&(n="borderTopColor"),l=9===f&&"filter"===n?h.getPropertyValue(n):h[n],(""===l||null===l)&&(l=t.style[n]),r()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var g=s(t,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(l=p(t).position()[n]+"px")}return l}var l;if(x.Hooks.registered[n]){var u=n,c=x.Hooks.getRoot(u);r===i&&(r=x.getPropertyValue(t,x.Names.prefixCheck(c)[0])),x.Normalizations.registered[c]&&(r=x.Normalizations.registered[c]("extract",t,r)),l=x.Hooks.extractValue(u,r)}else if(x.Normalizations.registered[n]){var d,h;d=x.Normalizations.registered[n]("name",t),"transform"!==d&&(h=s(t,x.Names.prefixCheck(d)[0]),x.Values.isCSSNullValue(h)&&x.Hooks.templates[n]&&(h=x.Hooks.templates[n][1])),l=x.Normalizations.registered[n]("extract",t,h)}return/^[\d-]/.test(l)||(l=o(t)&&o(t).isSVG&&x.Names.SVGAttribute(n)?/^(height|width)$/i.test(n)?t.getBBox()[n]:t.getAttribute(n):s(t,x.Names.prefixCheck(n)[0])),x.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(t,n,i,r,a){var s=n;if("scroll"===n)a.container?a.container["scroll"+a.direction]=i:"Left"===a.direction?e.scrollTo(i,a.alternateValue):e.scrollTo(a.alternateValue,i);else if(x.Normalizations.registered[n]&&"transform"===x.Normalizations.registered[n]("name",t))x.Normalizations.registered[n]("inject",t,i),s="transform",i=o(t).transformCache[n];else{if(x.Hooks.registered[n]){var l=n,u=x.Hooks.getRoot(n);r=r||x.getPropertyValue(t,u),i=x.Hooks.injectValue(l,i,r),n=u}if(x.Normalizations.registered[n]&&(i=x.Normalizations.registered[n]("inject",t,i),n=x.Normalizations.registered[n]("name",t)),s=x.Names.prefixCheck(n)[0],8>=f)try{t.style[s]=i}catch(c){b.debug&&console.log("Browser does not support ["+i+"] for ["+s+"]")}else o(t)&&o(t).isSVG&&x.Names.SVGAttribute(n)?t.setAttribute(n,i):t.style[s]=i;b.debug>=2&&console.log("Set "+n+" ("+s+"): "+i)}return[s,i]},flushTransformCache:function(t){function e(e){return parseFloat(x.getPropertyValue(t,e))}var n="";if((f||b.State.isAndroid&&!b.State.isChrome)&&o(t).isSVG){var i={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};p.each(o(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),i[t]&&(n+=t+"("+i[t].join(" ")+") ",delete i[t])})}else{var r,a;p.each(o(t).transformCache,function(e){return r=o(t).transformCache[e],"transformPerspective"===e?(a=r,!0):(9===f&&"rotateZ"===e&&(e="rotate"),void(n+=e+r+" "))}),a&&(n="perspective"+a+" "+n)}x.setPropertyValue(t,"transform",n)}};x.Hooks.register(),x.Normalizations.register(),b.hook=function(t,e,n){var r=i;return t=a(t),p.each(t,function(t,a){if(o(a)===i&&b.init(a),n===i)r===i&&(r=b.CSS.getPropertyValue(a,e));else{var s=b.CSS.setPropertyValue(a,e,n);"transform"===s[0]&&b.CSS.flushTransformCache(a),r=s}}),r};var k=function(){function t(){return l?E.promise||null:f}function s(){function t(t){function f(t,e){var n=i,r=i,a=i;return g.isArray(t)?(n=t[0],!g.isArray(t[1])&&/^[\d-]/.test(t[1])||g.isFunction(t[1])||x.RegEx.isHex.test(t[1])?a=t[1]:(g.isString(t[1])&&!x.RegEx.isHex.test(t[1])||g.isArray(t[1]))&&(r=e?t[1]:u(t[1],l.duration),t[2]!==i&&(a=t[2]))):n=t,e||(r=r||l.easing),g.isFunction(n)&&(n=n.call(s,T,C)),g.isFunction(a)&&(a=a.call(s,T,C)),[n||0,r,a]}function h(t,e){var n,i;return i=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return n=t,""}),n||(n=x.Values.getUnitType(t)),[i,n]}function m(){var t={myParent:s.parentNode||n.body,position:x.getPropertyValue(s,"position"),fontSize:x.getPropertyValue(s,"fontSize")},i=t.position===j.lastPosition&&t.myParent===j.lastParent,r=t.fontSize===j.lastFontSize;j.lastParent=t.myParent,j.lastPosition=t.position,j.lastFontSize=t.fontSize;var a=100,l={};if(r&&i)l.emToPx=j.lastEmToPx,l.percentToPxWidth=j.lastPercentToPxWidth,l.percentToPxHeight=j.lastPercentToPxHeight;else{var u=o(s).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");b.init(u),t.myParent.appendChild(u),p.each(["overflow","overflowX","overflowY"],function(t,e){b.CSS.setPropertyValue(u,e,"hidden")}),b.CSS.setPropertyValue(u,"position",t.position),b.CSS.setPropertyValue(u,"fontSize",t.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),p.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){b.CSS.setPropertyValue(u,e,a+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",a+"em"),l.percentToPxWidth=j.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(u,"width",null,!0))||1)/a,l.percentToPxHeight=j.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(u,"height",null,!0))||1)/a,l.emToPx=j.lastEmToPx=(parseFloat(x.getPropertyValue(u,"paddingLeft"))||1)/a,t.myParent.removeChild(u)}return null===j.remToPx&&(j.remToPx=parseFloat(x.getPropertyValue(n.body,"fontSize"))||16),null===j.vwToPx&&(j.vwToPx=parseFloat(e.innerWidth)/100,j.vhToPx=parseFloat(e.innerHeight)/100),l.remToPx=j.remToPx,l.vwToPx=j.vwToPx,l.vhToPx=j.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),s),l}if(l.begin&&0===T)try{l.begin.call(v,v)}catch(k){setTimeout(function(){throw k},1)}if("scroll"===A){var S,P,O,q=/^x$/i.test(l.axis)?"Left":"Top",_=parseFloat(l.offset)||0;l.container?g.isWrapped(l.container)||g.isNode(l.container)?(l.container=l.container[0]||l.container,S=l.container["scroll"+q],O=S+p(s).position()[q.toLowerCase()]+_):l.container=null:(S=b.State.scrollAnchor[b.State["scrollProperty"+q]],P=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===q?"Top":"Left")]],O=p(s).offset()[q.toLowerCase()]+_),d={scroll:{rootPropertyValue:!1,startValue:S,currentValue:S,endValue:O,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:q,alternateValue:P}},element:s},b.debug&&console.log("tweensContainer (scroll): ",d.scroll,s)}else if("reverse"===A){if(!o(s).tweensContainer)return void p.dequeue(s,l.queue);"none"===o(s).opts.display&&(o(s).opts.display="auto"),"hidden"===o(s).opts.visibility&&(o(s).opts.visibility="visible"),o(s).opts.loop=!1,o(s).opts.begin=null,o(s).opts.complete=null,w.easing||delete l.easing,w.duration||delete l.duration,l=p.extend({},o(s).opts,l);var I=p.extend(!0,{},o(s).tweensContainer);for(var M in I)if("element"!==M){var V=I[M].startValue;I[M].startValue=I[M].currentValue=I[M].endValue,I[M].endValue=V,g.isEmptyObject(w)||(I[M].easing=l.easing),b.debug&&console.log("reverse tweensContainer ("+M+"): "+JSON.stringify(I[M]),s)}d=I}else if("start"===A){var I;o(s).tweensContainer&&o(s).isAnimating===!0&&(I=o(s).tweensContainer),p.each(y,function(t,e){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(t)){var n=f(e,!0),r=n[0],a=n[1],o=n[2];if(x.RegEx.isHex.test(r)){for(var s=["Red","Green","Blue"],l=x.Values.hexToRgb(r),u=o?x.Values.hexToRgb(o):i,c=0;c<s.length;c++){var d=[l[c]];a&&d.push(a),u!==i&&d.push(u[c]),y[t+s[c]]=d}delete y[t]}}});for(var $ in y){var N=f(y[$]),F=N[0],Q=N[1],z=N[2];$=x.Names.camelCase($);var L=x.Hooks.getRoot($),R=!1;if(o(s).isSVG||x.Names.prefixCheck(L)[1]!==!1||x.Normalizations.registered[L]!==i){(l.display!==i&&null!==l.display&&"none"!==l.display||l.visibility!==i&&"hidden"!==l.visibility)&&/opacity|filter/.test($)&&!z&&0!==F&&(z=0),l._cacheValues&&I&&I[$]?(z===i&&(z=I[$].endValue+I[$].unitType),R=o(s).rootPropertyValueCache[L]):x.Hooks.registered[$]?z===i?(R=x.getPropertyValue(s,L),z=x.getPropertyValue(s,$,R)):R=x.Hooks.templates[L][1]:z===i&&(z=x.getPropertyValue(s,$));var H,W,X,Y=!1;if(H=h($,z),z=H[0],X=H[1],H=h($,F),F=H[0].replace(/^([+-\/*])=/,function(t,e){return Y=e,""}),W=H[1],z=parseFloat(z)||0,F=parseFloat(F)||0,"%"===W&&(/^(fontSize|lineHeight)$/.test($)?(F/=100,W="em"):/^scale/.test($)?(F/=100,W=""):/(Red|Green|Blue)$/i.test($)&&(F=F/100*255,W="")),/[\/*]/.test(Y))W=X;else if(X!==W&&0!==z)if(0===F)W=X;else{a=a||m();var B=/margin|padding|left|right|width|text|word|letter/i.test($)||/X$/.test($)||"x"===$?"x":"y";switch(X){case"%":z*="x"===B?a.percentToPxWidth:a.percentToPxHeight;break;case"px":break;default:z*=a[X+"ToPx"]}switch(W){case"%":z*=1/("x"===B?a.percentToPxWidth:a.percentToPxHeight);break;case"px":break;default:z*=1/a[W+"ToPx"]}}switch(Y){case"+":F=z+F;break;case"-":F=z-F;break;case"*":F=z*F;break;case"/":F=z/F}d[$]={rootPropertyValue:R,startValue:z,currentValue:z,endValue:F,unitType:W,easing:Q},b.debug&&console.log("tweensContainer ("+$+"): "+JSON.stringify(d[$]),s)}else b.debug&&console.log("Skipping ["+L+"] due to a lack of browser support.")}d.element=s}d.element&&(x.Values.addClass(s,"velocity-animating"),D.push(d),""===l.queue&&(o(s).tweensContainer=d,o(s).opts=l),o(s).isAnimating=!0,T===C-1?(b.State.calls.length>1e4&&(b.State.calls=r(b.State.calls)),b.State.calls.push([D,v,l,null,E.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):T++)}var a,s=this,l=p.extend({},b.defaults,w),d={};switch(o(s)===i&&b.init(s),parseFloat(l.delay)&&l.queue!==!1&&p.queue(s,l.queue,function(t){b.velocityQueueEntryFlag=!0,o(s).delayTimer={setTimeout:setTimeout(t,parseFloat(l.delay)),next:t}}),l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=m;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}b.mock!==!1&&(b.mock===!0?l.duration=l.delay=1:(l.duration*=parseFloat(b.mock)||1,l.delay*=parseFloat(b.mock)||1)),l.easing=u(l.easing,l.duration),l.begin&&!g.isFunction(l.begin)&&(l.begin=null),l.progress&&!g.isFunction(l.progress)&&(l.progress=null),l.complete&&!g.isFunction(l.complete)&&(l.complete=null),l.display!==i&&null!==l.display&&(l.display=l.display.toString().toLowerCase(),"auto"===l.display&&(l.display=b.CSS.Values.getDisplayType(s))),l.visibility!==i&&null!==l.visibility&&(l.visibility=l.visibility.toString().toLowerCase()),l.mobileHA=l.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,l.queue===!1?l.delay?setTimeout(t,l.delay):t():p.queue(s,l.queue,function(e,n){return n===!0?(E.promise&&E.resolver(v),!0):(b.velocityQueueEntryFlag=!0,void t(e))}),""!==l.queue&&"fx"!==l.queue||"inprogress"===p.queue(s)[0]||p.dequeue(s)}var l,f,h,v,y,w,S=arguments[0]&&(p.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(l=!1,h=0,v=this,f=this):(l=!0,h=1,v=S?arguments[0].elements:arguments[0]),v=a(v)){S?(y=arguments[0].properties,w=arguments[0].options):(y=arguments[h],w=arguments[h+1]);var C=v.length,T=0;if("stop"!==y&&!p.isPlainObject(w)){var P=h+1;w={};for(var O=P;O<arguments.length;O++)g.isArray(arguments[O])||!/^(fast|normal|slow)$/i.test(arguments[O])&&!/^\d/.test(arguments[O])?g.isString(arguments[O])||g.isArray(arguments[O])?w.easing=arguments[O]:g.isFunction(arguments[O])&&(w.complete=arguments[O]):w.duration=arguments[O]}var E={promise:null,resolver:null,rejecter:null};l&&b.Promise&&(E.promise=new b.Promise(function(t,e){E.resolver=t,E.rejecter=e}));var A;switch(y){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"stop":p.each(v,function(t,e){o(e)&&o(e).delayTimer&&(clearTimeout(o(e).delayTimer.setTimeout),o(e).delayTimer.next&&o(e).delayTimer.next(),delete o(e).delayTimer)});var q=[];return p.each(b.State.calls,function(t,e){e&&p.each(e[1],function(n,r){var a=g.isString(w)?w:"";return w!==i&&e[2].queue!==a?!0:void p.each(v,function(e,n){n===r&&(w!==i&&(p.each(p.queue(n,a),function(t,e){g.isFunction(e)&&e(null,!0)}),p.queue(n,a,[])),o(n)&&""===a&&p.each(o(n).tweensContainer,function(t,e){e.endValue=e.currentValue}),q.push(t))})})}),p.each(q,function(t,e){d(e,!0)}),E.promise&&E.resolver(v),t();default:if(!p.isPlainObject(y)||g.isEmptyObject(y)){if(g.isString(y)&&b.Redirects[y]){var _=p.extend({},w),I=_.duration,M=_.delay||0;return _.backwards===!0&&(v=p.extend(!0,[],v).reverse()),p.each(v,function(t,e){parseFloat(_.stagger)?_.delay=M+parseFloat(_.stagger)*t:g.isFunction(_.stagger)&&(_.delay=M+_.stagger.call(e,t,C)),_.drag&&(_.duration=parseFloat(I)||(/^(callout|transition)/.test(y)?1e3:m),_.duration=Math.max(_.duration*(_.backwards?1-t/C:(t+1)/C),.75*_.duration,200)),b.Redirects[y].call(e,e,_||{},t,C,v,E.promise?E:i)}),t()}var V="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return E.promise?E.rejecter(new Error(V)):console.log(V),t()}A="start"}var j={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},D=[];p.each(v,function(t,e){g.isNode(e)&&s.call(e)});var $,_=p.extend({},b.defaults,w);if(_.loop=parseInt(_.loop),$=2*_.loop-1,_.loop)for(var N=0;$>N;N++){var F={delay:_.delay,progress:_.progress};N===$-1&&(F.display=_.display,F.visibility=_.visibility,F.complete=_.complete),k(v,"reverse",F)}return t()}};b=p.extend(k,b),b.animate=k;var S=e.requestAnimationFrame||h;return b.State.isMobile||n.hidden===i||n.addEventListener("visibilitychange",function(){n.hidden?(S=function(t){return setTimeout(function(){t(!0)},16)},c()):S=e.requestAnimationFrame||h}),t.Velocity=b,t!==e&&(t.fn.velocity=k,t.fn.velocity.defaults=b.defaults),p.each(["Down","Up"],function(t,e){b.Redirects["slide"+e]=function(t,n,r,a,o,s){var l=p.extend({},n),u=l.begin,c=l.complete,d={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},f={};l.display===i&&(l.display="Down"===e?"inline"===b.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(o,o);for(var n in d){f[n]=t.style[n];var i=b.CSS.getPropertyValue(t,n);d[n]="Down"===e?[i,0]:[0,i]}f.overflow=t.style.overflow,t.style.overflow="hidden"},l.complete=function(){for(var e in f)t.style[e]=f[e];c&&c.call(o,o),s&&s.resolver(o)},b(t,d,l)}}),p.each(["In","Out"],function(t,e){b.Redirects["fade"+e]=function(t,n,r,a,o,s){var l=p.extend({},n),u={opacity:"In"===e?1:0},c=l.complete;l.complete=r!==a-1?l.begin=null:function(){c&&c.call(o,o),s&&s.resolver(o)},l.display===i&&(l.display="In"===e?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}),!function(t,e,n,i){"use strict";function r(t,e,n){return setTimeout(c(t,n),e)}function a(t,e,n){return Array.isArray(t)?(o(t,n[e],n),!0):!1}function o(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function s(t,e,n){for(var r=Object.keys(e),a=0;a<r.length;)(!n||n&&t[r[a]]===i)&&(t[r[a]]=e[r[a]]),a++;return t}function l(t,e){return s(t,e,!0)}function u(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&s(i,n)}function c(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==ct?t.apply(e?e[0]||i:i,e):t}function p(t,e){return t===i?e:t}function f(t,e,n){o(m(e),function(e){t.addEventListener(e,n,!1)})}function h(t,e,n){o(m(e),function(e){t.removeEventListener(e,n,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function y(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,n){for(var i=[],r=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];y(r,o)<0&&i.push(t[a]),r[a]=o,a++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function x(t,e){for(var n,r,a=e[0].toUpperCase()+e.slice(1),o=0;o<lt.length;){if(n=lt[o],r=n?n+a:e,r in t)return r;o++}return i}function k(){return ht++}function S(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t){var e,n=t.options.inputClass;return new(e=n?n:mt?F:yt?L:vt?H:N)(t,P)}function P(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,a=e&Ct&&0===i-r,o=e&(Pt|Ot)&&0===i-r;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,O(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function O(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=q(e)),r>1&&!n.firstMultiple?n.firstMultiple=q(e):1===r&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,l=e.center=_(i);e.timeStamp=ft(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=j(s,l),e.distance=V(s,l),E(n,e),e.offsetDirection=M(e.deltaX,e.deltaY),e.scale=o?$(o.pointers,i):1,e.rotation=o?D(o.pointers,i):0,A(n,e);var u=t.element;g(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function E(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};(e.eventType===Ct||a.eventType===Pt)&&(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function A(t,e){var n,r,a,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=Ot&&(l>St||s.velocity===i)){var u=s.deltaX-e.deltaX,c=s.deltaY-e.deltaY,d=I(l,u,c);r=d.x,a=d.y,n=pt(d.x)>pt(d.y)?d.x:d.y,o=M(u,c),t.lastInterval=e}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=a,e.direction=o}function q(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:dt(t.pointers[n].clientX),clientY:dt(t.pointers[n].clientY)},n++;return{timeStamp:ft(),pointers:e,center:_(e),deltaX:t.deltaX,deltaY:t.deltaY}}function _(t){var e=t.length;if(1===e)return{x:dt(t[0].clientX),y:dt(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:dt(n/e),y:dt(i/e)}}function I(t,e,n){return{x:e/t||0,y:n/t||0}}function M(t,e){return t===e?Et:pt(t)>=pt(e)?t>0?At:qt:e>0?_t:It}function V(t,e,n){n||(n=Dt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function j(t,e,n){n||(n=Dt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function D(t,e){return j(e[1],e[0],$t)-j(t[1],t[0],$t)}function $(t,e){return V(e[0],e[1],$t)/V(t[0],t[1],$t)}function N(){this.evEl=Ft,this.evWin=Qt,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function F(){this.evEl=Rt,this.evWin=Ht,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Q(){this.evTarget=Xt,this.evWin=Yt,this.started=!1,C.apply(this,arguments)}function z(t,e){var n=b(t.touches),i=b(t.changedTouches);return e&(Pt|Ot)&&(n=w(n.concat(i),"identifier",!0)),[n,i]}function L(){this.evTarget=Gt,this.targetIds={},C.apply(this,arguments)}function R(t,e){var n=b(t.touches),i=this.targetIds;if(e&(Ct|Tt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,o=b(t.changedTouches),s=[],l=this.target;if(a=n.filter(function(t){return g(t.target,l)}),e===Ct)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&s.push(o[r]),e&(Pt|Ot)&&delete i[o[r].identifier],r++;return s.length?[w(a.concat(s),"identifier",!0),s]:void 0}function H(){C.apply(this,arguments);var t=c(this.handler,this);this.touch=new L(this.manager,t),this.mouse=new N(this.manager,t)}function W(t,e){this.manager=t,this.set(e)}function X(t){if(v(t,ee))return ee;var e=v(t,ne),n=v(t,ie);return e&&n?ne+" "+ie:e||n?e?ne:ie:v(t,te)?te:Kt}function Y(t){this.id=k(),this.manager=null,this.options=l(t||{},this.defaults),this.options.enable=p(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function B(t){return t&ue?"cancel":t&se?"end":t&oe?"move":t&ae?"start":""}function G(t){return t==It?"down":t==_t?"up":t==At?"left":t==qt?"right":""}function U(t,e){var n=e.manager;return n?n.get(t):t}function Z(){Y.apply(this,arguments)}function J(){Z.apply(this,arguments),this.pX=null,this.pY=null}function K(){Z.apply(this,arguments)}function tt(){Y.apply(this,arguments),this._timer=null,this._input=null}function et(){Z.apply(this,arguments)}function nt(){Z.apply(this,arguments)}function it(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(t,e){return e=e||{},e.recognizers=p(e.recognizers,rt.defaults.preset),new at(t,e)}function at(t,e){e=e||{},this.options=l(e,rt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=T(this),this.touchAction=new W(this,this.options.touchAction),ot(this,!0),o(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ot(t,e){var n=t.element;o(t.options.cssProps,function(t,i){n.style[x(n.style,i)]=e?t:""})}function st(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var lt=["","webkit","moz","MS","ms","o"],ut=e.createElement("div"),ct="function",dt=Math.round,pt=Math.abs,ft=Date.now,ht=1,gt=/mobile|tablet|ip(ad|hone|od)|android/i,vt="ontouchstart"in t,mt=x(t,"PointerEvent")!==i,yt=vt&&gt.test(navigator.userAgent),bt="touch",wt="pen",xt="mouse",kt="kinect",St=25,Ct=1,Tt=2,Pt=4,Ot=8,Et=1,At=2,qt=4,_t=8,It=16,Mt=At|qt,Vt=_t|It,jt=Mt|Vt,Dt=["x","y"],$t=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(S(this.element),this.evWin,this.domHandler)}};var Nt={mousedown:Ct,mousemove:Tt,mouseup:Pt},Ft="mousedown",Qt="mousemove mouseup";u(N,C,{handler:function(t){var e=Nt[t.type];e&Ct&&0===t.button&&(this.pressed=!0),e&Tt&&1!==t.which&&(e=Pt),this.pressed&&this.allow&&(e&Pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xt,srcEvent:t}))}});var zt={pointerdown:Ct,pointermove:Tt,pointerup:Pt,pointercancel:Ot,pointerout:Ot},Lt={2:bt,3:wt,4:xt,5:kt},Rt="pointerdown",Ht="pointermove pointerup pointercancel";t.MSPointerEvent&&(Rt="MSPointerDown",Ht="MSPointerMove MSPointerUp MSPointerCancel"),u(F,C,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=zt[i],a=Lt[t.pointerType]||t.pointerType,o=a==bt,s=y(e,t.pointerId,"pointerId");r&Ct&&(0===t.button||o)?0>s&&(e.push(t),s=e.length-1):r&(Pt|Ot)&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(s,1))}});var Wt={touchstart:Ct,touchmove:Tt,touchend:Pt,touchcancel:Ot},Xt="touchstart",Yt="touchstart touchmove touchend touchcancel";u(Q,C,{handler:function(t){var e=Wt[t.type];if(e===Ct&&(this.started=!0),this.started){var n=z.call(this,t,e);e&(Pt|Ot)&&0===n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:t})}}});var Bt={touchstart:Ct,touchmove:Tt,touchend:Pt,touchcancel:Ot},Gt="touchstart touchmove touchend touchcancel";u(L,C,{handler:function(t){var e=Bt[t.type],n=R.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:t})}}),u(H,C,{handler:function(t,e,n){var i=n.pointerType==bt,r=n.pointerType==xt;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Pt|Ot)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ut=x(ut.style,"touchAction"),Zt=Ut!==i,Jt="compute",Kt="auto",te="manipulation",ee="none",ne="pan-x",ie="pan-y";W.prototype={set:function(t){t==Jt&&(t=this.compute()),Zt&&(this.manager.element.style[Ut]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),X(t.join(" "))},preventDefaults:function(t){if(!Zt){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=v(i,ee),a=v(i,ie),o=v(i,ne);return r||a&&n&Mt||o&&n&Vt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,ae=2,oe=4,se=8,le=se,ue=16,ce=32;Y.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=U(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=U(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=U(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=U(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?B(i):""),t)}var n=this,i=this.state;se>i&&e(!0),e(),i>=se&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ce)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ce|re)))return!1;t++}return!0},recognize:function(t){var e=s({},t);return d(this.options.enable,[this,e])?(this.state&(le|ue|ce)&&(this.state=re),this.state=this.process(e),void(this.state&(ae|oe|se|ue)&&this.tryEmit(e))):(this.reset(),void(this.state=ce))},process:function(){},getTouchAction:function(){},reset:function(){}},u(Z,Y,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ae|oe),r=this.attrTest(t);return i&&(n&Ot||!r)?e|ue:i||r?n&Pt?e|se:e&ae?e|oe:ae:ce}}),u(J,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Mt&&e.push(ie),t&Vt&&e.push(ne),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,a=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Mt?(r=0===a?Et:0>a?At:qt,n=a!=this.pX,i=Math.abs(t.deltaX)):(r=0===o?Et:0>o?_t:It,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(this.state&ae||!(this.state&ae)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),u(K,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ae)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),u(tt,Y,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Pt|Ot)&&!a)this.reset();else if(t.eventType&Ct)this.reset(),this._timer=r(function(){this.state=le,this.tryEmit()},e.time,this);else if(t.eventType&Pt)return le;return ce},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===le&&(t&&t.eventType&Pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),u(et,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ae)}}),u(nt,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Mt|Vt,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Mt|Vt)?e=t.velocity:n&Mt?e=t.velocityX:n&Vt&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&pt(e)>this.options.velocity&&t.eventType&Pt},emit:function(t){var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),u(it,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&Ct&&0===this.count)return this.failTimeout();if(i&&a&&n){if(t.eventType!=Pt)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||V(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=r(function(){this.state=le,this.tryEmit()},e.interval,this),ae):le}return ce},failTimeout:function(){return this._timer=r(function(){this.state=ce},this.options.interval,this),ce},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.4",rt.defaults={domEvents:!1,touchAction:Jt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[K,{enable:!1},["rotate"]],[nt,{direction:Mt}],[J,{direction:Mt},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var de=1,pe=2;at.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?pe:de},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&le)&&(r=e.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],e.stopped===pe||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(ae|oe|se)&&(r=e.curRecognizer=n),a++}},get:function(t){if(t instanceof Y)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return o(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return o(m(t),function(t){e?n[t].splice(y(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&st(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(rt,{INPUT_START:Ct,INPUT_MOVE:Tt,INPUT_END:Pt,INPUT_CANCEL:Ot,STATE_POSSIBLE:re,STATE_BEGAN:ae,STATE_CHANGED:oe,STATE_ENDED:se,STATE_RECOGNIZED:le,STATE_CANCELLED:ue,STATE_FAILED:ce,DIRECTION_NONE:Et,DIRECTION_LEFT:At,DIRECTION_RIGHT:qt,DIRECTION_UP:_t,DIRECTION_DOWN:It,DIRECTION_HORIZONTAL:Mt,DIRECTION_VERTICAL:Vt,DIRECTION_ALL:jt,Manager:at,Input:C,TouchAction:W,TouchInput:L,MouseInput:N,PointerEventInput:F,TouchMouseInput:H,SingleTouchInput:Q,Recognizer:Y,AttrRecognizer:Z,Tap:it,Pan:J,Swipe:nt,Pinch:K,Rotate:et,Press:tt,on:f,off:h,each:o,merge:l,extend:s,inherit:u,bindFn:c,prefixed:x}),typeof define==ct&&define.amd?define(function(){return rt}):"undefined"!=typeof module&&module.exports?module.exports=rt:t[n]=rt}(window,document,"Hammer"),function(t){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],t):"object"==typeof exports?t(require("jquery"),require("hammerjs")):t(jQuery,Hammer)}(function(t,e){function n(n,i){var r=t(n);r.data("hammer")||r.data("hammer",new e(r[0],i))}t.fn.hammer=function(t){return this.each(function(){n(this,t)})},e.Manager.prototype.emit=function(e){return function(n,i){e.call(this,n,i),t(this.element).trigger({type:n,gesture:i})}}(e.Manager.prototype.emit)}),function(t){t.fn.collapsible=function(e){var n={accordion:!0};return e=t.extend(n,e),this.each(function(){function e(t){t.parent().toggleClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1}),r.not(t).parent().removeClass("active"),r.not(t).parent().children(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1})}function i(t){t.parent().toggleClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1})}var r=(t(this),t(this).find(".collapsible-header"));n.accordion?(r.each(function(){t(this).click(function(){e(t(this))})}),e(r.filter(".active").first())):r.each(function(){t(this).hasClass("active")&&i(t(this)),t(this).click(function(){i(t(this))})})})}}(jQuery),function(t){t.fn.dropdown=function(e){var n={inDuration:300,outDuration:225,constrain_width:!0,hover:!0};e=t.extend(n,e),this.each(function(){function n(){var n=a.height();e.constrain_width===!0&&a.css("width",r.outerWidth()),i(r[0])?a.css({display:"block",position:"fixed",height:0,top:r.offset().top-t(window).scrollTop(),left:r.offset().left}):a.css({display:"block",top:r.offset().top,left:r.offset().left,height:0}),a.velocity({opacity:1},{duration:e.inDuration,queue:!1,easing:"easeOutQuad"}).velocity({height:n},{duration:e.inDuration,queue:!1,easing:"easeOutCubic",complete:function(){a.css("overflow-y","auto")}})}function i(e){var n=t(e),i=n.add(n.parents()),r=!1;return i.each(function(){return"fixed"===t(this).css("position")?(r=!0,!1):void 0}),r}var r=t(this),a=t("#"+r.attr("data-activates"));if(a.parent().is(t("body"))||(a.detach(),t("body").append(a)),e.hover)r.on("mouseover",function(t){n()}),a.on("mouseleave",function(t){a.velocity({opacity:0},{duration:e.outDuration,easing:"easeOutQuad",complete:function(){a.css({display:"none","overflow-y":""})}})});else{r.click(function(i){i.preventDefault(),i.stopPropagation(),n(),t(document).bind("click."+a.attr("id"),function(n){a.is(n.target)||r.is(n.target)||(a.velocity({opacity:0},{duration:e.outDuration,easing:"easeOutQuad",complete:function(){a.css({display:"none","overflow-y":""})}}),t(document).unbind("click."+a.attr("id")))})})}t(document).on("resize",function(){})})}}(jQuery),function(t){t.fn.extend({openModal:function(e){var n=this,i=t('<div id="lean-overlay"></div>');t("body").append(i);var r={opacity:.5,in_duration:300,out_duration:200,ready:void 0,complete:void 0,dismissible:!0};e=t.extend(r,e),e.dismissible&&(t("#lean-overlay").click(function(){t(n).closeModal(e)}),t(document).keyup(function(i){27===i.keyCode&&(t(n).closeModal(e),t(this).off())})),t(n).find(".modal-close").click(function(i){i.preventDefault(),t(n).closeModal(e)}),t("#lean-overlay").css({display:"block",opacity:0}),t(n).css({display:"block",top:"4%",opacity:0}),t("#lean-overlay").velocity({opacity:e.opacity},{duration:e.in_duration,queue:!1,ease:"easeOutCubic"}),t(n).velocity({top:"5%",opacity:1},{duration:e.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof e.ready&&e.ready()}})}}),t.fn.extend({closeModal:function(e){var n={out_duration:200,complete:void 0},e=t.extend(n,e);t("#lean-overlay").velocity({opacity:0},{duration:e.out_duration,queue:!1,ease:"easeOutQuart"}),t(this).fadeOut(e.out_duration,function(){t(this).css({top:0}),t("#lean-overlay").css({display:"none"}),"function"==typeof e.complete&&e.complete()})}}),t.fn.extend({leanModal:function(e){return this.each(function(){t(this).click(function(n){var i=t(this).attr("href");t(i).openModal(e),n.preventDefault()})})}})}(jQuery),function(t){t.fn.materialbox=function(){return this.each(function(){function e(){i=!1;var e=o.parent(".material-placeholder"),r=(window.innerWidth,window.innerHeight,o.data("width")),s=o.data("height");t("#materialbox-overlay").fadeOut(a,function(){n=!1,t(this).remove()}),o.velocity({width:r,height:s,left:0,top:0},{duration:a,queue:!1,easing:"easeOutQuad"}),t(".materialbox-caption").velocity({opacity:0},{duration:a+200,queue:!1,easing:"easeOutQuad",complete:function(){e.css({height:"",width:"",position:"",top:"",left:""}),o.css({height:"",position:"",top:"",left:"",width:"","max-width":"",position:"","z-index":""}),o.removeClass("active"),i=!0,t(this).remove()}})}var n=!1,i=!0,r=275,a=200,o=t(this),s=t("<div></div>").addClass("material-placeholder");o.wrap(s),o.on("click",function(){var a=o.parent(".material-placeholder"),s=window.innerWidth,l=window.innerHeight,u=o.width(),c=o.height();if(i===!1)return!1;if(n&&i===!0)return e(),!1;i=!1,o.addClass("active"),n=!0,a.css({width:a[0].getBoundingClientRect().width,height:a[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),o.css({position:"absolute","z-index":1e3}).data("width",u).data("height",c);var d=t('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){i===!0&&e()});if(t("body").append(d),d.velocity({opacity:1},{duration:r,queue:!1,easing:"easeOutQuad"}),""!==o.data("caption")){var p=t('<div class="materialbox-caption"></div>');p.text(o.data("caption")),t("body").append(p),p.css({display:"inline"}),p.velocity({opacity:1},{duration:r,queue:!1,easing:"easeOutQuad"})}var f=0,h=u/s,g=c/l,v=0,m=0;h>g?(f=c/u,v=.9*s,m=.9*s*f):(f=u/c,v=.9*l*f,m=.9*l),o.hasClass("responsive-img")?o.velocity({"max-width":v,width:u},{duration:0,queue:!1,complete:function(){o.css({left:0,top:0}).velocity({height:m,width:v,left:t(document).scrollLeft()+s/2-o.parent(".material-placeholder").offset().left-v/2,top:t(document).scrollTop()+l/2-o.parent(".material-placeholder").offset().top-m/2},{duration:r,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}})}}):o.css("left",0).css("top",0).velocity({height:m,width:v,left:t(document).scrollLeft()+s/2-o.parent(".material-placeholder").offset().left-v/2,top:t(document).scrollTop()+l/2-o.parent(".material-placeholder").offset().top-m/2},{duration:r,queue:!1,easing:"easeOutQuad",complete:function(){i=!0}})}),t(window).scroll(function(){n&&e()}),t(document).keyup(function(t){27===t.keyCode&&i===!0&&n&&e()})})}}(jQuery),function(t){t.fn.parallax=function(){var e=t(window).width();return this.each(function(n){function i(n){if(e>992){var i=r.height(),a=r.children("img").height(),o=a-i,s=r.offset().top+i,l=r.offset().top,u=t(window).scrollTop(),c=window.innerHeight,d=u+c,p=(d-l)/(i+c),f=-1*o*p;s>u&&u+c>l&&r.children("img").first().css("bottom",f+"px"),n&&r.children("img").first().show()}else r.children("img").show();}var r=t(this);r.addClass("parallax"),i(!0),t(window).scroll(function(){e=t(window).width(),i(!1)})})}}(jQuery),function(t){t.fn.tabs=function(){return this.each(function(){var e=t(this);t(window).width();e.width("100%");var n=t(this).children("li").length;e.children("li").each(function(){t(this).width(100/n+"%")});var i,r,a=e.find("li.tab a"),o=e.width(),s=e.find("li").first().outerWidth(),l=0;i=t(a.filter('[href="'+location.hash+'"]')),0===i.length&&(i=t(this).find("li.tab a.active").first()),0===i.length&&(i=t(this).find("li.tab a").first()),i.length>0&&(i.addClass("active"),l=a.index(i),0>l&&(l=0),r=t(i[0].hash)),e.append('<div class="indicator"></div>');var u=e.find(".indicator");e.is(":visible")&&(u.css({right:o-(l+1)*s}),u.css({left:l*s})),t(window).resize(function(){o=e.width(),s=e.find("li").first().outerWidth(),0>l&&(l=0),0!==s&&0!==o&&(u.css({right:o-(l+1)*s}),u.css({left:l*s}))}),a.not(i).each(function(){t(this.hash).hide()}),e.on("click","a",function(n){o=e.width(),s=e.find("li").first().outerWidth(),i.removeClass("active"),r.hide(),i=t(this),r=t(this.hash),a=e.find("li.tab a"),i.addClass("active");var c=l;l=a.index(t(this)),0>l&&(l=0),r.show(),l-c>=0?(u.velocity({right:o-(l+1)*s},{duration:300,queue:!1,easing:"easeOutQuad"}),u.velocity({left:l*s},{duration:300,queue:!1,easing:"easeOutQuad",delay:80})):(u.velocity({left:l*s},{duration:300,queue:!1,easing:"easeOutQuad"}),u.velocity({right:o-(l+1)*s},{duration:300,queue:!1,easing:"easeOutQuad",delay:80})),n.preventDefault()})})}}(jQuery),function(t){var e,n,i;t.fn.tooltip=function(r){var a=5;n=!1;var o={delay:350};return r=t.extend(o,r),this.each(function(){var r=t(this),s=t("<div></div>");s.addClass("material-tooltip").text(r.attr("data-tooltip")),s.appendTo(t("body"));var l=t("<div></div>").addClass("backdrop");l.appendTo(s),l.css({top:0,left:0}),t(this).hover(function(t){t.stopPropagation(),e=0,i=setInterval(function(){if(e+=50,e>=o.delay&&0==n){n=!0,s.css({display:"block",left:"0px",top:"0px"});var t=r.outerWidth(),u=r.outerHeight(),c=r.attr("data-position"),d=s.outerHeight(),p=s.outerWidth(),f="0px",h="0px",g=8;"top"===c?(s.css({top:r.offset().top-d-a,left:r.offset().left+t/2-p/2}),f="-10px",l.css({borderRadius:"14px 14px 0 0",transformOrigin:"50% 90%",marginTop:d,marginLeft:p/2-l.width()/2})):"left"===c?(s.css({top:r.offset().top+u/2-d/2,left:r.offset().left-p-a}),h="-10px",l.css({width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:d/2,marginLeft:p})):"right"===c?(s.css({top:r.offset().top+u/2-d/2,left:r.offset().left+t+a}),h="+10px",l.css({width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:d/2,marginLeft:"0px"})):(s.css({top:r.offset().top+r.outerHeight()+a,left:r.offset().left+t/2-p/2}),f="+10px",l.css({marginLeft:p/2-l.width()/2})),g=p/8,8>g&&(g=8),("right"===c||"left"===c)&&(g=p/10,6>g&&(g=6)),s.velocity({opacity:1,marginTop:f,marginLeft:h},{duration:350,queue:!1}),l.css({display:"block"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scale:g},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})}else n&&e>=o.delay+3e3&&(clearInterval(i),e=0,s.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:225,queue:!1,delay:275}),l.velocity({opacity:0,scale:1},{duration:225,delay:0,queue:!1,complete:function(){l.css("display","none"),s.css("display","none"),n=!1}}))},50)},function(){clearInterval(i),e=0,s.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:225,queue:!1,delay:275}),l.velocity({opacity:0,scale:1},{duration:225,delay:275,queue:!1,complete:function(){l.css("display","none"),s.css("display","none"),n=!1}})})})}}(jQuery),function(t){"use strict";function e(t){return null!==t&&t===t.window}function n(t){return e(t)?t:9===t.nodeType&&t.defaultView}function i(t){var e,i,r={top:0,left:0},a=t&&t.ownerDocument;return e=a.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(r=t.getBoundingClientRect()),i=n(a),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}}function r(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}function a(t){if(c.allowEvent(t)===!1)return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentElement;){if(-1!==n.className.indexOf("waves-effect")){e=n;break}n=n.parentElement}return e}function o(e){var n=a(e);null!==n&&(u.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",u.hide,!1),n.addEventListener("touchcancel",u.hide,!1)),n.addEventListener("mouseup",u.hide,!1),n.addEventListener("mouseleave",u.hide,!1))}var s=s||{},l=document.querySelectorAll.bind(document),u={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,a=document.createElement("div");a.className="waves-ripple",n.appendChild(a);var o=i(n),s=t.pageY-o.top,l=t.pageX-o.left,c="scale("+n.clientWidth/100*10+")";"touches"in t&&(s=t.touches[0].pageY-o.top,l=t.touches[0].pageX-o.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",c),a.setAttribute("data-x",l),a.setAttribute("data-y",s);var d={top:s+"px",left:l+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",r(d)),a.className=a.className.replace("waves-notransition",""),d["-webkit-transform"]=c,d["-moz-transform"]=c,d["-ms-transform"]=c,d["-o-transform"]=c,d.transform=c,d.opacity="1",d["-webkit-transition-duration"]=u.duration+"ms",d["-moz-transition-duration"]=u.duration+"ms",d["-o-transition-duration"]=u.duration+"ms",d["transition-duration"]=u.duration+"ms",d["-webkit-transition-timing-function"]="cubic-bezier(0.215, 0.610, 0.355, 1.000)",d["-moz-transition-timing-function"]="cubic-bezier(0.215, 0.610, 0.355, 1.000)",d["-o-transition-timing-function"]="cubic-bezier(0.215, 0.610, 0.355, 1.000)",d["transition-timing-function"]="cubic-bezier(0.215, 0.610, 0.355, 1.000)",a.setAttribute("style",r(d))},hide:function(t){c.touchup(t);var e=this,n=(1.4*e.clientWidth,null),i=e.getElementsByClassName("waves-ripple");if(!(i.length>0))return!1;n=i[i.length-1];var a=n.getAttribute("data-x"),o=n.getAttribute("data-y"),s=n.getAttribute("data-scale"),l=Date.now()-Number(n.getAttribute("data-hold")),d=350-l;0>d&&(d=0),setTimeout(function(){var t={top:o+"px",left:a+"px",opacity:"0","-webkit-transition-duration":u.duration+"ms","-moz-transition-duration":u.duration+"ms","-o-transition-duration":u.duration+"ms","transition-duration":u.duration+"ms","-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s};n.setAttribute("style",r(t)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},u.duration)},d)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),r.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},c={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?c.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){c.touches>0&&(c.touches-=1)},500):"mousedown"===t.type&&c.touches>0&&(e=!1),e},touchup:function(t){c.allowEvent(t)}};s.displayEffect=function(e){e=e||{},"duration"in e&&(u.duration=e.duration),u.wrapInput(l(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},s.attach=function(e){"input"===e.tagName.toLowerCase()&&(u.wrapInput([e]),e=e.parentElement),"ontouchstart"in t&&e.addEventListener("touchstart",o,!1),e.addEventListener("mousedown",o,!1)},t.Waves=s,$(document).ready(function(){s.displayEffect()})}(window),function(t){t.fn.sideNav=function(e){var n={activationWidth:70,edge:"left"};e=t.extend(n,e),t(this).each(function(){function n(){o=!1,s=!1,t("#sidenav-overlay").animate({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),"left"===e.edge?(t(".drag-target").css({width:"",right:"",left:"0"}),r.velocity({left:-1*(a+10)},{duration:200,queue:!1,easing:"easeOutCubic"})):(t(".drag-target").css({width:"",right:"0",left:""}),r.velocity({right:-1*(a+10)},{duration:200,queue:!1,easing:"easeOutCubic"}))}var i=t(this),r=t("#"+i.attr("data-activates")),a=240;"left"!=e.edge&&r.addClass("right-aligned"),t("body").append(t('<div class="drag-target"></div>')),"left"===e.edge?t(".drag-target").css({left:0}):t(".drag-target").css({right:0}),r.hasClass("fixed")&&t(window).resize(function(){t(window).width()>1200&&r.attr("style")&&r.removeAttr("style")});var o=!1,s=!1;t(".drag-target").hammer({prevent_default:!1}).bind("tap",function(e){s&&!o&&t("#sidenav-overlay").trigger("click")}).bind("pan",function(i){if("touch"===i.gesture.pointerType){var o=(i.gesture.direction,i.gesture.center.x);i.gesture.center.y,i.gesture.velocityX;if(!t("#sidenav-overlay").length){var l=t('<div id="sidenav-overlay"></div>');l.css("opacity",0).click(function(){n()}),t("body").append(l)}if("left"===e.edge?o>a?o=a:0>o&&(o=0):o<t(window).width()-a&&(o=t(window).width()-a),"left"===e.edge?a/2>o?s=!1:o>=a/2&&(s=!0):o<t(window).width()-a/2?s=!0:o>=t(window).width()-a/2&&(s=!1),"left"===e.edge?r.css("left",o-a):r.css("right",-1*(o-a/2)),"left"===e.edge){var u=o/a;t("#sidenav-overlay").velocity({opacity:u},{duration:50,queue:!1,easing:"easeOutQuad"})}else{var u=Math.abs((o-t(window).width())/a);t("#sidenav-overlay").velocity({opacity:u},{duration:50,queue:!1,easing:"easeOutQuad"})}}}).bind("panend",function(n){if("touch"===n.gesture.pointerType){var i=n.gesture.velocityX;o=!1,"left"===e.edge?s||-.5>i?(r.velocity({left:0},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),t(".drag-target").css({width:"50%",right:0,left:""})):(!s||i>.3)&&(r.velocity({left:-240},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:0},{duration:50,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),t(".drag-target").css({width:"10%",right:"",left:0})):s||i>.5?(r.velocity({right:0},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),t(".drag-target").css({width:"50%",right:"",left:0})):(!s||-.3>i)&&(r.velocity({right:-240},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:0},{duration:50,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),t(".drag-target").css({width:"10%",right:0,left:""}))}}),i.click(function(){if(r.hasClass("active"))s=!1,o=!1,n();else{"left"===e.edge?(t(".drag-target").css({width:"50%",right:0,left:""}),r.velocity({left:0},{duration:300,queue:!1,easing:"easeOutQuad"})):(t(".drag-target").css({width:"50%",right:"",left:0}),r.velocity({right:0},{duration:300,queue:!1,easing:"easeOutQuad"}));var i=t('<div id="sidenav-overlay"></div>');i.css("opacity",0).click(function(){s=!1,o=!1,n(),i.animate({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}})}),t("body").append(i),i.animate({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){s=!0,o=!1}})}return!1})})}}(jQuery),function(t){function e(e,n,i,r){var a=t();return t.each(o,function(t,o){if(o.height()>0){var s=o.offset().top,l=o.offset().left,u=l+o.width(),c=s+o.height(),d=!(l>n||r>u||s>i||e>c);d&&a.push(o)}}),a}function n(){++u;var n=a.scrollTop(),i=a.scrollLeft(),r=i+a.width(),o=n+a.height(),l=e(n+c.top+200,r+c.right,o+c.bottom,i+c.left);t.each(l,function(t,e){var n=e.data("scrollSpy:ticks");"number"!=typeof n&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",u)}),t.each(s,function(t,e){var n=e.data("scrollSpy:ticks");"number"==typeof n&&n!==u&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),s=l}function i(){a.trigger("scrollSpy:winSize")}function r(t,e,n){var i,r,a,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:d(),o=null,a=t.apply(i,r),i=r=null};return function(){var u=d();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,0>=c?(clearTimeout(o),o=null,s=u,a=t.apply(i,r),i=r=null):o||n.trailing===!1||(o=setTimeout(l,c)),a}}var a=t(window),o=[],s=[],l=!1,u=0,c={top:0,right:0,bottom:0,left:0},d=Date.now||function(){return(new Date).getTime()};t.scrollSpy=function(e,i){var s=[];e=t(e),e.each(function(e,n){o.push(t(n)),t(n).data("scrollSpy:id",e),t("a[href=#"+t(n).attr("id")+"]").click(function(e){e.preventDefault();var n=t(this.hash).offset().top+1;t(".tabs-wrapper").length?t("html, body").animate({scrollTop:n-60},{duration:400,easing:"easeOutCubic"}):t("html, body").animate({scrollTop:n},{duration:400,easing:"easeOutCubic"})})}),i=i||{throttle:100},c.top=i.offsetTop||0,c.right=i.offsetRight||0,c.bottom=i.offsetBottom||0,c.left=i.offsetLeft||0;var u=r(n,i.throttle||100),d=function(){t(document).ready(u)};return l||(a.on("scroll",d),a.on("resize",d),l=!0),setTimeout(d,0),e.on("scrollSpy:enter",function(){s=t.grep(s,function(t){return 0!=t.height()});var e=t(this);s[0]?(t("a[href=#"+s[0].attr("id")+"]").removeClass("active"),e.data("scrollSpy:id")<s[0].data("scrollSpy:id")?s.unshift(t(this)):s.push(t(this))):s.push(t(this)),t("a[href=#"+s[0].attr("id")+"]").addClass("active")}),e.on("scrollSpy:exit",function(){if(s=t.grep(s,function(t){return 0!=t.height()}),s[0]){t("a[href=#"+s[0].attr("id")+"]").removeClass("active");var e=t(this);s=t.grep(s,function(t){return t.attr("id")!=e.attr("id")}),s[0]&&t("a[href=#"+s[0].attr("id")+"]").addClass("active")}}),e},t.winSizeSpy=function(e){return t.winSizeSpy=function(){return a},e=e||{throttle:100},a.on("resize",r(i,e.throttle||100))},t.fn.scrollSpy=function(e){return t.scrollSpy(t(this),e)}}(jQuery),function(t){t(document).ready(function(){var e="input[type=text], input[type=password], input[type=email], input[type=tel], input[type=number], textarea";if(t(document).on("change",e,function(){0!==t(this).val().length&&t(this).siblings("label, i").addClass("active")}),t(document).ready(function(){t(e).each(function(e,n){t(n).val().length>0&&t(this).siblings("label, i").addClass("active")})}),t(document).on("reset",function(n){t(n.target).is("form")&&(t(this).find(e).removeClass("valid").removeClass("invalid"),t(this).find("select.initialized").each(function(){var e=t(this).find("option[selected]").text();t(this).prev("span.select-dropdown").html(e)}))}),t(document).on("focus",e,function(){t(this).siblings("label, i").addClass("active")}),t(document).on("blur",e,function(){0===t(this).val().length?(t(this).siblings("label, i").removeClass("active"),t(this).hasClass("validate")&&(t(this).removeClass("valid"),t(this).removeClass("invalid"))):t(this).hasClass("validate")&&(t(this).is(":valid")?(t(this).removeClass("invalid"),t(this).addClass("valid")):(t(this).removeClass("valid"),t(this).addClass("invalid")))}),0===t(".hiddendiv").length){var n=t('<div class="hiddendiv common"></div>'),i=null;t("body").append(n)}var r=(t(".hiddendiv"),".materialize-textarea");t("body").on("keyup keydown",r,function(){i=t(this).val(),i=i.replace(/\n/g,"<br>"),n.html(i+"<br>"),t(this).css("height",n.height())});var a="input[type=range]",o=!1;t(a).each(function(){var e=t('<span class="thumb"><span class="value"></span></span>');t(this).after(e)});var s=".range-field";t(document).on("mousedown",s,function(e){var n=t(this).children(".thumb");n.length<=0&&(n=t('<span class="thumb"><span class="value"></span></span>'),t(this).append(n)),o=!0,t(this).addClass("active"),n.hasClass("active")||n.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"});var i=e.pageX-t(this).offset().left,r=t(this).outerWidth();0>i?i=0:i>r&&(i=r),n.addClass("active").css("left",i),n.find(".value").html(t(this).children("input[type=range]").val())}),t(document).on("mouseup",s,function(){o=!1,t(this).removeClass("active")}),t(document).on("mousemove",s,function(e){var n=t(this).children(".thumb");if(o){n.hasClass("active")||n.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"});var i=e.pageX-t(this).offset().left,r=t(this).outerWidth();0>i?i=0:i>r&&(i=r),n.addClass("active").css("left",i),n.find(".value").html(t(this).children("input[type=range]").val())}}),t(document).on("mouseout",s,function(){if(!o){var e=t(this).children(".thumb");e.hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),e.removeClass("active")}}),t.fn.material_select=function(e){t(this).each(function(){if($select=t(this),!$select.hasClass("browser-default")&&!$select.hasClass("initialized")){var n=l(),i=t('<div class="select-wrapper"></div>'),r=t('<ul id="select-options-'+n+'" class="dropdown-content select-dropdown"></ul>'),a=$select.children("option");if(void 0!==$select.find("option:selected"))var o=$select.find("option:selected");else var o=r.first();a.each(function(){r.append(t('<li class="'+(t(this).is(":disabled")?"disabled":"")+'"><span>'+t(this).html()+"</span></li>"))}),r.find("li").each(function(n){var i=$select;t(this).click(function(){t(this).hasClass("disabled")||(i.find("option").eq(n).prop("selected",!0),i.trigger("change"),i.prev("span.select-dropdown").html(t(this).text()),"undefined"!=typeof e&&e())})}),$select.wrap(i);var s=t('<span class="select-dropdown '+($select.is(":disabled")?"disabled":"")+'" data-activates="select-options-'+n+'">'+o.html()+"</span>");$select.before(s),t("body").append(r),$select.is(":disabled")||s.dropdown({hover:!1}),$select.addClass("initialized")}})};var l=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()})}(jQuery),function(t){t.fn.slider=function(e){var n={indicators:!0,height:400,transition:500,interval:6e3};return e=t.extend(n,e),this.each(function(){function n(t,e){t.hasClass("center-align")?t.velocity({opacity:0,translateY:-100},{duration:e,queue:!1}):t.hasClass("right-align")?t.velocity({opacity:0,translateX:100},{duration:e,queue:!1}):t.hasClass("left-align")&&t.velocity({opacity:0,translateX:-100},{duration:e,queue:!1})}function i(t){t>=s.length?t=0:0>t&&(t=s.length-1),l=o.find(".active").index(),l!=t&&(r=s.eq(l),$caption=r.find(".caption"),r.removeClass("active"),r.velocity({opacity:0},{duration:e.transition,queue:!1,easing:"easeOutQuad",complete:function(){s.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),n($caption,e.transition),e.indicators&&u.eq(l).removeClass("active"),s.eq(t).velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),s.eq(t).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,delay:e.transition,queue:!1,easing:"easeOutQuad"}),s.eq(t).addClass("active"),e.indicators&&u.eq(t).addClass("active"))}var r,a=t(this),o=a.find("ul.slides").first(),s=o.find("li"),l=o.find(".active").index();if(-1!=l&&(r=s.eq(l)),400!=e.height&&(a.height(e.height+40),o.height(e.height)),s.find(".caption").each(function(){n(t(this),0)}),s.find("img").each(function(){t(this).load(function(){t(this).width()<t(this).parent().width()&&t(this).css({width:"100%",height:"auto"})})}),e.indicators){var u=t('<ul class="indicators"></ul>');s.each(function(n){var r=t('<li class="indicator-item"></li>');r.click(function(){var n=o.parent(),r=n.find(t(this)).index();i(r),clearInterval($interval),$interval=setInterval(function(){l=o.find(".active").index(),s.length==l+1?l=0:l+=1,i(l)},e.transition+e.interval)}),u.append(r)}),a.append(u),u=a.find("ul.indicators").find("li.indicator-item")}r?r.show():(s.first().addClass("active").velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),l=0,r=s.eq(l),e.indicators&&u.eq(l).addClass("active")),r.find("img").load(function(){r.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,queue:!1,easing:"easeOutQuad"})}),$interval=setInterval(function(){l=o.find(".active").index(),i(l+1)},e.transition+e.interval);var c=!1,d=!1,p=!1;a.hammer({prevent_default:!1}).bind("pan",function(t){if("touch"===t.gesture.pointerType){clearInterval($interval);var e=t.gesture.direction,n=t.gesture.deltaX,i=t.gesture.velocityX;$curr_slide=o.find(".active"),$curr_slide.velocity({translateX:n},{duration:50,queue:!1,easing:"easeOutQuad"}),4===e&&(n>a.innerWidth()/2||-.65>i)?p=!0:2===e&&(n<-1*a.innerWidth()/2||i>.65)&&(d=!0);var r;d&&(r=$curr_slide.next(),0===r.length&&(r=s.first()),r.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),p&&(r=$curr_slide.prev(),0===r.length&&(r=s.last()),r.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(t){"touch"===t.gesture.pointerType&&($curr_slide=o.find(".active"),c=!1,curr_index=o.find(".active").index(),p||d?d?(i(curr_index+1),$curr_slide.velocity({translateX:-1*a.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):p&&(i(curr_index-1),$curr_slide.velocity({translateX:a.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}),d=!1,p=!1,clearInterval($interval),$interval=setInterval(function(){l=o.find(".active").index(),s.length==l+1?l=0:l+=1,i(l)},e.transition+e.interval))})})}}(jQuery),function(t){t(document).ready(function(){t(document).on("click.card",".card",function(e){t(this).find(".card-reveal").length&&(t(e.target).is(t(".card-reveal .card-title"))||t(e.target).is(t(".card-reveal .card-title i"))?t(this).find(".card-reveal").velocity({translateY:0},{duration:300,queue:!1,easing:"easeOutQuad"}):(t(e.target).is(t(".card .activator"))||t(e.target).is(t(".card .activator i")))&&t(this).find(".card-reveal").velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeOutQuad"}))})})}(jQuery),function(t){t(document).ready(function(){var e=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}();t.fn.pushpin=function(n){var i={top:0,bottom:1/0,offset:0};return n=t.extend(i,n),$index=0,this.each(function(){function i(t){t.removeClass("pin-top"),t.removeClass("pinned"),t.removeClass("pin-bottom")}function r(e,r){e.each(function(){n.top<=r&&n.bottom>=r&&!t(this).hasClass("pinned")&&(i(t(this)),t(this).css("top",n.offset),t(this).addClass("pinned")),r<n.top&&!t(this).hasClass("pin-top")&&(i(t(this)),t(this).css("top",0),t(this).addClass("pin-top")),r>n.bottom&&!t(this).hasClass("pin-bottom")&&(i(t(this)),t(this).addClass("pin-bottom"),t(this).css("top",n.bottom-s))})}var a=e(),o=t(this),s=t(this).offset().top;r(o,t(window).scrollTop()),t(window).on("scroll."+a,function(){var e=t(window).scrollTop()+n.offset;r(o,e)})})}})}(jQuery),function(t){"function"==typeof define&&define.amd?define("picker",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):this.Picker=t(jQuery)}(function(t){function e(a,o,l,d){function p(){return e._.node("div",e._.node("div",e._.node("div",e._.node("div",C.component.nodes(b.open),x.box),x.wrap),x.frame),x.holder)}function f(){k.data(o,C).addClass(x.input).attr("tabindex",-1).val(k.data("value")?C.get("select",w.format):a.value),w.editable||k.on("focus."+b.id+" click."+b.id,function(t){t.preventDefault(),C.$root[0].focus()}).on("keydown."+b.id,v),r(a,{haspopup:!0,expanded:!1,readonly:!1,owns:a.id+"_root"})}function h(){C.$root.on({keydown:v,focusin:function(t){C.$root.removeClass(x.focused),t.stopPropagation()},"mousedown click":function(e){var n=e.target;n!=C.$root.children()[0]&&(e.stopPropagation(),"mousedown"!=e.type||t(n).is("input, select, textarea, button, option")||(e.preventDefault(),C.$root[0].focus()))}}).on({focus:function(){k.addClass(x.target)},blur:function(){k.removeClass(x.target)}}).on("focus.toOpen",m).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=t(this),n=e.data(),i=e.hasClass(x.navDisabled)||e.hasClass(x.disabled),r=s();r=r&&(r.type||r.href),(i||r&&!t.contains(C.$root[0],r))&&C.$root[0].focus(),!i&&n.nav?C.set("highlight",C.component.item.highlight,{nav:n.nav}):!i&&"pick"in n?C.set("select",n.pick):n.clear?C.clear().close(!0):n.close&&C.close(!0)}),r(C.$root[0],"hidden",!0)}function g(){var e;w.hiddenName===!0?(e=a.name,a.name=""):(e=["string"==typeof w.hiddenPrefix?w.hiddenPrefix:"","string"==typeof w.hiddenSuffix?w.hiddenSuffix:"_submit"],e=e[0]+a.name+e[1]),C._hidden=t('<input type=hidden name="'+e+'"'+(k.data("value")||a.value?' value="'+C.get("select",w.formatSubmit)+'"':"")+">")[0],k.on("change."+b.id,function(){C._hidden.value=a.value?C.get("select",w.formatSubmit):""}),w.container?t(w.container).append(C._hidden):k.after(C._hidden)}function v(t){var e=t.keyCode,n=/^(8|46)$/.test(e);return 27==e?(C.close(),!1):void((32==e||n||!b.open&&C.component.key[e])&&(t.preventDefault(),t.stopPropagation(),n?C.clear().close():C.open()))}function m(t){t.stopPropagation(),"focus"==t.type&&C.$root.addClass(x.focused),C.open()}if(!a)return e;var y=!1,b={id:a.id||"P"+Math.abs(~~(Math.random()*new Date))},w=l?t.extend(!0,{},l.defaults,d):d||{},x=t.extend({},e.klasses(),w.klass),k=t(a),S=function(){return this.start()},C=S.prototype={constructor:S,$node:k,start:function(){return b&&b.start?C:(b.methods={},b.start=!0,b.open=!1,b.type=a.type,a.autofocus=a==s(),a.readOnly=!w.editable,a.id=a.id||b.id,"text"!=a.type&&(a.type="text"),C.component=new l(C,w),C.$root=t(e._.node("div",p(),x.picker,'id="'+a.id+'_root" tabindex="0"')),h(),w.formatSubmit&&g(),f(),w.container?t(w.container).append(C.$root):k.after(C.$root),C.on({start:C.component.onStart,render:C.component.onRender,stop:C.component.onStop,open:C.component.onOpen,close:C.component.onClose,set:C.component.onSet}).on({start:w.onStart,render:w.onRender,stop:w.onStop,open:w.onOpen,close:w.onClose,set:w.onSet}),y=n(C.$root.children()[0]),a.autofocus&&C.open(),C.trigger("start").trigger("render"))},render:function(t){return t?C.$root.html(p()):C.$root.find("."+x.box).html(C.component.nodes(b.open)),C.trigger("render")},stop:function(){return b.start?(C.close(),C._hidden&&C._hidden.parentNode.removeChild(C._hidden),C.$root.remove(),k.removeClass(x.input).removeData(o),setTimeout(function(){k.off("."+b.id)},0),a.type=b.type,a.readOnly=!1,C.trigger("stop"),b.methods={},b.start=!1,C):C},open:function(n){return b.open?C:(k.addClass(x.active),r(a,"expanded",!0),setTimeout(function(){C.$root.addClass(x.opened),r(C.$root[0],"hidden",!1)},0),n!==!1&&(b.open=!0,y&&c.css("overflow","hidden").css("padding-right","+="+i()),C.$root[0].focus(),u.on("click."+b.id+" focusin."+b.id,function(t){var e=t.target;e!=a&&e!=document&&3!=t.which&&C.close(e===C.$root.children()[0])}).on("keydown."+b.id,function(n){var i=n.keyCode,r=C.component.key[i],a=n.target;27==i?C.close(!0):a!=C.$root[0]||!r&&13!=i?t.contains(C.$root[0],a)&&13==i&&(n.preventDefault(),a.click()):(n.preventDefault(),r?e._.trigger(C.component.key.go,C,[e._.trigger(r)]):C.$root.find("."+x.highlighted).hasClass(x.disabled)||C.set("select",C.component.item.highlight).close())})),C.trigger("open"))},close:function(t){return t&&(C.$root.off("focus.toOpen")[0].focus(),setTimeout(function(){C.$root.on("focus.toOpen",m)},0)),k.removeClass(x.active),r(a,"expanded",!1),setTimeout(function(){C.$root.removeClass(x.opened+" "+x.focused),r(C.$root[0],"hidden",!0)},0),b.open?(b.open=!1,y&&c.css("overflow","").css("padding-right","-="+i()),u.off("."+b.id),C.trigger("close")):C},clear:function(t){return C.set("clear",null,t)},set:function(e,n,i){var r,a,o=t.isPlainObject(e),s=o?e:{};if(i=o&&t.isPlainObject(n)?n:i||{},e){o||(s[e]=n);for(r in s)a=s[r],r in C.component.item&&(void 0===a&&(a=null),C.component.set(r,a,i)),("select"==r||"clear"==r)&&k.val("clear"==r?"":C.get(r,w.format)).trigger("change");C.render()}return i.muted?C:C.trigger("set",s)},get:function(t,n){if(t=t||"value",null!=b[t])return b[t];if("valueSubmit"==t){if(C._hidden)return C._hidden.value;t="value"}if("value"==t)return a.value;if(t in C.component.item){if("string"==typeof n){var i=C.component.get(t);return i?e._.trigger(C.component.formats.toString,C.component,[n,i]):""}return C.component.get(t)}},on:function(e,n,i){var r,a,o=t.isPlainObject(e),s=o?e:{};if(e){o||(s[e]=n);for(r in s)a=s[r],i&&(r="_"+r),b.methods[r]=b.methods[r]||[],b.methods[r].push(a)}return C},off:function(){var t,e,n=arguments;for(t=0,namesCount=n.length;t<namesCount;t+=1)e=n[t],e in b.methods&&delete b.methods[e];return C},trigger:function(t,n){var i=function(t){var i=b.methods[t];i&&i.map(function(t){e._.trigger(t,C,[n])})};return i("_"+t),i(t),C}};return new S}function n(t){var e,n="position";return t.currentStyle?e=t.currentStyle[n]:window.getComputedStyle&&(e=getComputedStyle(t)[n]),"fixed"==e}function i(){if(c.height()<=l.height())return 0;var e=t('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=e[0].offsetWidth;e.css("overflow","scroll");var i=t('<div style="width:100%" />').appendTo(e),r=i[0].offsetWidth;return e.remove(),n-r}function r(e,n,i){if(t.isPlainObject(n))for(var r in n)a(e,r,n[r]);else a(e,n,i)}function a(t,e,n){t.setAttribute(("role"==e?"":"aria-")+e,n)}function o(e,n){t.isPlainObject(e)||(e={attribute:n}),n="";for(var i in e){var r=("role"==i?"":"aria-")+i,a=e[i];n+=null==a?"":r+'="'+e[i]+'"'}return n}function s(){try{return document.activeElement}catch(t){}}var l=t(window),u=t(document),c=t(document.documentElement);return e.klasses=function(t){return t=t||"picker",{picker:t,opened:t+"--opened",focused:t+"--focused",input:t+"__input",active:t+"__input--active",target:t+"__input--target",holder:t+"__holder",frame:t+"__frame",wrap:t+"__wrap",box:t+"__box"}},e._={group:function(t){for(var n,i="",r=e._.trigger(t.min,t);r<=e._.trigger(t.max,t,[r]);r+=t.i)n=e._.trigger(t.item,t,[r]),i+=e._.node(t.node,n[0],n[1],n[2]);return i},node:function(e,n,i,r){return n?(n=t.isArray(n)?n.join(""):n,i=i?' class="'+i+'"':"",r=r?" "+r:"","<"+e+i+r+">"+n+"</"+e+">"):""},lead:function(t){return(10>t?"0":"")+t},trigger:function(t,e,n){return"function"==typeof t?t.apply(e,n||[]):t},digits:function(t){return/\d/.test(t[1])?2:1},isDate:function(t){return{}.toString.call(t).indexOf("Date")>-1&&this.isInteger(t.getDate())},isInteger:function(t){return{}.toString.call(t).indexOf("Number")>-1&&t%1===0},ariaAttr:o},e.extend=function(n,i){t.fn[n]=function(r,a){var o=this.data(n);return"picker"==r?o:o&&"string"==typeof r?e._.trigger(o[r],o,[a]):this.each(function(){var a=t(this);a.data(n)||new e(this,n,i,r)})},t.fn[n].defaults=i.defaults},e}),function(t){"function"==typeof define&&define.amd?define(["picker","jquery"],t):"object"==typeof exports?module.exports=t(require("./picker.js"),require("jquery")):t(Picker,jQuery)}(function(t,e){function n(t,e){var n=this,i=t.$node[0],r=i.value,a=t.$node.data("value"),o=a||r,s=a?e.formatSubmit:e.format,l=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction};n.settings=e,n.$node=t.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(e.disable||[]).slice(0),n.item.enable=-function(t){return t[0]===!0?t.shift():-1}(n.item.disable),n.set("min",e.min).set("max",e.max).set("now"),o?n.set("select",o,{format:s}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(t){var e=n.item.highlight,i=new Date(e.year,e.month,e.date+t);n.set("highlight",i,{interval:t}),this.render()}},t.on("render",function(){t.$root.find("."+e.klass.selectMonth).on("change",function(){var n=this.value;n&&(t.set("highlight",[t.get("view").year,n,t.get("highlight").date]),t.$root.find("."+e.klass.selectMonth).trigger("focus"))}),t.$root.find("."+e.klass.selectYear).on("change",function(){var n=this.value;n&&(t.set("highlight",[n,t.get("view").month,t.get("highlight").date]),t.$root.find("."+e.klass.selectYear).trigger("focus"))})},1).on("open",function(){var i="";n.disabled(n.get("now"))&&(i=":not(."+e.klass.buttonToday+")"),t.$root.find("button"+i+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}var i=7,r=6,a=t._;n.prototype.set=function(t,e,n){var i=this,r=i.item;return null===e?("clear"==t&&(t="select"),r[t]=e,i):(r["enable"==t?"disable":"flip"==t?"enable":t]=i.queue[t].split(" ").map(function(r){return e=i[r](t,e,n)}).pop(),"select"==t?i.set("highlight",r.select,n):"highlight"==t?i.set("view",r.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&i.disabled(r.select)&&i.set("select",r.select,n),r.highlight&&i.disabled(r.highlight)&&i.set("highlight",r.highlight,n)),i)},n.prototype.get=function(t){return this.item[t]},n.prototype.create=function(t,n,i){var r,o=this;return n=void 0===n?t:n,n==-(1/0)||n==1/0?r=n:e.isPlainObject(n)&&a.isInteger(n.pick)?n=n.obj:e.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=a.isDate(n)?n:o.create().obj):n=a.isInteger(n)||a.isDate(n)?o.normalize(new Date(n),i):o.now(t,n,i),{year:r||n.getFullYear(),month:r||n.getMonth(),date:r||n.getDate(),day:r||n.getDay(),obj:r||n,pick:r||n.getTime()}},n.prototype.createRange=function(t,n){var i=this,r=function(t){return t===!0||e.isArray(t)||a.isDate(t)?i.create(t):t};return a.isInteger(t)||(t=r(t)),a.isInteger(n)||(n=r(n)),a.isInteger(t)&&e.isPlainObject(n)?t=[n.year,n.month,n.date+t]:a.isInteger(n)&&e.isPlainObject(t)&&(n=[t.year,t.month,t.date+n]),{from:r(t),to:r(n)}},n.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},n.prototype.overlapRanges=function(t,e){var n=this;return t=n.createRange(t.from,t.to),e=n.createRange(e.from,e.to),n.withinRange(t,e.from)||n.withinRange(t,e.to)||n.withinRange(e,t.from)||n.withinRange(e,t.to)},n.prototype.now=function(t,e,n){return e=new Date,n&&n.rel&&e.setDate(e.getDate()+n.rel),this.normalize(e,n)},n.prototype.navigate=function(t,n,i){var r,a,o,s,l=e.isArray(n),u=e.isPlainObject(n),c=this.item.view;if(l||u){for(u?(a=n.year,o=n.month,s=n.date):(a=+n[0],o=+n[1],s=+n[2]),i&&i.nav&&c&&c.month!==o&&(a=c.year,o=c.month),r=new Date(a,o+(i&&i.nav?i.nav:0),1),a=r.getFullYear(),o=r.getMonth();new Date(a,o,s).getMonth()!==o;)s-=1;n=[a,o,s]}return n},n.prototype.normalize=function(t){return t.setHours(0,0,0,0),t},n.prototype.measure=function(t,e){var n=this;return e?"string"==typeof e?e=n.parse(t,e):a.isInteger(e)&&(e=n.now(t,e,{rel:e})):e="min"==t?-(1/0):1/0,e},n.prototype.viewset=function(t,e){return this.create([e.year,e.month,1])},n.prototype.validate=function(t,n,i){var r,o,s,l,u=this,c=n,d=i&&i.interval?i.interval:1,p=-1===u.item.enable,f=u.item.min,h=u.item.max,g=p&&u.item.disable.filter(function(t){if(e.isArray(t)){var i=u.create(t).pick;i<n.pick?r=!0:i>n.pick&&(o=!0)}return a.isInteger(t)}).length;if((!i||!i.nav)&&(!p&&u.disabled(n)||p&&u.disabled(n)&&(g||r||o)||!p&&(n.pick<=f.pick||n.pick>=h.pick)))for(p&&!g&&(!o&&d>0||!r&&0>d)&&(d*=-1);u.disabled(n)&&(Math.abs(d)>1&&(n.month<c.month||n.month>c.month)&&(n=c,d=d>0?1:-1),n.pick<=f.pick?(s=!0,d=1,n=u.create([f.year,f.month,f.date+(n.pick===f.pick?0:-1)])):n.pick>=h.pick&&(l=!0,d=-1,n=u.create([h.year,h.month,h.date+(n.pick===h.pick?0:1)])),!s||!l);)n=u.create([n.year,n.month,n.date+d]);return n},n.prototype.disabled=function(t){var n=this,i=n.item.disable.filter(function(i){return a.isInteger(i)?t.day===(n.settings.firstDay?i:i-1)%7:e.isArray(i)||a.isDate(i)?t.pick===n.create(i).pick:e.isPlainObject(i)?n.withinRange(i,t):void 0});return i=i.length&&!i.filter(function(t){return e.isArray(t)&&"inverted"==t[3]||e.isPlainObject(t)&&t.inverted}).length,-1===n.item.enable?!i:i||t.pick<n.item.min.pick||t.pick>n.item.max.pick},n.prototype.parse=function(t,e,n){var i=this,r={};return e&&"string"==typeof e?(n&&n.format||(n=n||{},n.format=i.settings.format),i.formats.toArray(n.format).map(function(t){var n=i.formats[t],o=n?a.trigger(n,i,[e,r]):t.replace(/^!/,"").length;n&&(r[t]=e.substr(0,o)),e=e.substr(o)}),[r.yyyy||r.yy,+(r.mm||r.m)-1,r.dd||r.d]):e},n.prototype.formats=function(){function t(t,e,n){var i=t.match(/\w+/)[0];return n.mm||n.m||(n.m=e.indexOf(i)+1),i.length}function e(t){return t.match(/\w+/)[0].length}return{d:function(t,e){return t?a.digits(t):e.date},dd:function(t,e){return t?2:a.lead(e.date)},ddd:function(t,n){return t?e(t):this.settings.weekdaysShort[n.day]},dddd:function(t,n){return t?e(t):this.settings.weekdaysFull[n.day]},m:function(t,e){return t?a.digits(t):e.month+1},mm:function(t,e){return t?2:a.lead(e.month+1)},mmm:function(e,n){var i=this.settings.monthsShort;return e?t(e,i,n):i[n.month]},mmmm:function(e,n){var i=this.settings.monthsFull;return e?t(e,i,n):i[n.month]},yy:function(t,e){return t?2:(""+e.year).slice(2)},yyyy:function(t,e){return t?4:e.year},toArray:function(t){return t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,e){var n=this;return n.formats.toArray(t).map(function(t){return a.trigger(n.formats[t],n,[0,e])||t.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(t,n){var i=this;return a.isInteger(t)&&a.isInteger(n)||"boolean"==typeof t&&"boolean"==typeof n?t===n:(a.isDate(t)||e.isArray(t))&&(a.isDate(n)||e.isArray(n))?i.create(t).pick===i.create(n).pick:e.isPlainObject(t)&&e.isPlainObject(n)?i.isDateExact(t.from,n.from)&&i.isDateExact(t.to,n.to):!1},n.prototype.isDateOverlap=function(t,n){var i=this,r=i.settings.firstDay?1:0;return a.isInteger(t)&&(a.isDate(n)||e.isArray(n))?(t=t%7+r,t===i.create(n).day+1):a.isInteger(n)&&(a.isDate(t)||e.isArray(t))?(n=n%7+r,n===i.create(t).day+1):e.isPlainObject(t)&&e.isPlainObject(n)?i.overlapRanges(t,n):!1},n.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(-1==e.enable?1:-1)},n.prototype.deactivate=function(t,n){var i=this,r=i.item.disable.slice(0);return"flip"==n?i.flipEnable():n===!1?(i.flipEnable(1),r=[]):n===!0?(i.flipEnable(-1),r=[]):n.map(function(t){for(var n,o=0;o<r.length;o+=1)if(i.isDateExact(t,r[o])){n=!0;break}n||(a.isInteger(t)||a.isDate(t)||e.isArray(t)||e.isPlainObject(t)&&t.from&&t.to)&&r.push(t)}),r},n.prototype.activate=function(t,n){var i=this,r=i.item.disable,o=r.length;return"flip"==n?i.flipEnable():n===!0?(i.flipEnable(1),r=[]):n===!1?(i.flipEnable(-1),r=[]):n.map(function(t){var n,s,l,u;for(l=0;o>l;l+=1){if(s=r[l],i.isDateExact(s,t)){n=r[l]=null,u=!0;break}if(i.isDateOverlap(s,t)){e.isPlainObject(t)?(t.inverted=!0,n=t):e.isArray(t)?(n=t,n[3]||n.push("inverted")):a.isDate(t)&&(n=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(n)for(l=0;o>l;l+=1)if(i.isDateExact(r[l],t)){r[l]=null;break}if(u)for(l=0;o>l;l+=1)if(i.isDateOverlap(r[l],t)){r[l]=null;break}n&&r.push(n)}),r.filter(function(t){return null!=t})},n.prototype.nodes=function(t){var e=this,n=e.settings,o=e.item,s=o.now,l=o.select,u=o.highlight,c=o.view,d=o.disable,p=o.min,f=o.max,h=function(t,e){return n.firstDay&&(t.push(t.shift()),e.push(e.shift())),a.node("thead",a.node("tr",a.group({min:0,max:i-1,i:1,node:"th",item:function(i){return[t[i],n.klass.weekdays,'scope=col title="'+e[i]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysLetter).slice(0),n.weekdaysFull.slice(0)),g=function(t){return a.node("div"," ",n.klass["nav"+(t?"Next":"Prev")]+(t&&c.year>=f.year&&c.month>=f.month||!t&&c.year<=p.year&&c.month<=p.month?" "+n.klass.navDisabled:""),"data-nav="+(t||-1)+" "+a.ariaAttr({role:"button",controls:e.$node[0].id+"_table"})+' title="'+(t?n.labelMonthNext:n.labelMonthPrev)+'"')},v=function(i){var r=n.showMonthsShort?n.monthsShort:n.monthsFull;return"short_months"==i&&(r=n.monthsShort),n.selectMonths?a.node("select",a.group({min:0,max:11,i:1,node:"option",item:function(t){return[r[t],0,"value="+t+(c.month==t?" selected":"")+(c.year==p.year&&t<p.month||c.year==f.year&&t>f.month?" disabled":"")]}}),n.klass.selectMonth,(t?"":"disabled")+" "+a.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):"short_months"==i?a.node("div",r[c.month]):a.node("div",r[c.month],n.klass.month)},m=function(i){var r=c.year,o=n.selectYears===!0?5:~~(n.selectYears/2);if(o){var s=p.year,l=f.year,u=r-o,d=r+o;if(s>u&&(d+=s-u,u=s),d>l){var h=u-s,g=d-l;u-=h>g?g:h,d=l}return a.node("select",a.group({min:u,max:d,i:1,node:"option",item:function(t){return[t,0,"value="+t+(r==t?" selected":"")]}}),n.klass.selectYear,(t?"":"disabled")+" "+a.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return"raw"==i?a.node("div",r):a.node("div",r,n.klass.year)};return createDayLabel=function(){return null!=l?a.node("div",l.date):a.node("div",s.date)},createWeekdayLabel=function(){var t;t=null!=l?l.day:s.day;var e=n.weekdaysFull[t];return e},a.node("div",a.node("div",createWeekdayLabel(),"picker__weekday-display")+a.node("div",v("short_months"),n.klass.month_display)+a.node("div",createDayLabel(),n.klass.day_display)+a.node("div",m("raw"),n.klass.year_display),n.klass.date_display)+a.node("div",a.node("div",(n.selectYears?m()+v():v()+m())+g()+g(1),n.klass.header)+a.node("table",h+a.node("tbody",a.group({min:0,max:r-1,i:1,node:"tr",item:function(t){var r=n.firstDay&&0===e.create([c.year,c.month,1]).day?-7:0;return[a.group({min:i*t-c.day+r+1,max:function(){return this.min+i-1},i:1,node:"td",item:function(t){t=e.create([c.year,c.month,t+(n.firstDay?1:0)]);var i=l&&l.pick==t.pick,r=u&&u.pick==t.pick,o=d&&e.disabled(t)||t.pick<p.pick||t.pick>f.pick,h=a.trigger(e.formats.toString,e,[n.format,t]);return[a.node("div",t.date,function(e){return e.push(c.month==t.month?n.klass.infocus:n.klass.outfocus),s.pick==t.pick&&e.push(n.klass.now),i&&e.push(n.klass.selected),r&&e.push(n.klass.highlighted),o&&e.push(n.klass.disabled),e.join(" ")}([n.klass.day]),"data-pick="+t.pick+" "+a.ariaAttr({role:"gridcell",label:h,selected:i&&e.$node.val()===h?!0:null,activedescendant:r?!0:null,disabled:o?!0:null})),"",a.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+e.$node[0].id+'_table" '+a.ariaAttr({role:"grid",controls:e.$node[0].id,readonly:!0})),n.klass.calendar_container)+a.node("div",a.node("button",n.today,"btn-flat picker__today","type=button data-pick="+s.pick+(t&&!e.disabled(s)?"":" disabled")+" "+a.ariaAttr({controls:e.$node[0].id}))+a.node("button",n.clear,"btn-flat picker__clear","type=button data-clear=1"+(t?"":" disabled")+" "+a.ariaAttr({controls:e.$node[0].id}))+a.node("button",n.close,"btn-flat picker__close","type=button data-close=true "+(t?"":" disabled")+" "+a.ariaAttr({controls:e.$node[0].id})),n.klass.footer)},n.defaults=function(t){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:t+"table",header:t+"header",date_display:t+"date-display",day_display:t+"day-display",month_display:t+"month-display",year_display:t+"year-display",calendar_container:t+"calendar-container",navPrev:t+"nav--prev",navNext:t+"nav--next",navDisabled:t+"nav--disabled",month:t+"month",year:t+"year",selectMonth:t+"select--month",selectYear:t+"select--year",weekdays:t+"weekday",day:t+"day",disabled:t+"day--disabled",selected:t+"day--selected",highlighted:t+"day--highlighted",now:t+"day--today",infocus:t+"day--infocus",outfocus:t+"day--outfocus",footer:t+"footer",buttonClear:t+"button--clear",buttonToday:t+"button--today",buttonClose:t+"button--close"}}}(t.klasses().picker+"__"),t.extend("pickadate",n)});
<?php if ($bucket != "video" && $bucket != "music"): ?>
// elevateZoom 3.0.8
"function"!==typeof Object.create&&(Object.create=function(d){function h(){}h.prototype=d;return new h});(function(d,h,l,m){var k={init:function(b,a){var c=this;c.elem=a;c.$elem=d(a);c.imageSrc=c.$elem.data("zoom-image")?c.$elem.data("zoom-image"):c.$elem.attr("src");c.options=d.extend({},d.fn.elevateZoom.options,b);c.options.tint&&(c.options.lensColour="none",c.options.lensOpacity="1");"inner"==c.options.zoomType&&(c.options.showLens=!1);c.$elem.parent().removeAttr("title").removeAttr("alt");c.zoomImage=c.imageSrc;c.refresh(1);d("#"+c.options.gallery+" a").click(function(a){c.options.galleryActiveClass&&(d("#"+c.options.gallery+" a").removeClass(c.options.galleryActiveClass),d(this).addClass(c.options.galleryActiveClass));a.preventDefault();d(this).data("zoom-image")?c.zoomImagePre=d(this).data("zoom-image"):c.zoomImagePre=d(this).data("image");c.swaptheimage(d(this).data("image"),c.zoomImagePre);return!1})},refresh:function(b){var a=this;setTimeout(function(){a.fetch(a.imageSrc)},b||a.options.refresh)},fetch:function(b){var a=this,c=new Image;c.onload=function(){a.largeWidth=c.width;a.largeHeight=c.height;a.startZoom();a.currentImage=a.imageSrc;a.options.onZoomedImageLoaded(a.$elem)};c.src=b},startZoom:function(){var b=this;b.nzWidth=b.$elem.width();b.nzHeight=b.$elem.height();b.isWindowActive=!1;b.isLensActive=!1;b.isTintActive=!1;b.overWindow=!1;b.options.imageCrossfade&&(b.zoomWrap=b.$elem.wrap('<div style="height:'+b.nzHeight+"px;width:"+b.nzWidth+'px;" class="zoomWrapper" />'),b.$elem.css("position","absolute"));b.zoomLock=1;b.scrollingLock=!1;b.changeBgSize=!1;b.currentZoomLevel=b.options.zoomLevel;b.nzOffset=b.$elem.offset();b.widthRatio=b.largeWidth/b.currentZoomLevel/b.nzWidth;b.heightRatio=b.largeHeight/b.currentZoomLevel/b.nzHeight;"window"==b.options.zoomType&&(b.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(b.options.zoomWindowBgColour)+";width: "+String(b.options.zoomWindowWidth)+"px;height: "+String(b.options.zoomWindowHeight)+"px;float: left;background-size: "+b.largeWidth/b.currentZoomLevel+"px "+b.largeHeight/b.currentZoomLevel+"px;display: none;z-index:100;border: "+String(b.options.borderSize)+"px solid "+b.options.borderColour+";background-repeat: no-repeat;position: absolute;");if("inner"==b.options.zoomType){var a=b.$elem.css("border-left-width");b.zoomWindowStyle="overflow: hidden;margin-left: "+String(a)+";margin-top: "+String(a)+";background-position: 0px 0px;width: "+String(b.nzWidth)+"px;height: "+String(b.nzHeight)+"px;float: left;display: none;cursor:"+b.options.cursor+";px solid "+b.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==b.options.zoomType&&(lensHeight=b.nzHeight<b.options.zoomWindowWidth/b.widthRatio?b.nzHeight:String(b.options.zoomWindowHeight/b.heightRatio),lensWidth=b.largeWidth<b.options.zoomWindowWidth?b.nzWidth:b.options.zoomWindowWidth/b.widthRatio,b.lensStyle="background-position: 0px 0px;width: "+String(b.options.zoomWindowWidth/b.widthRatio)+"px;height: "+String(b.options.zoomWindowHeight/b.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+b.options.lensOpacity+";filter: alpha(opacity = "+100*b.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+b.options.lensColour+";cursor:"+b.options.cursor+";border: "+b.options.lensBorderSize+"px solid "+b.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;");b.tintStyle="display: block;position: absolute;background-color: "+b.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+b.nzWidth+"px;height: "+b.nzHeight+"px;";b.lensRound="";"lens"==b.options.zoomType&&(b.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(b.options.borderSize)+"px solid "+b.options.borderColour+";width:"+String(b.options.lensSize)+"px;height:"+String(b.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;");"round"==b.options.lensShape&&(b.lensRound="border-top-left-radius: "+String(b.options.lensSize/2+b.options.borderSize)+"px;border-top-right-radius: "+String(b.options.lensSize/2+b.options.borderSize)+"px;border-bottom-left-radius: "+String(b.options.lensSize/2+b.options.borderSize)+"px;border-bottom-right-radius: "+String(b.options.lensSize/2+b.options.borderSize)+"px;");b.zoomContainer=d('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+b.nzOffset.left+"px;top:"+b.nzOffset.top+"px;height:"+b.nzHeight+"px;width:"+b.nzWidth+'px;"></div>');d("body").append(b.zoomContainer);b.options.containLensZoom&&"lens"==b.options.zoomType&&b.zoomContainer.css("overflow","hidden");"inner"!=b.options.zoomType&&(b.zoomLens=d("<div class='zoomLens' style='"+b.lensStyle+b.lensRound+"'>&nbsp;</div>").appendTo(b.zoomContainer).click(function(){b.$elem.trigger("click")}),b.options.tint&&(b.tintContainer=d("<div/>").addClass("tintContainer"),b.zoomTint=d("<div class='zoomTint' style='"+b.tintStyle+"'></div>"),b.zoomLens.wrap(b.tintContainer),b.zoomTintcss=b.zoomLens.after(b.zoomTint),b.zoomTintImage=d('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+b.nzWidth+"px; height: "+b.nzHeight+'px;" src="'+b.imageSrc+'">').appendTo(b.zoomLens).click(function(){b.$elem.trigger("click")})));isNaN(b.options.zoomWindowPosition)?b.zoomWindow=d("<div style='z-index:999;left:"+b.windowOffsetLeft+"px;top:"+b.windowOffsetTop+"px;"+b.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function(){b.$elem.trigger("click")}):b.zoomWindow=d("<div style='z-index:999;left:"+b.windowOffsetLeft+"px;top:"+b.windowOffsetTop+"px;"+b.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(b.zoomContainer).click(function(){b.$elem.trigger("click")});b.zoomWindowContainer=d("<div/>").addClass("zoomWindowContainer").css("width",b.options.zoomWindowWidth);b.zoomWindow.wrap(b.zoomWindowContainer);"lens"==b.options.zoomType&&b.zoomLens.css({backgroundImage:"url('"+b.imageSrc+"')"});"window"==b.options.zoomType&&b.zoomWindow.css({backgroundImage:"url('"+b.imageSrc+"')"});"inner"==b.options.zoomType&&b.zoomWindow.css({backgroundImage:"url('"+b.imageSrc+"')"});b.$elem.bind("touchmove",function(a){a.preventDefault();b.setPosition(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0])});b.zoomContainer.bind("touchmove",function(a){"inner"==b.options.zoomType&&b.showHideWindow("show");a.preventDefault();b.setPosition(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0])});b.zoomContainer.bind("touchend",function(a){b.showHideWindow("hide");b.options.showLens&&b.showHideLens("hide");b.options.tint&&"inner"!=b.options.zoomType&&b.showHideTint("hide")});b.$elem.bind("touchend",function(a){b.showHideWindow("hide");b.options.showLens&&b.showHideLens("hide");b.options.tint&&"inner"!=b.options.zoomType&&b.showHideTint("hide")});b.options.showLens&&(b.zoomLens.bind("touchmove",function(a){a.preventDefault();b.setPosition(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0])}),b.zoomLens.bind("touchend",function(a){b.showHideWindow("hide");b.options.showLens&&b.showHideLens("hide");b.options.tint&&"inner"!=b.options.zoomType&&b.showHideTint("hide")}));b.$elem.bind("mousemove",function(a){!1==b.overWindow&&b.setElements("show");if(b.lastX!==a.clientX||b.lastY!==a.clientY)b.setPosition(a),b.currentLoc=a;b.lastX=a.clientX;b.lastY=a.clientY});b.zoomContainer.bind("mousemove",function(a){!1==b.overWindow&&b.setElements("show");if(b.lastX!==a.clientX||b.lastY!==a.clientY)b.setPosition(a),b.currentLoc=a;b.lastX=a.clientX;b.lastY=a.clientY});"inner"!=b.options.zoomType&&b.zoomLens.bind("mousemove",function(a){if(b.lastX!==a.clientX||b.lastY!==a.clientY)b.setPosition(a),b.currentLoc=a;b.lastX=a.clientX;b.lastY=a.clientY});b.options.tint&&"inner"!=b.options.zoomType&&b.zoomTint.bind("mousemove",function(a){if(b.lastX!==a.clientX||b.lastY!==a.clientY)b.setPosition(a),b.currentLoc=a;b.lastX=a.clientX;b.lastY=a.clientY});"inner"==b.options.zoomType&&b.zoomWindow.bind("mousemove",function(a){if(b.lastX!==a.clientX||b.lastY!==a.clientY)b.setPosition(a),b.currentLoc=a;b.lastX=a.clientX;b.lastY=a.clientY});b.zoomContainer.add(b.$elem).mouseenter(function(){!1==b.overWindow&&b.setElements("show")}).mouseleave(function(){b.scrollLock||b.setElements("hide")});"inner"!=b.options.zoomType&&b.zoomWindow.mouseenter(function(){b.overWindow=!0;b.setElements("hide")}).mouseleave(function(){b.overWindow=!1});b.minZoomLevel=b.options.minZoomLevel?b.options.minZoomLevel:2*b.options.scrollZoomIncrement;b.options.scrollZoom&&b.zoomContainer.add(b.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(a){b.scrollLock=!0;clearTimeout(d.data(this,"timer"));d.data(this,"timer",setTimeout(function(){b.scrollLock=!1},250));var e=a.originalEvent.wheelDelta||-1*a.originalEvent.detail;a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();0<e/120?b.currentZoomLevel>=b.minZoomLevel&&b.changeZoomLevel(b.currentZoomLevel-b.options.scrollZoomIncrement):b.options.maxZoomLevel?b.currentZoomLevel<=b.options.maxZoomLevel&&b.changeZoomLevel(parseFloat(b.currentZoomLevel)+b.options.scrollZoomIncrement):b.changeZoomLevel(parseFloat(b.currentZoomLevel)+b.options.scrollZoomIncrement);return!1})},setElements:function(b){if(!this.options.zoomEnabled)return!1;"show"==b&&this.isWindowSet&&("inner"==this.options.zoomType&&this.showHideWindow("show"),"window"==this.options.zoomType&&this.showHideWindow("show"),this.options.showLens&&this.showHideLens("show"),this.options.tint&&"inner"!=this.options.zoomType&&this.showHideTint("show"));"hide"==b&&("window"==this.options.zoomType&&this.showHideWindow("hide"),this.options.tint||this.showHideWindow("hide"),this.options.showLens&&this.showHideLens("hide"),this.options.tint&&this.showHideTint("hide"))},setPosition:function(b){if(!this.options.zoomEnabled)return!1;this.nzHeight=this.$elem.height();this.nzWidth=this.$elem.width();this.nzOffset=this.$elem.offset();this.options.tint&&"inner"!=this.options.zoomType&&(this.zoomTint.css({top:0}),this.zoomTint.css({left:0}));this.options.responsive&&!this.options.scrollZoom&&this.options.showLens&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.largeWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"lens"!=this.options.zoomType&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.options.zoomWindowWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight),this.options.tint&&(this.zoomTintImage.css("width",this.nzWidth),this.zoomTintImage.css("height",this.nzHeight))),"lens"==this.options.zoomType&&this.zoomLens.css({width:String(this.options.lensSize)+"px",height:String(this.options.lensSize)+"px"}));this.zoomContainer.css({top:this.nzOffset.top});this.zoomContainer.css({left:this.nzOffset.left});this.mouseLeft=parseInt(b.pageX-this.nzOffset.left);this.mouseTop=parseInt(b.pageY-this.nzOffset.top);"window"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.zoomLens.height()/2,this.Eboppos=this.mouseTop>this.nzHeight-this.zoomLens.height()/2-2*this.options.lensBorderSize,this.Eloppos=this.mouseLeft<0+this.zoomLens.width()/2,this.Eroppos=this.mouseLeft>this.nzWidth-this.zoomLens.width()/2-2*this.options.lensBorderSize);"inner"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.nzHeight/2/this.heightRatio,this.Eboppos=this.mouseTop>this.nzHeight-this.nzHeight/2/this.heightRatio,this.Eloppos=this.mouseLeft<0+this.nzWidth/2/this.widthRatio,this.Eroppos=this.mouseLeft>this.nzWidth-this.nzWidth/2/this.widthRatio-2*this.options.lensBorderSize);0>=this.mouseLeft||0>this.mouseTop||this.mouseLeft>this.nzWidth||this.mouseTop>this.nzHeight?this.setElements("hide"):(this.options.showLens&&(this.lensLeftPos=String(this.mouseLeft-this.zoomLens.width()/2),this.lensTopPos=String(this.mouseTop-this.zoomLens.height()/2)),this.Etoppos&&(this.lensTopPos=0),this.Eloppos&&(this.tintpos=this.lensLeftPos=this.windowLeftPos=0),"window"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),"inner"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.nzWidth-2*this.options.lensBorderSize)),"lens"==this.options.zoomType&&(this.windowLeftPos=String(-1*((b.pageX-this.nzOffset.left)*this.widthRatio-this.zoomLens.width()/2)),this.windowTopPos=String(-1*((b.pageY-this.nzOffset.top)*this.heightRatio-this.zoomLens.height()/2)),this.zoomLens.css({backgroundPosition:this.windowLeftPos+"px "+this.windowTopPos+"px"}),this.changeBgSize&&(this.nzHeight>this.nzWidth?("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"})):("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"})),this.changeBgSize=!1),this.setWindowPostition(b)),this.options.tint&&"inner"!=this.options.zoomType&&this.setTintPosition(b),"window"==this.options.zoomType&&this.setWindowPostition(b),"inner"==this.options.zoomType&&this.setWindowPostition(b),this.options.showLens&&(this.fullwidth&&"lens"!=this.options.zoomType&&(this.lensLeftPos=0),this.zoomLens.css({left:this.lensLeftPos+"px",top:this.lensTopPos+"px"})))},showHideWindow:function(b){"show"!=b||this.isWindowActive||(this.options.zoomWindowFadeIn?this.zoomWindow.stop(!0,!0,!1).fadeIn(this.options.zoomWindowFadeIn):this.zoomWindow.show(),this.isWindowActive=!0);"hide"==b&&this.isWindowActive&&(this.options.zoomWindowFadeOut?this.zoomWindow.stop(!0,!0).fadeOut(this.options.zoomWindowFadeOut):this.zoomWindow.hide(),this.isWindowActive=!1)},showHideLens:function(b){"show"!=b||this.isLensActive||(this.options.lensFadeIn?this.zoomLens.stop(!0,!0,!1).fadeIn(this.options.lensFadeIn):this.zoomLens.show(),this.isLensActive=!0);"hide"==b&&this.isLensActive&&(this.options.lensFadeOut?this.zoomLens.stop(!0,!0).fadeOut(this.options.lensFadeOut):this.zoomLens.hide(),this.isLensActive=!1)},showHideTint:function(b){"show"!=b||this.isTintActive||(this.options.zoomTintFadeIn?this.zoomTint.css({opacity:this.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(this.zoomTint.css({opacity:this.options.tintOpacity}).animate(),this.zoomTint.show()),this.isTintActive=!0);"hide"==b&&this.isTintActive&&(this.options.zoomTintFadeOut?this.zoomTint.stop(!0,!0).fadeOut(this.options.zoomTintFadeOut):this.zoomTint.hide(),this.isTintActive=!1)},setLensPostition:function(b){},setWindowPostition:function(b){var a=this;if(isNaN(a.options.zoomWindowPosition))a.externalContainer=d("#"+a.options.zoomWindowPosition),a.externalContainerWidth=a.externalContainer.width(),a.externalContainerHeight=a.externalContainer.height(),a.externalContainerOffset=a.externalContainer.offset(),a.windowOffsetTop=a.externalContainerOffset.top,a.windowOffsetLeft=a.externalContainerOffset.left;else switch(a.options.zoomWindowPosition){case 1:a.windowOffsetTop=a.options.zoomWindowOffety;a.windowOffsetLeft=+a.nzWidth;break;case 2:a.options.zoomWindowHeight>a.nzHeight&&(a.windowOffsetTop=-1*(a.options.zoomWindowHeight/2-a.nzHeight/2),a.windowOffsetLeft=a.nzWidth);break;case 3:a.windowOffsetTop=a.nzHeight-a.zoomWindow.height()-2*a.options.borderSize;a.windowOffsetLeft=a.nzWidth;break;case 4:a.windowOffsetTop=a.nzHeight;a.windowOffsetLeft=a.nzWidth;break;case 5:a.windowOffsetTop=a.nzHeight;a.windowOffsetLeft=a.nzWidth-a.zoomWindow.width()-2*a.options.borderSize;break;case 6:a.options.zoomWindowHeight>a.nzHeight&&(a.windowOffsetTop=a.nzHeight,a.windowOffsetLeft=-1*(a.options.zoomWindowWidth/2-a.nzWidth/2+2*a.options.borderSize));break;case 7:a.windowOffsetTop=a.nzHeight;a.windowOffsetLeft=0;break;case 8:a.windowOffsetTop=a.nzHeight;a.windowOffsetLeft=-1*(a.zoomWindow.width()+2*a.options.borderSize);break;case 9:a.windowOffsetTop=a.nzHeight-a.zoomWindow.height()-2*a.options.borderSize;a.windowOffsetLeft=-1*(a.zoomWindow.width()+2*a.options.borderSize);break;case 10:a.options.zoomWindowHeight>a.nzHeight&&(a.windowOffsetTop=-1*(a.options.zoomWindowHeight/2-a.nzHeight/2),a.windowOffsetLeft=-1*(a.zoomWindow.width()+2*a.options.borderSize));break;case 11:a.windowOffsetTop=a.options.zoomWindowOffety;a.windowOffsetLeft=-1*(a.zoomWindow.width()+2*a.options.borderSize);break;case 12:a.windowOffsetTop=-1*(a.zoomWindow.height()+2*a.options.borderSize);a.windowOffsetLeft=-1*(a.zoomWindow.width()+2*a.options.borderSize);break;case 13:a.windowOffsetTop=-1*(a.zoomWindow.height()+2*a.options.borderSize);a.windowOffsetLeft=0;break;case 14:a.options.zoomWindowHeight>a.nzHeight&&(a.windowOffsetTop=-1*(a.zoomWindow.height()+2*a.options.borderSize),a.windowOffsetLeft=-1*(a.options.zoomWindowWidth/2-a.nzWidth/2+2*a.options.borderSize));break;case 15:a.windowOffsetTop=-1*(a.zoomWindow.height()+2*a.options.borderSize);a.windowOffsetLeft=a.nzWidth-a.zoomWindow.width()-2*a.options.borderSize;break;case 16:a.windowOffsetTop=-1*(a.zoomWindow.height()+2*a.options.borderSize);a.windowOffsetLeft=a.nzWidth;break;default:a.windowOffsetTop=a.options.zoomWindowOffety,a.windowOffsetLeft=a.nzWidth}a.isWindowSet=!0;a.windowOffsetTop+=a.options.zoomWindowOffety;a.windowOffsetLeft+=a.options.zoomWindowOffetx;a.zoomWindow.css({top:a.windowOffsetTop});a.zoomWindow.css({left:a.windowOffsetLeft});"inner"==a.options.zoomType&&(a.zoomWindow.css({top:0}),a.zoomWindow.css({left:0}));a.windowLeftPos=String(-1*((b.pageX-a.nzOffset.left)*a.widthRatio-a.zoomWindow.width()/2));a.windowTopPos=String(-1*((b.pageY-a.nzOffset.top)*a.heightRatio-a.zoomWindow.height()/2));a.Etoppos&&(a.windowTopPos=0);a.Eloppos&&(a.windowLeftPos=0);a.Eboppos&&(a.windowTopPos=-1*(a.largeHeight/a.currentZoomLevel-a.zoomWindow.height()));a.Eroppos&&(a.windowLeftPos=-1*(a.largeWidth/a.currentZoomLevel-a.zoomWindow.width()));a.fullheight&&(a.windowTopPos=0);a.fullwidth&&(a.windowLeftPos=0);if("window"==a.options.zoomType||"inner"==a.options.zoomType)1==a.zoomLock&&(1>=a.widthRatio&&(a.windowLeftPos=0),1>=a.heightRatio&&(a.windowTopPos=0)),a.largeHeight<a.options.zoomWindowHeight&&(a.windowTopPos=0),a.largeWidth<a.options.zoomWindowWidth&&(a.windowLeftPos=0),a.options.easing?(a.xp||(a.xp=0),a.yp||(a.yp=0),a.loop||(a.loop=setInterval(function(){a.xp+=(a.windowLeftPos-a.xp)/a.options.easingAmount;a.yp+=(a.windowTopPos-a.yp)/a.options.easingAmount;a.scrollingLock?(clearInterval(a.loop),a.xp=a.windowLeftPos,a.yp=a.windowTopPos,a.xp=-1*((b.pageX-a.nzOffset.left)*a.widthRatio-a.zoomWindow.width()/2),a.yp=-1*((b.pageY-a.nzOffset.top)*a.heightRatio-a.zoomWindow.height()/2),a.changeBgSize&&(a.nzHeight>a.nzWidth?("lens"==a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"}),a.zoomWindow.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"})):("lens"!=a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvalueheight+"px"}),a.zoomWindow.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvaluewidth+"px"})),a.changeBgSize=!1),a.zoomWindow.css({backgroundPosition:a.windowLeftPos+"px "+a.windowTopPos+"px"}),a.scrollingLock=!1,a.loop=!1):(a.changeBgSize&&(a.nzHeight>a.nzWidth?("lens"==a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"}),a.zoomWindow.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"})):("lens"!=a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvaluewidth+"px"}),a.zoomWindow.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvaluewidth+"px"})),a.changeBgSize=!1),a.zoomWindow.css({backgroundPosition:a.xp+"px "+a.yp+"px"}))},16))):(a.changeBgSize&&(a.nzHeight>a.nzWidth?("lens"==a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"}),a.zoomWindow.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"})):("lens"==a.options.zoomType&&a.zoomLens.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvaluewidth+"px"}),a.largeHeight/a.newvaluewidth<a.options.zoomWindowHeight?a.zoomWindow.css({"background-size":a.largeWidth/a.newvaluewidth+"px "+a.largeHeight/a.newvaluewidth+"px"}):a.zoomWindow.css({"background-size":a.largeWidth/a.newvalueheight+"px "+a.largeHeight/a.newvalueheight+"px"})),a.changeBgSize=!1),a.zoomWindow.css({backgroundPosition:a.windowLeftPos+"px "+a.windowTopPos+"px"}))},setTintPosition:function(b){this.nzOffset=this.$elem.offset();this.tintpos=String(-1*(b.pageX-this.nzOffset.left-this.zoomLens.width()/2));this.tintposy=String(-1*(b.pageY-this.nzOffset.top-this.zoomLens.height()/2));this.Etoppos&&(this.tintposy=0);this.Eloppos&&(this.tintpos=0);this.Eboppos&&(this.tintposy=-1*(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize));this.Eroppos&&(this.tintpos=-1*(this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize));this.options.tint&&(this.fullheight&&(this.tintposy=0),this.fullwidth&&(this.tintpos=0),this.zoomTintImage.css({left:this.tintpos+"px"}),this.zoomTintImage.css({top:this.tintposy+"px"}))},swaptheimage:function(b,a){var c=this,e=new Image;c.options.loadingIcon&&(c.spinner=d("<div style=\"background: url('"+c.options.loadingIcon+"') no-repeat center;height:"+c.nzHeight+"px;width:"+c.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),c.$elem.after(c.spinner));c.options.onImageSwap(c.$elem);e.onload=function(){c.largeWidth=e.width;c.largeHeight=e.height;c.zoomImage=a;c.zoomWindow.css({"background-size":c.largeWidth+"px "+c.largeHeight+"px"});c.zoomWindow.css({"background-size":c.largeWidth+"px "+c.largeHeight+"px"});c.swapAction(b,a)};e.src=a},swapAction:function(b,a){var c=this,e=new Image;e.onload=function(){c.nzHeight=e.height;c.nzWidth=e.width;c.options.onImageSwapComplete(c.$elem);c.doneCallback()};e.src=b;c.currentZoomLevel=c.options.zoomLevel;c.options.maxZoomLevel=!1;"lens"==c.options.zoomType&&c.zoomLens.css({backgroundImage:"url('"+a+"')"});"window"==c.options.zoomType&&c.zoomWindow.css({backgroundImage:"url('"+a+"')"});"inner"==c.options.zoomType&&c.zoomWindow.css({backgroundImage:"url('"+a+"')"});c.currentImage=a;if(c.options.imageCrossfade){var f=c.$elem,g=f.clone();c.$elem.attr("src",b);c.$elem.after(g);g.stop(!0).fadeOut(c.options.imageCrossfade,function(){d(this).remove()});c.$elem.width("auto").removeAttr("width");c.$elem.height("auto").removeAttr("height");f.fadeIn(c.options.imageCrossfade);c.options.tint&&"inner"!=c.options.zoomType&&(f=c.zoomTintImage,g=f.clone(),c.zoomTintImage.attr("src",a),c.zoomTintImage.after(g),g.stop(!0).fadeOut(c.options.imageCrossfade,function(){d(this).remove()}),f.fadeIn(c.options.imageCrossfade),c.zoomTint.css({height:c.$elem.height()}),c.zoomTint.css({width:c.$elem.width()}));c.zoomContainer.css("height",c.$elem.height());c.zoomContainer.css("width",c.$elem.width());"inner"!=c.options.zoomType||c.options.constrainType||(c.zoomWrap.parent().css("height",c.$elem.height()),c.zoomWrap.parent().css("width",c.$elem.width()),c.zoomWindow.css("height",c.$elem.height()),c.zoomWindow.css("width",c.$elem.width()))}else c.$elem.attr("src",b),c.options.tint&&(c.zoomTintImage.attr("src",a),c.zoomTintImage.attr("height",c.$elem.height()),c.zoomTintImage.css({height:c.$elem.height()}),c.zoomTint.css({height:c.$elem.height()})),c.zoomContainer.css("height",c.$elem.height()),c.zoomContainer.css("width",c.$elem.width());c.options.imageCrossfade&&(c.zoomWrap.css("height",c.$elem.height()),c.zoomWrap.css("width",c.$elem.width()));c.options.constrainType&&("height"==c.options.constrainType&&(c.zoomContainer.css("height",c.options.constrainSize),c.zoomContainer.css("width","auto"),c.options.imageCrossfade?(c.zoomWrap.css("height",c.options.constrainSize),c.zoomWrap.css("width","auto"),c.constwidth=c.zoomWrap.width()):(c.$elem.css("height",c.options.constrainSize),c.$elem.css("width","auto"),c.constwidth=c.$elem.width()),"inner"==c.options.zoomType&&(c.zoomWrap.parent().css("height",c.options.constrainSize),c.zoomWrap.parent().css("width",c.constwidth),c.zoomWindow.css("height",c.options.constrainSize),c.zoomWindow.css("width",c.constwidth)),c.options.tint&&(c.tintContainer.css("height",c.options.constrainSize),c.tintContainer.css("width",c.constwidth),c.zoomTint.css("height",c.options.constrainSize),c.zoomTint.css("width",c.constwidth),c.zoomTintImage.css("height",c.options.constrainSize),c.zoomTintImage.css("width",c.constwidth))),"width"==c.options.constrainType&&(c.zoomContainer.css("height","auto"),c.zoomContainer.css("width",c.options.constrainSize),c.options.imageCrossfade?(c.zoomWrap.css("height","auto"),c.zoomWrap.css("width",c.options.constrainSize),c.constheight=c.zoomWrap.height()):(c.$elem.css("height","auto"),c.$elem.css("width",c.options.constrainSize),c.constheight=c.$elem.height()),"inner"==c.options.zoomType&&(c.zoomWrap.parent().css("height",c.constheight),c.zoomWrap.parent().css("width",c.options.constrainSize),c.zoomWindow.css("height",c.constheight),c.zoomWindow.css("width",c.options.constrainSize)),c.options.tint&&(c.tintContainer.css("height",c.constheight),c.tintContainer.css("width",c.options.constrainSize),c.zoomTint.css("height",c.constheight),c.zoomTint.css("width",c.options.constrainSize),c.zoomTintImage.css("height",c.constheight),c.zoomTintImage.css("width",c.options.constrainSize))))},doneCallback:function(){this.options.loadingIcon&&this.spinner.hide();this.nzOffset=this.$elem.offset();this.nzWidth=this.$elem.width();this.nzHeight=this.$elem.height();this.currentZoomLevel=this.options.zoomLevel;this.widthRatio=this.largeWidth/this.nzWidth;this.heightRatio=this.largeHeight/this.nzHeight;"window"==this.options.zoomType&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.options.zoomWindowWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.zoomLens&&(this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var b=this;b.gallerylist=[];b.options.gallery?d("#"+b.options.gallery+" a").each(function(){var a="";d(this).data("zoom-image")?a=d(this).data("zoom-image"):d(this).data("image")&&(a=d(this).data("image"));a==b.zoomImage?b.gallerylist.unshift({href:""+a+"",title:d(this).find("img").attr("title")}):b.gallerylist.push({href:""+a+"",title:d(this).find("img").attr("title")})}):b.gallerylist.push({href:""+b.zoomImage+"",title:d(this).find("img").attr("title")});return b.gallerylist},changeZoomLevel:function(b){this.scrollingLock=!0;this.newvalue=parseFloat(b).toFixed(2);newvalue=parseFloat(b).toFixed(2);maxheightnewvalue=this.largeHeight/(this.options.zoomWindowHeight/this.nzHeight*this.nzHeight);maxwidthtnewvalue=this.largeWidth/(this.options.zoomWindowWidth/this.nzWidth*this.nzWidth);"inner"!=this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/maxheightnewvalue/this.nzHeight,this.newvalueheight=maxheightnewvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/maxwidthtnewvalue/this.nzWidth,this.newvaluewidth=maxwidthtnewvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1),"lens"==this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.fullwidth=!0,this.newvaluewidth=maxheightnewvalue):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1)));"inner"==this.options.zoomType&&(maxheightnewvalue=parseFloat(this.largeHeight/this.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(this.largeWidth/this.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue>maxwidthtnewvalue?maxwidthtnewvalue:newvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1));scrcontinue=!1;"inner"==this.options.zoomType&&(this.nzWidth>this.nzHeight&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullwidth=this.fullheight=!0)),this.nzHeight>this.nzWidth&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullwidth=this.fullheight=!0)));"inner"!=this.options.zoomType&&(scrcontinue=!0);scrcontinue&&(this.zoomLock=0,this.changeZoom=!0,this.options.zoomWindowHeight/this.heightRatio<=this.nzHeight&&(this.currentZoomLevel=this.newvalueheight,"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({height:String(this.options.zoomWindowHeight/this.heightRatio)+"px"})),"lens"==this.options.zoomType||"inner"==this.options.zoomType)&&(this.changeBgSize=!0),this.options.zoomWindowWidth/this.widthRatio<=this.nzWidth&&("inner"!=this.options.zoomType&&this.newvaluewidth>this.newvalueheight&&(this.currentZoomLevel=this.newvaluewidth),"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({width:String(this.options.zoomWindowWidth/this.widthRatio)+"px"})),"lens"==this.options.zoomType||"inner"==this.options.zoomType)&&(this.changeBgSize=!0),"inner"==this.options.zoomType&&(this.changeBgSize=!0,this.nzWidth>this.nzHeight&&(this.currentZoomLevel=this.newvaluewidth),this.nzHeight>this.nzWidth&&(this.currentZoomLevel=this.newvaluewidth)));this.setPosition(this.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide();self.zoomLens&&self.zoomLens.hide();self.zoomTint&&self.zoomTint.hide()},changeState:function(b){"enable"==b&&(this.options.zoomEnabled=!0);"disable"==b&&(this.options.zoomEnabled=!1)}};d.fn.elevateZoom=function(b){return this.each(function(){var a=Object.create(k);a.init(b,this);d.data(this,"elevateZoom",a)})};d.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:0.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:0.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:0.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:d.noop,onZoomedImageLoaded:function(){},onImageSwap:d.noop,onImageSwapComplete:d.noop}})(jQuery,window,document);
<?php endif; ?>
// helpers.js
jQuery.fn.reverse=[].reverse,Array.prototype.clone=function(){return this.slice(0)},Array.prototype.random=function(){for(var t=this[Math.floor(Math.random()*this.length)];!t;)t=this[Math.floor(Math.random()*this.length)];return t},Array.prototype.shuffle=function(){for(var t,r,e=this,n=e.length;0!==n;)r=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[r],e[r]=t;return e};var ENTER=String.fromCharCode(10),ENTERENTER=String.fromCharCode(10)+String.fromCharCode(10),gENTER=new RegExp(ENTER,"g"),gTAB=new RegExp(String.fromCharCode(9),"g");window.size=function(){var t=Math.min(window.innerWidth,document.documentElement.clientWidth),r=Math.min(window.innerHeight,document.documentElement.clientHeight),e=!1;return r/4*3>=t?(r/=2,e=!0):r-=40,0>=t&&(t=800),0>=r&&(r=600),{width:t,height:r,halfSize:e}},String.prototype.toMMSS=function(){var t=this.replace("PT",""),r=t.split("H")[0];r===t?r=0:t=t.replace(r+"H","");var e=t.split("M")[0];e===t?e=0:t=t.replace(e+"M","");var n=t.split("S")[0];return n===t?n=0:t=t.replace(n+"S",""),e=parseInt(e)+60*parseInt(r),parseInt(e)<10&&(e="0"+e),parseInt(n)<10&&(n="0"+n),e+":"+n},Number.prototype.toMMSS=function(){var t=Math.ceil(parseInt(this)),r=0,e=Math.floor((t-3600*r)/60),n=t-3600*r-60*e;return 10>e&&(e="0"+e),10>n&&(n="0"+n),e+":"+n},String.prototype.parseYoutubeTime=function(){var t=this;if(""==t)return 0;var r=0,e=0,n=0;if(t.indexOf("#t=")>-1||t.indexOf("?t=")>-1||t.indexOf("&t=")>-1){var i=t.indexOf("#t=")+3;2==i&&(i=t.indexOf("?t=")+3),2==i&&(i=t.indexOf("&t=")+3);var o=t.indexOf("h",i),a=t.indexOf("m",i),s=t.indexOf("s",i);-1==o&&-1==a&&-1==s&&(n=t.substring(i),n.indexOf("&")>-1&&(n=n.substring(0,n.indexOf("&")))),o>-1&&(r=t.substring(i,o)),o>-1&&a>-1?e=t.substring(o+1,a):a>-1&&(e=t.substring(i,a)),s>-1&&a>-1?n=t.substring(a+1,s):s>-1&&o>-1?n=t.substring(o+1,s):s>-1&&(n=t.substring(i,s))}return 60*parseInt(r)*60+60*parseInt(e)+parseInt(n)},String.prototype.params=function(){var t,r={};t=this.split("&");for(var e=0,n=t.length;n>e;e++){var i=t[e].split("=");r[i[0]]=i[1]}return r},String.prototype.cTrim=function(t){for(var r=this,e=r.length,n=0;e>n;n++)-1!==t.indexOf(r.charAt(0))&&(r=r.substr(1));for(var n=e;n>0;n--)-1!==t.indexOf(r.charAt(r.length-1))&&(r=r.substr(0,r.length-1));return r},String.prototype.htmlDecode=function(){return $("<div/>").html(String(this)).text()},String.prototype.htmlEncode=function(){var t=this;return String(t).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};
// init
listr={},listr.opts={},listr.opts.showMedia=!0,listr.opts.showVisuals=!1,listr.opts.clearOnLoad=!0,listr.opts.showLinkOpts=!0,listr.opts.showOptions=!0,listr.opts.allowNoStream=!0,listr.opts.allowAds=!0,listr.opts.autoSkip=!0,listr.opts.allowNSFW=!0,listr.opts.allowZoom=!0,listr.opts.replaceYoutube=!0,listr.opts.onlySearchFeeds=!0,listr.opts.showOffliberty=!1,listr.opts.showQuick=!0;
<?php
  echo 'listr.bucket = "' . $bucket . '";';

  // Is a user logged-in?  If so, who?
  if (!$loggedIn) echo 'listr.user = false;';
  else echo 'listr.user = "' . $username . '";';

  // Is player embedded?
  if ($embedded) echo "listr.opts['embedded'] = true;listr.opts['showGrid'] = true;";
  else echo "listr.opts['embedded'] = false;listr.opts['showGrid'] = false;";

  // Do we shuffle?  If TRUE, shuffles order of all links when a new feed is loaded.
  if (isset($_GET["shuffle"])) echo "listr.opts['shuffleOnLoad'] = true;";
  else echo "listr.opts['shuffleOnLoad'] = false;";

  // Do we random?  If so, get random posts from subreddit instead of hot/ new/ etc..
  if (isset($_GET["random"])) echo "listr.opts['randomLoad'] = true;";
  else echo "listr.opts['randomLoad'] = false;";

  // Do we links in self posts?  Only used with postview.
  if (isset($_GET["selftext"]) && ($_GET["selftext"] == "0" || $_GET["selftext"] == "no" || $_GET["selftext"] == "false"))
    echo "listr.opts['allowSelftext'] = false;";
  else echo "listr.opts['allowSelftext'] = true;";

  // Automatically add all found (related) links to playlist?
  if (substr_count($listrURL, "/comments/") == 0) echo "listr.opts['pushRelated'] = false;";
  else echo "listr.opts['pushRelated'] = true;";

  if ($bucket == "ladycandy") echo 'listr.thumb = "/img/eyecandy.jpg";';
  else if ($bucket == "gaynsfw") echo 'listr.thumb = "/img/nsfw.jpg";';
  else if ($bucket == "media") echo 'listr.thumb = "/img/little_r.png";';
  else echo 'listr.thumb = "/img/' . $bucket . '.jpg";';

  // overwrite values w/ server settings
  foreach ($opts as $key => $value) echo "listr.opts['" . $key . "'] = " . ($value ? "true" : "false") . ";";
?>
// listr.js
listr.opts.ajaxDelay=1500,listr.opts.timesUsed=1,listr.opts.showNotify=!0,listr.opts.sleep=!1,listr.opts.preventClose=!1,$(window).bind("beforeunload",function(){return listr.opts.preventClose?"Some sites try to force you to leave.":void 0}),$(document).ready(function(){if($(".tooltipped").tooltip({delay:500}),$(".modal-trigger").leanModal(),$(".collapsible").collapsible(),$("select").material_select(),$("div.container ul.tabs").tabs(),$("div.container.liked ul.tabs li a.active").removeClass("active"),self!=top&&window.addEventListener("message",listr.msg,!1),$("nav div.select-wrapper").addClass("hide-on-embed").addClass("quickLoad"),$("nav span.select-dropdown").css({"border-bottom":"none"}),$("#"+$("nav span.select-dropdown").data("activates")).addClass("quickLoad").addClass("z-depth-2").css({"max-height":"none","overflow-x":"hidden"}).sortable({containment:"parent",opacity:.666,cancel:".listing",start:function(i,e){listr.opts.startIdx=$(e.item[0]).index(),listr.opts.actIdx=$("ul.quickLoad li.active").index()},update:function(i,e){var t=$(e.item[0]),s=(t.position().top,$("ul.quickLoad").scrollTop(),t.index()),l=listr.opts.startIdx,o=listr.opts.actIdx;if(e.position.top>e.originalPosition.top&&s==l&&s++,s>l)for(var a=l;s>a;a++){var n=listr.links.table.row(a).data(),r=listr.links.table.row(a+1).data();listr.links.table.row(a).data(r),listr.links.table.row(a+1).data(n)}else for(var a=l;a>s;a--){var n=listr.links.table.row(a).data(),r=listr.links.table.row(a-1).data();listr.links.table.row(a).data(r),listr.links.table.row(a-1).data(n)}l==o?(listr.links.table.$("tr.selected").removeClass("selected"),listr.links.table.$("tr:eq("+s+")").addClass("selected")):l>o&&o>=s&&listr.links.table.$("tr.selected").removeClass("selected").next().addClass("selected"),listr.links.table.draw()}}).find("li.disabled").remove(),$("div.grid div.cardCont").sortable({containment:"parent",opacity:.666,cancel:".listing",start:function(i,e){listr.opts.startIdx=$(e.item[0]).index()},update:function(i,e){var t=$(e.item[0]),s=(t.position().top,$("div.cardCont").scrollTop(),t.index()),l=listr.opts.startIdx;if(s!=l){if(s>l)for(var o=l;s>o;o++){var a=listr.links.table.row(o).data(),n=listr.links.table.row(o+1).data();listr.links.table.row(o).data(n),listr.links.table.row(o+1).data(a)}else for(var o=l;o>s;o--){var a=listr.links.table.row(o).data(),n=listr.links.table.row(o-1).data();listr.links.table.row(o).data(n),listr.links.table.row(o-1).data(a)}t.hasClass("active")&&(listr.links.table.$("tr.selected").removeClass("selected"),listr.links.table.$("tr:eq("+s+")").addClass("selected")),listr.links.table.draw(),listr.links.quickloadRefresh()}}}),$("#addFeed div."+listr.bucket).show(),$("div.container.options div.section div."+listr.bucket).show(),$("div.container.about div.links .bucket").text(listr.bucket),listr.opts.embedded&&$(".hide-on-embed").hide(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(".hide-on-mobile").hide(),void 0!==$.cookie()){$.cookie.defaults.path="/",$.cookie.defaults.domain="radd.it";var i=$.cookie();$.each(i,function(i,e){"timesUsed"==i?listr.opts.timesUsed=parseInt(e)+1:void 0!==listr.opts[i.replace(listr.bucket+"|","")]&&("true"===e?e=!0:"false"===e&&(e=!1),listr.opts[i.replace(listr.bucket+"|","")]=e)}),setTimeout(function(){$.cookie("timesUsed",listr.opts.timesUsed)},1e4),listr.opts.timesUsed>9&&$("footer").append('<div class="footer-copyright">You\'ve used radd.it '+listr.opts.timesUsed+" times.</div>")}listr.opts.showLinkOpts||$("div.container.links div.section.opts").hide(),listr.opts.showOptions||$("div.container.options").stop().hide(),listr.opts.showMedia||($("div.container.media div.opts h6 a").addClass("fromOpts").detach().prependTo("#naviDown span.btns"),$("div.container.media").stop().hide(),listr.opts.allowNoStream=!1),listr.opts.shuffleOnLoad&&$("th.shuffle i,a.togShuffle").addClass("blue-grey").removeClass("grey"),listr.opts.showVisuals&&setTimeout(function(){void 0!==listr.sources[listr.links.current.key]&&listr.sources[listr.links.current.key]._pauses&&($("div.container.media div.content").append('<div class="media-dsp"  id="visualizer"><iframe src="/viz"></iframe></div>'),$(window).resize())},3e3),listr.opts.aboutMax||($("a.aboutMin").hide(),$("a.aboutMax").show()),$.each(listr.opts,function(i,e){var t=$("div.container.options div.section").find("."+i).find("input");t.length>0&&(e===!0||e===!1)&&$(t).prop("checked",e)}),$("div.container.options div.section").on("click","input",function(i){var e=$(this).parent("label").parent("div").attr("class").split(/\s+/)[0],t=$(this).val();if("on"===t&&(t=$(this).prop("checked")),void 0===listr.opts[e])return void console.log("ERROR: no listr.opts for "+e);listr.opts[e]=t;var s=["sleep"];if(-1===$.inArray(e,s)&&void 0!==$.cookie()&&$.cookie(listr.bucket+"|"+e,t),"showMedia"==e)t?($("#naviDown a.fromOpts").removeClass("fromOpts").detach().prependTo("div.container.media div.opts h6"),$("div.container.media").show()):(1==$("ul.quickLoad").css("opacity")&&setTimeout(function(){$("ul.quickLoad").removeClass("keepOpen"),$("body").click()}),$("div.container.media div.opts h6 a").addClass("fromOpts").detach().prependTo("#naviDown span.btns"),$("div.container.media").stop().hide(),listr.opts.allowNoStream&&$("div.container.options div.allowNoStream input").click()),$(window).scrollTop($("div.container.options").position().top);else if("showVisuals"==e)t?($("div.container.media div.content").append('<div class="media-dsp"  id="visualizer"><iframe src="/viz"></iframe></div>'),$(window).resize()):$("#visualizer").remove();else if("showGrid"==e)t?($("div.container.links").hide(),$("div.container.grid").show()):($("div.container.grid").hide(),$("div.container.links").show(),setTimeout(function(){listr.links.table.draw(!1)})),setTimeout(function(){$(window).scroll()});else if("allowNoStream"==e)t||listr.sources[listr.links.current.key]._streams||listr.links.next();else if("allowAds"==e)!t&&listr.sources[listr.links.current.key]._ads&&listr.links.next();else if("showOffliberty"==e)t&&-1!==$.inArray("music",listr.sources[listr.links.current.key].buckets)?$("div.media a.offliberty").unbind("click").bind("click",function(){window.open("http://offliberty.com/#"+listr.links.current.url,"_blank")}).show():$("div.media a.offliberty").hide();else if("allowZoom"==e)t?0==$("div.zoomContainer").length&&$("#media-pic img").length&&$("#media-pic img").attr("data-zoom-image",listr.links.current.url).elevateZoom({zoomType:"inner",cursor:"crosshair",scrollZoom:!0,zoomWindowFadeIn:250,zoomWindowFadeOut:250}):$("div.zoomContainer").remove();else if("allowNSFW"==e)try{!t&&listr.links.meta.nsfw&&listr.links.next()}catch(i){}else"sleep"==e&&(t?(listr.opts.sleep=60,$("div.container.options div."+listr.bucket+" div.sleep span.time").text("60 minutes."),listr.broadcast({action:"start",target:"sleep",val:listr.opts.sleep}),listr.opts.sleepTimer=setInterval(function(){listr.opts.sleep--,listr.broadcast({action:"interval",target:"sleep",val:listr.opts.sleep}),listr.opts.sleep>0?$("div.container.options div."+listr.bucket+" div.sleep span.time").text(listr.opts.sleep+" minutes."):("none"!=$("span.btns a.pause").css("display")?$("span.btns a.pause").click():"none"==$("span.btns a.resume").css("display")&&listr.sources[listr.links.current.key].stop(),$("div.container.options div."+listr.bucket+" div.sleep input").click())},6e4)):(listr.broadcast({action:"stop",target:"sleep",val:!1}),clearInterval(listr.opts.sleepTimer),$("div.container.options div."+listr.bucket+" div.sleep span.time").text("an hour?")))}),$("a.share").click(function(){$("#share-all").click(),setTimeout(function(){$("#share-all").click()})}),$("#share-url,#share-embed").click(function(){$(this).select()}).mouseover(function(){$(this).select()}),$("#share-all").click(function(){var i=$("#share-embed").val();$("#share-all").is(":checked")?-1==i.indexOf("allmedia")&&(i=i.split("'></iframe>")[0]+(-1==i.indexOf("?")?"?":"&")+"allmedia'></iframe>"):i=i.replace("?allmedia","").replace("&allmedia",""),$("#share-embed").val(i)}),$(document).keypress(function(i){if("text"==document.activeElement.type||"input"==document.activeElement.type||"search"==document.activeElement.type)return void(13==i.which&&(i.preventDefault(),$(document.activeElement).hasClass("quick-search")?$("a.quick-search-full").click():$(document.activeElement).parent().find("a.btn-floating").length>0?$(document.activeElement).parent().find("a.btn-floating:eq(0)").click():$(document.activeElement).parent().parent().find("a.btn-floating").length>0&&$(document.activeElement).parent().parent().find("a.btn-floating:eq(0)").click()));switch(i.which){case 44:case 60:listr.links.prev();break;case 46:case 62:listr.links.next();break;case 47:case 63:"none"!=$("span.btns a.pause").css("display")?$("span.btns a.pause").click():"none"!=$("span.btns a.resume").css("display")?$("span.btns a.resume").click():listr.sources[listr.links.current.key].stop();break;case 58:case 59:$("span.btns a.next").click().click();break;case 79:case 111:window.open(listr.links.current.url,"_blank"),listr.links.stop();break;case 82:case 114:try{window.open("https://www.reddit.com"+listr.links.current.related.permalink,"_blank")}catch(e){}break;case 90:case 122:var t=$("div.container.options div."+listr.bucket+' div.sleep input[display!="none"]');t.length>0&&(listr.opts.sleep?toast("sleep off",1e3):toast("sleep in 60min",1e3),t.click());break;case 86:case 118:var s=$("div.container.options div."+listr.bucket+' div.showVisuals input[display!="none"]');s.length>0&&(listr.opts.showVisuals?toast("visuals off",1e3):toast("visuals on",1e3),s.click());break;case 65:case 97:$("a.aboutMin:visible,a.aboutMax:visible").click();break;case 77:case 109:$("div.quickLoad span.select-dropdown").click();break;case 78:case 110:$("div.media div.opts a.relatedNext:visible").click();break;case 76:case 108:$("div.media div.opts a.addLike:visible").click();break;case 80:case 112:$("div.media div.opts a.plAppend:visible").click();break;case 83:case 115:$("#linksAdd:visible").length?$("#linksAdd a.modal-close").click():$("div.media div.opts a.relatedLinks").click();break;case 84:case 116:var s=$("div.container.options div."+listr.bucket+' div.showGrid input[display!="none"]');s.length>0&&s.click();break;case 49:$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[0]).position().top},250);break;case 50:listr.navi.sections.length>0&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[1]).position().top},250);break;case 51:listr.navi.sections.length>1&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[2]).position().top},250);break;case 52:listr.navi.sections.length>2&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[3]).position().top},250);break;case 53:listr.navi.sections.length>3&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[4]).position().top},250);break;case 54:listr.navi.sections.length>4&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[5]).position().top},250);break;case 55:listr.navi.sections.length>5&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[6]).position().top},250);break;case 56:listr.navi.sections.length>6&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[7]).position().top},250);break;case 57:listr.navi.sections.length>7&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[8]).position().top},250);break;case 58:listr.navi.sections.length>8&&$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[9]).position().top},250)}}),$("a.easter").click(function(i){listr.links.load(listr.links.push({title:"don't sadd.it! radd.it!",url:"https://soundcloud.com/professorpan/raddit"})),i.preventDefault()}),$(window).resize()}),$(window).focus(function(){setTimeout(function(){$("a.hotkeys").hide()})}).blur(function(){setTimeout(function(){$("a.hotkeys").show()})}),$(window).resize(function(){var i=window.size();$("div.container:not(.no-min-height)").css("min-height",i.height),$("div.container.half-height").css("min-height",i.halfSize?i.height:i.height/2+i.height/10),$(".media-dsp").css("height",i.height-64).css("width",i.width),$("div.container div.boxCont").height((i.halfSize?2*i.height:i.height)-158),$("div.container div.boxCont div.row.links").height((i.halfSize?2*i.height:i.height)-258)}),listr.broadcast=function(i){self!=top&&parent.postMessage(i,"*")},listr.msg=function(i){if(void 0!==i.data){var e=i.data;if(void 0!==e.action)if("load"==e.action){if(void 0===e.source)return void console.log("ERROR: load action w/out source",e);if(void 0===e.url)return void console.log("ERROR: load action w/out url",e);listr.feeds[e.source].load(e.url)}else if("push"==e.action){if(void 0===e.target)return void console.log("ERROR: push action w/out target",e);if("links"==e.target){if(void 0===e.link)return void console.log("ERROR: link push action w/out link",e);listr.links.push(e.link)}}else if("opt"==e.action){if(void 0===e.opt)return void console.log("ERROR: opt action w/out opt",e);if(void 0===e.val)return void console.log("ERROR: opt action w/out val",e);listr.opts[e.opt]=e.val;var t=["sleep"];-1===$.inArray(e.opt,t)&&void 0!==$.cookie()&&$.cookie(listr.bucket+"|"+e.opt,e.val),listr.broadcast({action:"opt",opt:e.opt,val:e.val})}else if("listing"==e.action){if(void 0===e.idx)return void console.log("ERROR: listing action w/out idx",e);$("ul.quickLoad li.listing.listing-"+e.idx).click()}else if("play"==e.action){if(void 0===e.idx)return void console.log("ERROR: play action w/out idx",e);$("ul.quickLoad li.idx-"+e.idx).click()}else if("clear"==e.action){if(void 0===e.target)return void console.log("ERROR: clear action w/out target",e);"links"==e.target&&(listr.links.stop(),listr.links.clear())}else if("pause"==e.action)$("span.btns a.pause").click();else if("resume"==e.action)$("span.btns a.resume").click();else if("prev"==e.action)$("span.btns a.prev").click();else if("next"==e.action)$("span.btns a.next").click();else if("upvote"==e.action)$("#addLike a.upvote").click();else if("create"==e.action){if(void 0===e.target)return void console.log("ERROR: create action w/out target",e);"likes"==e.target?($("#addlike-cat-new").val(e.link.cat),$("#addlike-url").val(e.link.url),$("#addlike-thumb-img").attr("src",e.link.thumb),$("#addlike-title").val(e.link.label),$("#addlike-descrip").val(e.link.descrip),setTimeout(function(){$("#addLike a.save:eq(0)").click()})):"playlists"==e.target&&(void 0===e.links?(void 0===e.idx?($("#plAdd-pl-new").val(e.label),$("#plAdd-descrip").val(e.descrip),$("#plAdd-pl option:last-child").attr("selected",!0)):($("#plAdd-pl-new").val(""),$("#plAdd-descrip").val(""),$("#plAdd-pl option:eq("+e.idx+")").attr("selected",!0)),setTimeout(function(){$("#plAdd a.save:eq(0)").click()})):($("#plAppend-pl-new").val(e.label),$("#plAppend-descrip").val(e.descrip),$("#plAppend-pl option:last-child").attr("selected",!0),$("#plAppend-url").val(e.links[0].url),$("#plAppend-thumb-img").attr("src",e.links[0].thumb),$("#plAppend-title").val(e.links[0].title),setTimeout(function(){$("#plAppend a.save:eq(0)").click()})))}else if("update"==e.action){if(void 0===e.target)return void console.log("ERROR: create action w/out target",e);if("playlists"==e.target)if(void 0===e.links){if(void 0===e.idx)return void console.log("ERROR: update playlist action w/out idx",e);$("#plAdd-pl-new").val(""),$("#plAdd-descrip").val(""),$("#plAdd-pl option:eq("+e.idx+")").attr("selected",!0),setTimeout(function(){$("#plAdd a.append:eq(0)").click()})}else $("#plAppend-pl-new").val(""),$("#plAppend-pl option:eq("+e.idx+")").attr("selected",!0),$("#plAppend-descrip").val(e.descrip),$("#plAppend-url").val(e.links[0].url),$("#plAppend-thumb-img").attr("src",e.links[0].thumb),$("#plAppend-title").val(e.links[0].title),setTimeout(function(){$("#plAppend a.save:eq(0)").click()})}else if("seek"==e.action)void 0===e.pct?console.log("ERROR: seek action w/out pct",e):listr.sources[listr.links.current.key].seek(e.pct);else if("search"==e.action){if(void 0===e.query)return void console.log("ERROR: search action w/out query",e);listr.links.search(e.query)}else if("quicksearch"==e.action){if(void 0===e.query)return void console.log("ERROR: quicksearch action w/out query",e);$("#quick-search-query").val(e.query),setTimeout(function(){$("div.qsCont a.quick-search-go").click()})}else""!=e.action&&alert("Unknown action: "+e.action)}};
// navi.js
listr.navi={},listr.navi.active=-1,listr.navi.sections=[],listr.navi.update=function(){var i=$("div.container");listr.navi.sections=[],$.each(i,function(i,n){"none"!==$(n).css("display")&&(listr.navi.sections[listr.navi.sections.length]=$(n).attr("class").split(" ")[1])})},$(document).ready(function(){listr.navi.update(),$.each(listr.navi.sections,function(i,n){-1==listr.navi.active&&"none"!==$("div.container."+n).css("display")&&(listr.navi.active=i)}),$("#naviUp a.navi").click(function(){listr.navi.active--,window.size().width<960&&toast(listr.navi.sections[listr.navi.active],1e3),$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[listr.navi.active]).position().top},250)}),$("#naviDown a.navi").click(function(){listr.navi.active++,window.size().width<960&&toast(listr.navi.sections[listr.navi.active],1e3),$("html,body").animate({scrollTop:$("div.container."+listr.navi.sections[listr.navi.active]).position().top},250)})}),$(window).scroll(function(){listr.navi.update();var i=window.size(),n=$(window).scrollTop();n<i.height/2?listr.navi.active=0:n+1.2*i.height>=$(document).height()?listr.navi.active=listr.navi.sections.length-1:$.each(listr.navi.sections,function(i,a){n>$("div.container."+a).position().top-250&&(listr.navi.active=i)}),listr.navi.active>0?$("#naviUp").show():$("#naviUp").hide(),listr.navi.active<listr.navi.sections.length-1?$("#naviDown").show():$("#naviDown").hide(),i.halfSize?($("div.container.media div.opts").css("height","100px"),$("div.container.media div.opts").css({"margin-top":"-20px",height:"100px"}),$("div.container.media div.opts span.title").css("display","block"),$("#naviDown").css("background-color",""),$("#naviDown span.btns a.btn-large").addClass("wasLarge").removeClass("btn-large"),$("#naviDown span.btns").detach().appendTo("div.navBtns"),$("div.navBtns a i.mdi-navigation-menu").parent("a").hide()):("none"!=$("div.container.media div.content").css("max-width")&&$("div.container.media div.content").css("max-width",i.width-320+"px").children("div,iframe").css("max-width",i.width-320+"px"),$("div.container.media div.opts").css("height",""),$("div.container.media div.opts span.title").hide(),listr.opts.aboutMax?$("div.container.media div.opts").css({"margin-top":"",height:"250px"}):$("div.container.media div.opts").css({"margin-top":"",height:"54px"}),$("div.container.media div.opts span.title").css("display","none"),"media"===listr.navi.sections[listr.navi.active]&&8>n&&""!=$("div.container.media").css("min-height")?$("#naviDown").css("background-color",$("div.container.media").css("background-color")):$("#naviDown").css("background-color",""),$("div.navBtns span.btns").detach().prependTo("#naviDown"),$("#naviDown a.wasLarge").addClass("btn-large").removeClass("wasLarge"),$("div.navBtns a i.mdi-navigation-menu").parent("a").show(),"media"!=listr.navi.sections[listr.navi.active]&&"grid"!=listr.navi.sections[listr.navi.active]&&"links"!=listr.navi.sections[listr.navi.active]?$("#naviDown span.btns").hide():$("#naviDown span.btns").show());var a=i.width-$("div.media div.opts div.afterCont").width()-514;$("div.container.media div.opts div.progressBar").css("margin-left","18px"),a>59?$("div.container.media div.opts div.progressBar").width(a):$("div.container.media div.opts div.progressBar").hide(),$(window).scrollTop()>0||"media"!==listr.navi.sections[0]?$("#naviDown a.z-depth-light").addClass("z-depth-1").removeClass("z-depth-light"):$("#naviDown a.z-depth-1").removeClass("z-depth-1").addClass("z-depth-light")});
// feeds.js
listr.feeds={},listr.feeds.list=[],listr.feeds.subs=[],listr.feeds.nix=function(e){var t=listr.feeds.list[e];confirm('Remove "'+t.label+'" from feeds?')&&$.ajax({dataType:"json",url:"/delete/feed",method:"POST",data:t,success:function(t){if(void 0!==t.error)alert("Error: "+t.error);else{var d=$("div.container.feeds li.collection-item.idx-"+e).parent("div").parent("ul.collection");if(0==d.find("li.collection-item").length){var a=d.parent("div").attr("id").replace("feeds-","");d.parent("div").remove(),$("div.feeds ul.tabs li.tab:eq("+a+")").remove()}else $("div.container.feeds li.collection-item.idx-"+e).parent("div").remove();delete listr.feeds.list[e]}},error:function(e,t,d){alert("Error: invalid reply")}}),event.stopPropagation()},listr.feeds["radd.it"]={opts:[],optSelect:function(e,t){$(t).children("div").children("b").text()},load:function(e){if(listr.user&&0==e.indexOf("/"+listr.user+"/liked/")){var t=e.split("/liked/")[1];return void setTimeout(function(){$("#liked-"+t+" li.idx-all").click()})}var d=[];$.each(listr.feeds.list,function(e,t){var a=t.url.replace("/r/","");"reddit"===t.source&&0==t.url.indexOf("/r/")&&-1===$.inArray(a,d)&&d.push(a)}),$.each(listr.feeds.subs,function(e,t){-1===$.inArray(t,d)&&d.push(t)});var a={bucket:listr.bucket,subs:d};$("#loading").show(),$.ajax({method:"POST",dataType:"json",data:a,url:e.replace("http://","https://"),success:function(e){if($("#loading").hide(),void 0!==e.error)return void alert("Error: "+e.error);if(void 0===e.links)alert("Invalid data!"+ENTER+ENTER+"Please email ohno/at/radd.it with your username and what you're trying to do.");else{listr.opts.clearOnLoad&&listr.links.clear(),listr.links.batchPush(!0),$.each(e.links,function(e,t){(void 0===t.thumb||0!=t.thumb.indexOf("http"))&&(t.thumb=listr.thumb);var d={};void 0!==t.permalink&&(d={permalink:t.permalink});var a={};void 0!==t.meta&&(a=t.meta);var i="";void 0!==t.subreddit&&(i=t.subreddit);var l="";void 0!==t.descrip&&(l=t.descrip);var r="";void 0!==t.name&&(r=t.name),listr.links.push({url:t.url,title:t.title,author:t.author,thumb:t.thumb,related:d,meta:a,feed:"radd.it",subreddit:i,descrip:l,id_feed:r})}),listr.links.batchPush(!1);var t="No direct URL available.";$("#share-url,#share-embed").val(t)}},error:function(e,t,d){alert("Error loading from radd.it!"+ENTER+ENTER+t),$("#loading").hide(),console.log("radd.it load error",t,d)}})}},listr.feeds.suggested={opts:[],optSelect:function(e,t){},load:function(e){setTimeout(function(){$("div.liked div.content div.links ul.suggested").length>0?$("div.liked div.content div.links ul.suggested li:first").click():0==listr.user?alert("You must be logged-in to get suggestions!"):alert("Oopsie, no suggested links found!")})}},listr.feeds.empty={opts:[],optSelect:function(e,t){},load:function(e){listr.links.clear(),$("div.container.links").show(),$(window).resize(),$("html,body").animate({scrollTop:$("div.container.links").position().top},250)}},listr.feeds.playlist={opts:[],optSelect:function(e,t){var d=$(t).children("div").children("b").text();console.log("playlist optSelect: "+d)},load:function(e){$("#loading").show(),$.ajax({dataType:"json",url:e.replace("http://","https://"),success:function(t){if(void 0===t.links)alert("Invalid playlist file!"+ENTER+ENTER+"Email ohno/at/radd.it with the URL of this playlist and I'll try to fix it!");else{listr.opts.clearOnLoad&&listr.links.clear(),listr.links.batchPush(!0),$.each(t.links,function(e,t){listr.links.push({url:t.url,title:t.title,thumb:t.thumb,related:t.related,feed:"playlist"})}),listr.links.batchPush(!1);var d="http://radd.it"+e.replace("/js/","/").replace(".js","")+"/"+listr.bucket;$("#share-url").val(d),$("#share-embed").val("<iframe height='640' width='320' src='"+d+(-1==d.indexOf("?")?"?embed":"&embed")+"'></iframe>")}$("#loading").hide()},error:function(e,t,d){"parsererror"==t?alert("Your playlist has become corrupted!  This isn't your fault."+ENTER+ENTER+"Email ohno/at/radd.it with the URL of this playlist and I'll try to fix it!"):alert("Error loading playlist!"+ENTER+ENTER+t),$("#loading").hide(),console.log("playlist load error",t,d)}})}},listr.feeds.reddit={opts:["hot","new","top","keyword","flair","random"],optsDesc:["by score and newness","by newness","by score","search for keyword","search by flair","randomly picked (slow loading!)"],optSelect:function(e,t){if(void 0===listr.feeds.list[e])return void console.log("ERROR: idx "+e+" not found in feed list",listr.feeds.list);var d=$("input[name=feed"+e+"Opts]:checked",t).val();if("hot"==d)this.load(listr.feeds.list[e].url);else if("new"==d)this.load(listr.feeds.list[e].url+(-1==listr.feeds.list[e].url.indexOf("?")?"/":"&sort=")+"new");else if("top"==d){for(var a=["today","this week","this month","this year"],i=["top links from the last 24 hours","top links in the last week","top links in the last month","top links in the last year"],l='<form class="secondary-reveal-temp" action="#" onchange="listr.feeds[\'reddit\'].optSelect('+e+', this);">',r=a.length,s=0;r>s;s++){var o=a[s],n=i[s],c="feed"+e+"Opts",f="redditTop"+o,u="";0==o.indexOf("-")&&(u=" disabled",o=o.substr(1)),l+="<p><input "+u+'name="'+c+'" type="radio" id="'+f+'" value="'+o+'" /><label for="'+f+'"><b>'+o+"</b> "+n+"</label></p>"}l+="</form>",$(t).hide("slideup"),$(t).parent().append(l)}else if("today"==d)this.load(listr.feeds.list[e].url+(-1==listr.feeds.list[e].url.indexOf("?")?"/top?sort=top&t=day":"&sort=top&t=day"));else if("this week"==d)this.load(listr.feeds.list[e].url+(-1==listr.feeds.list[e].url.indexOf("?")?"/top?sort=top&t=week":"&sort=top&t=week"));else if("this month"==d)this.load(listr.feeds.list[e].url+(-1==listr.feeds.list[e].url.indexOf("?")?"/top?sort=top&t=month":"&sort=top&t=month"));else if("this year"==d)this.load(listr.feeds.list[e].url+(-1==listr.feeds.list[e].url.indexOf("?")?"/top?sort=top&t=year":"&sort=top&t=year"));else if("flair"==d){$("#loading").show();var h=listr.feeds.list[e].url.split("?")[0];h.lastIndexOf("/")===h.length-1&&(h=h.substr(0,h.length-1)),0!==h.indexOf("http")&&(h="https://www.reddit.com"+h),h+="/search.json?q=self%3A0&sort=relevance&restrict_sr=on&t=week&limit=100",$.ajax({dataType:"json",url:h.replace("http://","https://"),success:function(t){if(void 0!==t.data&&"Listing"===t.kind){var d=[],a=!1;if($.each(t.data.children,function(e,t){null!==t.data.link_flair_text?(-1===$.inArray(t.data.link_flair_text,d)&&d.push(t.data.link_flair_text),a=!0):a||null===t.data.link_flair_css_class||-1!==$.inArray(t.data.link_flair_css_class,d)||d.push(t.data.link_flair_css_class)}),d.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),0===d.length)alert("No flair found for posts in this sub.");else{$("div.reddit-flair-select select").length>0&&$("#"+$("div.reddit-flair-select span.select-dropdown").data("activates")).remove();var i='<label>Select flair to load</label><select id="reddit-flair-query">';$.each(d,function(e,t){i+='<option value="'+t+'">'+t+"</option>"}),i+="</select>",$("div.reddit-flair-select").html(i),$("#reddit-flair-query").material_select(),$("#reddit-flair-url").val(listr.feeds.list[e].url),$("#reddit-flair").openModal()}}else alert("Nope.  Invalid reply from reddit.  Is it down?"),console.log("ERROR: flair check",t);$("#loading").hide()},error:function(e,t,d){alert("Error: invalid reply"),$("#loading").hide()}})}else if("keyword"==d)$("#reddit-search-url").val(listr.feeds.list[e].url),$("#reddit-search").openModal();else if("random"==d){var h=listr.feeds.list[e].url;listr.feeds["reddit.com"].loadRandom(h)}else console.log("ERROR: unknown reddit opt "+d)},loadRandom:function(e){return-1==e.indexOf("/r/")?void alert("Error: Sorry, random only works with subreddits!"+ENTER+ENTER+"You can use /r/sub1+sub2 but too many subs breaks reddit's search!"):(listr.opts.randomLoad=!1,e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1)),0!==e.indexOf("http")&&(e="https://www.reddit.com"+e),-1!==e.indexOf("/",e.indexOf("/r/")+3)&&(e=e.substr(0,e.indexOf("/",e.indexOf("/r/")+3))),e=e.split(".json")[0].split("?")[0],void $.ajax({dataType:"json",url:e.split("+")[0].replace("http://","https://")+"/about.json",success:function(t){function d(t){if(void 0===t)var t=0;var a=["new","top","comments"][Math.floor(3*Math.random())],f=25+Math.ceil(25*Math.random()),u=e+"/search.json?q=timestamp%3A"+s+".."+(s+n)+"&syntax=cloudsearch&restrict_sr=on&limit="+f+"&sort="+a;o||(u=e+"/search.json?q=self%3A0%20a&sort="+a+"&t=all&limit="+f+"&restrict_sr=on"),$.ajax({dataType:"json",url:u.replace("http://","https://"),success:function(e){if(void 0!==e.data&&"Listing"===e.kind)if(o?e.data.children.length<f&&(e.data.children.length<=f/5?o=!1:(n*=2,n>r/2&&(n=Math.round(r/2)))):o=!0,$.each(e.data.children,function(e,t){var d=t.data.thumbnail;try{(0!==d.indexOf("http")||-1===t.data.media.oembed.thumbnail_url.indexOf("i.ytimg.com"))&&(d=t.data.media.oembed.thumbnail_url)}catch(a){}var i="";try{i=t.data.media.oembed.description}catch(a){}var l="";try{l=t.data.media.oembed.title}catch(a){}var r="";try{r=t.data.media.oembed.author_name}catch(a){}var s="";try{s=t.data.media.oembed.author_url}catch(a){}listr.links.push({url:t.data.url,title:t.data.title,thumb:d,descrip:i,feed:"reddit",id_feed:t.data.name,utc_feed:t.data.created,author:t.data.author,score:t.data.score,subreddit:t.data.subreddit,related:{permalink:t.data.permalink},meta:{nsfw:t.data.over_18},domain:t.data.domain,uploader:r,uploader_title:l,uploader_url:s})}),listr.links.batchLinks.length>=100||t>9)listr.links.batchLinks.shuffle(),$.each(listr.links.batchLinks,function(e,t){t.idx=c+e}),listr.links.batchPush(!1),$("#loading").hide();else{for(s+=n+Math.floor(Math.random()*r);s>=l;)s=i+Math.floor(Math.random()*r);setTimeout(function(){d(t+1)},listr.opts.ajaxDelay/10)}else alert("Error loading reddit data.  Is it down?")},error:function(e,t,d){listr.links.batchLinks.shuffle(),$.each(listr.links.batchLinks,function(e,t){t.idx=c+e}),listr.links.batchPush(!1),$("#loading").hide()}})}if(void 0===t.data||!$.isNumeric(t.data.created_utc))return alert("Error getting subreddit data."),void console.log("about.json error",t);var a=e.replace("https://","http://").replace("//www.","//").replace("//reddit.com/","//radd.it/").replace(".json","").replace("?limit=50","").replace("&limit=50","")+"/"+listr.bucket+"?random";$("#share-url").val(a),$("#share-embed").val("<iframe height='640' width='320' src='"+a+(-1==a.indexOf("?")?"?embed":"&embed")+"'></iframe>");var i=t.data.created_utc,l=Math.floor((new Date).getTime()/1e3),r=l-i,s=i+Math.floor(Math.random()*r/2),o=!0,n=Math.round(r/50);604800>n&&(n=604800);var c=listr.links.list.length;listr.opts.clearOnLoad&&listr.links.clear(),listr.links.batchPush(!0),d(),$("#loading").show()},error:function(e,t,d){alert("Error getting reddit data.  Are you using a valid URL?")}}))},load:function(e){if(e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1)),0!==e.indexOf("http")&&(e="https://www.reddit.com"+e),-1===e.indexOf(".json")){var t=e.indexOf("?");-1===t?e+=".json":e=e.substr(0,t)+".json"+e.substr(t)}return-1===e.indexOf("limit=")&&(e+=-1===e.indexOf("/comments/")?(-1===e.indexOf("?")?"?":"&")+"limit=50":(-1===e.indexOf("?")?"?":"&")+"limit=100"),listr.opts.randomLoad?this.loadRandom(e):($("#loading").show(),$("div.container.feeds div.secondary-reveal form").show(),$("div.container.feeds form.secondary-reveal-temp").remove(),$("div.container.feeds div.secondary-reveal").hide(),$("div.container.feeds ul li div a i.mdi-hardware-keyboard-arrow-up").removeClass("mdi-hardware-keyboard-arrow-up").addClass("mdi-hardware-keyboard-arrow-down"),void $.ajax({dataType:"json",url:e.replace("http://","https://"),success:function(t){if(-1==e.indexOf("after=")){listr.opts.clearOnLoad&&listr.links.clear();var d=e.replace("https://","http://").replace("//www.","//").replace("//reddit.com/","//radd.it/").replace(".json","").replace("?limit=50","").replace("&limit=50","")+"/"+listr.bucket;$("#share-url").val(d),$("#share-embed").val("<iframe height='640' width='320' src='"+d+(-1==d.indexOf("?")?"?embed":"&embed")+"'></iframe>")}if(void 0!==t[0]&&"Listing"===t[0].kind&&void 0!==t[1]&&"Listing"===t[1].kind){if(listr.links.batchPush(!0),listr.opts.allowSelftext&&void 0!==t[0].data.children[0].data.selftext_html&&null!==t[0].data.children[0].data.selftext_html){var a=t[0].data.children[0].data.selftext_html,i=$("<div />").html(a.htmlDecode()).find("a");i.each(function(e){void 0!==$(this).attr("href")&&0==$(this).attr("href").indexOf("http")&&listr.links.push({url:$(this).attr("href"),title:$(this).html(),feed:"reddit",id_feed:t[0].data.children[0].data.name,utc_feed:t[0].data.children[0].data.created,author:t[0].data.children[0].data.author,score:t[0].data.children[0].data.score,subreddit:t[0].data.children[0].data.subreddit,related:{permalink:t[0].data.children[0].data.permalink}})})}else-1==t[0].data.children[0].data.url.indexOf("reddit.com/")&&listr.links.push({url:t[0].data.children[0].data.url,title:t[0].data.children[0].data.title,feed:"reddit",id_feed:t[0].data.children[0].data.name,utc_feed:t[0].data.children[0].data.created,author:t[0].data.children[0].data.author,score:t[0].data.children[0].data.score,subreddit:t[0].data.children[0].data.subreddit,related:{permalink:t[0].data.children[0].data.permalink}});!function n(e,d){$.each(e,function(e,a){if("t1"==a.kind){if(null!=a.data.body_html){var i=$("<div />").html(a.data.body_html.htmlDecode()).find("a");i.each(function(e){void 0!==$(this).attr("href")&&0==$(this).attr("href").indexOf("http")&&listr.links.push({url:$(this).attr("href"),title:$(this).html(),feed:"reddit",id_feed:a.data.name,utc_feed:a.data.created,author:a.data.author,score:a.data.score,subreddit:a.data.subreddit,related:{permalink:t[0].data.children[0].data.permalink+a.data.id}})})}""!=a.data.replies&&n(a.data.replies.data.children,d+1)}})}(t[1].data.children,0),listr.links.batchPush(!1)}else if("wikipage"===t.kind)if(void 0!==t.data.content_html&&t.data.content_html.length){listr.links.batchPush(!0);var a=t.data.content_html,i=$("<div />").html(a.htmlDecode()).find("a");i.each(function(d){void 0!==$(this).attr("href")&&0==$(this).attr("href").indexOf("http")&&listr.links.push({url:$(this).attr("href"),title:$(this).html(),feed:"reddit",id_feed:e.replace("https:","").replace("http:","").replace("//","").replace("www.","").replace("reddit.com/","").replace(".json",""),utc_feed:t.data.revision_date,author:t.data.revision_by.data.name,score:0,subreddit:e.split("/r/")[1].split("/")[0],related:{permalink:e}})}),listr.links.batchPush(!1)}else console.log("ERROR: wikipage has no content_html");else if("Listing"===t.kind&&void 0!==t.data){if(listr.links.batchPush(!0),-1!==e.indexOf("/by_id/")&&1===t.data.children.length){if(-1===t.data.children[0].data.url.indexOf("reddit.com/"))listr.links.push({url:t.data.children[0].data.url,title:t.data.children[0].data.url.title,feed:"reddit",id_feed:t.data.children[0].data.name,utc_feed:t.data.children[0].data.created,author:t.data.children[0].data.author,score:t.data.children[0].data.score,subreddit:t.data.children[0].data.subreddit,related:{permalink:t.data.children[0].data.permalink}});else if(void 0!==t.data.children[0].data.selftext_html&&null!==t.data.children[0].data.selftext_html){var a=t.data.children[0].data.selftext_html,i=$("<div />").html(a.htmlDecode()).find("a");i.each(function(e){void 0!==$(this).attr("href")&&0==$(this).attr("href").indexOf("http")&&listr.links.push({url:$(this).attr("href"),title:$(this).html(),feed:"reddit",id_feed:t.data.children[0].data.name,utc_feed:t.data.children[0].data.created,author:t.data.children[0].data.author,score:t.data.children[0].data.score,subreddit:t.data.children[0].data.subreddit,related:{permalink:t.data.children[0].data.permalink}})})}}else $.each(t.data.children,function(e,t){if(listr.opts.allowNSFW||!t.data.over_18){var d=t.data.thumbnail;try{(0!==d.indexOf("http")||-1===t.data.media.oembed.thumbnail_url.indexOf("i.ytimg.com"))&&(d=t.data.media.oembed.thumbnail_url)}catch(a){}var i="";try{i=t.data.media.oembed.description}catch(a){}var l="";try{l=t.data.media.oembed.title}catch(a){}var r="";try{r=t.data.media.oembed.author_name}catch(a){}var s="";try{s=t.data.media.oembed.author_url}catch(a){}listr.links.push({url:t.data.url,title:t.data.title,thumb:d,descrip:i,feed:"reddit",id_feed:t.data.name,utc_feed:t.data.created,author:t.data.author,score:t.data.score,subreddit:t.data.subreddit,related:{permalink:t.data.permalink},meta:{nsfw:t.data.over_18},domain:t.data.domain,uploader:r,uploader_title:l,uploader_url:s}),-1===$.inArray(t.data.subreddit,listr.feeds.subs)&&listr.feeds.subs.push(t.data.subreddit)}});if(listr.links.batchPush(!1),null!==t.data.after){var l=e,r=l.indexOf("after=");if(-1!==r){var s=l.indexOf("&",r);-1==s&&(s=l.length),l=l.substr(0,r-1)+l.substr(s+1)}var o="";-1!==e.indexOf("/m/")?o="Multi":-1!==e.indexOf("/r/")?o=e.split("/r/")[1].split(".")[0].split("/")[0].split("?")[0]:-1!==e.indexOf("/search")&&(label="Search Results"),""==o&&(o=e.substr(0,16)+(e.length>16?"&hellip;":"")),listr.listings.push({feed:"reddit",url:l+(-1===l.indexOf("?")?"?":"&")+"after="+t.data.after,label:o,descrip:"Load more from "+o})}}else console.log("ERROR: reddit returned unknown format.",t);$("#loading").hide()},error:function(e,t,d){alert("Error: invalid reply"),$("#loading").hide()}}))}},listr.feeds["youtube-playlist"]={opts:[],optSelect:function(e,t){var d=$(t).children("div").children("b").text(),a=$(t).find("div.secondary-reveal");if("Youtube Playlist"===d){var i='<form id="yt-playlist-form"><div class="row" style="margin-top:10px"><div class="input-field col s9 offset-s1"><input id="yt-playlist-query" type="text"><label for="yt-playlist-query">Search term <i>or</i> URL of playlist</label></div><div class="col s2"><a onclick="listr.feeds[\'youtube-playlist\'].search();" class="reddit-search-go btn-floating btn-large waves-effect waves-light green darken-2"><i class="mdi-action-search"></i></a></div></div><div class="yt-playlist-results row hidden"><div class="s11 offset-s1"></div></div></form>';a.html(i)}},load:function(e,t){if(void 0===t)var t=!1;$("#loading").show();var d=!1;if(-1!=e.indexOf("list="))d=e.split("list=")[1].split("&")[0].split("#")[0],("PL"==d.substr(0,2)||"LL"==d.substr(0,2))&&(d=d.substr(2));else{if(-1==e.indexOf("/channel/"))return-1!=e.indexOf("/user/")?(d=e.split("/user/")[1].split("/")[0].split("?")[0],void $.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/channels?part=contentDetails&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&forUsername="+encodeURIComponent(d),success:function(e){if(void 0!==e.items&&e.items.length>0)try{listr.feeds["youtube-playlist"].load("https://youtube.com/playlist?list="+e.items[0].contentDetails.relatedPlaylists.uploads)}catch(t){}}})):-1!=e.indexOf("v=")?void setTimeout(function(){listr.links.push({url:"https:/"+e})}):void console.log("ERROR: youtube-playlist unknown URL",e);d=e.split("/channel/")[1].split("/")[0].split("?")[0].split("#")[0].replace("UC","UU")}listr.opts.clearOnLoad&&listr.links.clear(),listr.links.batchPush(!0),function a(e){$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&maxResults=50&playlistId="+encodeURIComponent(d)+(""===e?"":"&pageToken="+e),success:function(e){if(void 0!==e.items&&e.items.length>0)if($.each(e.items,function(e,t){var d=t.snippet,a=listr.thumb;try{a=d.thumbnails.standard.url}catch(i){}if(a==listr.thumb)try{a=d.thumbnails.high.url}catch(i){}"youtube#video"===d.resourceId.kind?listr.links.push({url:"http://youtube.com/watch?v="+d.resourceId.videoId,title:d.title,feed:"youtube",id_feed:d.resourceId.videoId,utc_feed:d.publishedAt,author:d.channelTitle,descrip:d.description,thumb:a}):console.log("ERROR?  unknown kind from youtube playlist load: "+d.resourceId.kind)}),void 0!==e.nextPageToken)a(e.nextPageToken);else{listr.links.batchPush(!1),$("#loading").hide();var i="http://radd.it/youtube/list="+d;$("#share-url").val(i),$("#share-embed").val("<iframe height='640' width='320' src='"+i+(-1==i.indexOf("?")?"?embed":"&embed")+"'></iframe>"),t&&t()}else alert("Youtube doesn't recognize that as a valid playlist URL."),$("#loading").hide()},error:function(e,t,d){alert("Error retreiving Youtube playlist. :/"),console.log("youtube playlist error: "+t,d)}})}("")},search:function(){function e(e){var t="";$.each(e,function(e,d){t+='<div class="link-dsp z-depth-1 idx-'+d.idx+'"><img class="thumb z-depth-1 hide-on-small-only" src="'+d.thumb+'"><h5><span class="title">'+d.title+"</span></h5><p>"+d.descrip+"</p><div class=\"opts\"><a onClick=\"listr.feeds['youtube-playlist'].load('"+d.url+'\');" class="waves-effect waves-light btn"><i class="mdi-action-visibility left"></i>load</a><a target="_blank" href="'+d.url+'" class="waves-effect waves-light btn"><i class="mdi-action-open-in-new left"></i>open</a></div></div>'}),$("div.container.feeds div.yt-playlist-results").html(t).show()}var t=$("#yt-playlist-query").val();0===t.indexOf("http")&&-1!==t.indexOf("list=")?this.load(t):listr.sources["youtube.com"].search(t,e,{types:"playlist,channel"})}},$(document).ready(function(){$("#feedCats").change(function(e){var t=$("#feedCats option:selected").val();$("div.container.feeds div.section div.links div.results").hide(),$("#feeds-"+t).show()});var e=0;$("div.feeds div ul li.collection-item").each(function(){var t=$(this).attr("class").split(/\s+/),d="",a=!0;if($.each(t,function(e,t){0==t.indexOf("feed-")&&(d=t.replace("feed-","")),"no-opts"===t&&(a=!1)}),void 0===listr.feeds[d])return void console.log("ERROR: no feed data for "+d);if(a){var i=listr.feeds[d].opts,l=listr.feeds[d].optsDesc,r=i.length;if(0===r)$(this).click(function(){"none"==$(this).find("div.secondary-reveal").css("display")&&listr.feeds[d].optSelect(e,this)});else{for(var s="<form onchange=\"listr.feeds['"+d+"'].optSelect("+e+', this);">',o=0;r>o;o++){var n=i[o],c=l[o],f="feed"+e+"Opts",u="fd"+e+"o"+n,h="";0==n.indexOf("-")&&(h="disabled ",n=n.substr(1)),s+="<p><input "+h+'class="with-gap" name="'+f+'" type="radio" id="'+u+'" value="'+n+'" /><label for="'+u+'"><b>'+n+"</b> "+c+"</label></p>"}s+="</form>",$(this).find("div.secondary-reveal").append(s)}}else $(this).click(function(){var e=$(this).attr("class").split(/\s+/),t=!1;$.each(e,function(e,d){0==d.indexOf("idx-")&&(t=parseInt(d.replace("idx-","")))}),t!==!1?listr.feeds[d].load(listr.feeds.list[t].url):console.log("ERROR: no feed found",this)});$(this).addClass("idx-"+e),e++}),setTimeout(function(){$("div.feeds div ul.collection").each(function(e,t){var d=$(t).find("li.collection-item"),a="";$.each(d,function(e,t){var d=!1,i="",l=$(t).attr("class").split(/\s+/);$.each(l,function(e,t){0==t.indexOf("idx-")&&(d=parseInt(t.replace("idx-",""))),0==t.indexOf("feed-")&&(i=t.replace("feed-",""))}),d!==!1&&"reddit"==listr.feeds.list[d].source&&0==listr.feeds.list[d].url.indexOf("/r/")&&(a+=(""==a?"":"+")+listr.feeds.list[d].url.split("/r/")[1].split("/")[0].split("?")[0])}),-1!==a.indexOf("+")&&$(t).prepend("<div class=\"col s12 m6 l4\"><li onclick=\"event.stopPropagation();listr.feeds['reddit'].load('/r/"+a+'\');" class="card collection-item feed-all no-opts z-depth-2"><div><div class="details"><b>Load all subs</b><br><i>/r/'+a+'</i></div></div><div style="clear:both;"><a class="secondary-content blue-text text-darken-4 tooltipped" data-position="left" data-tooltip="load feed"><i class="small mdi-hardware-keyboard-arrow-right"></i></a></div></div>')}),$.each(listr.feeds.list,function(e,t){"~~|Special"!=t.cat&&listr.broadcast({action:"push",target:"feeds",feed:t})})}),$("div.container.feeds").on("click","ul.collection li.collection-header",function(e){$("div.container.feeds li.collection-item").hide("slideup"),$(this).parent("div").parent("ul").find("li.collection-item").each(function(e,t){$(t).slideDown()})}),$("div.container.feeds").on("click","ul.collection li.collection-item.collection-reveal",function(e){if(!$(e.target).parents("div.secondary-reveal").length){var t=$(this).find("div.secondary-reveal");t.find("input").prop("checked",!1),"none"==t.css("display")?($(this).find("i.mdi-hardware-keyboard-arrow-down").removeClass("mdi-hardware-keyboard-arrow-down").addClass("mdi-hardware-keyboard-arrow-up"),$("div.secondary-reveal form").show(),$("form.secondary-reveal-temp").remove(),$("div.secondary-reveal").hide(),t.show()):($(this).find("i.mdi-hardware-keyboard-arrow-up").removeClass("mdi-hardware-keyboard-arrow-up").addClass("mdi-hardware-keyboard-arrow-down"),t.hide())}}),$("#reddit-flair a.reddit-flair-load").click(function(e){e.preventDefault();var t=$("#reddit-flair-url").val(),d=$("#reddit-flair-query option:selected").val(),a=$("#reddit-flair-sort option:selected").val();"hot"==a?a+="&t=day":"new"==a?a+="&t=month":-1!==a.indexOf("-")&&(a=a.substr(0,a.indexOf("-"))+"&t="+a.substr(a.indexOf("-")+1)),$("#reddit-flair").closeModal(),listr.feeds.reddit.load(t+"/search?sort="+a+"&restrict_sr=on&q=flair%3A"+d)}),$("#reddit-search a.reddit-search-go").click(function(){var e=$("#reddit-search-url").val(),t=$("#reddit-search-query").val();if(null==t||t.length<3)return void alert("Search must be at least 3 characters.  Try again.");var d=$("#reddit-search-sort option:selected").val();"hot"==d?d+="&t=day":"new"==d?d+="&t=month":-1!==d.indexOf("-")&&(d=d.substr(0,d.indexOf("-"))+"&t="+d.substr(d.indexOf("-")+1)),$("#reddit-search").closeModal(),listr.feeds.reddit.load(e+"/search?sort="+d+"&restrict_sr=on&q="+t)}),$("a.addFeed").click(function(e){$("#addfeed-url,#addfeed-direct-url,#addfeed-cat-new").val("").attr("disabled",!1),$("div.addfeed-cat-new").hide(),$("#addfeed-reddit-url option:eq(0)").attr("selected",!0),$("#addfeed-reddit-url").appendTo("#addFeed div.addfeed-reddit div.addfeed-reddit-url"),$("#addfeed-reddit-url").parent("div.addfeed-reddit-url").find("div.select-wrapper").remove(),$("#addfeed-reddit-url").removeClass("initialized").material_select(),$("#addfeed-defaults-cat option:eq(0)").attr("selected",!0),$("#addfeed-defaults-cat").appendTo("#addFeed div.addfeed-defaults div.addfeed-defaults-cat"),$("#addfeed-defaults-cat").parent("div.addfeed-defaults-cat").find("div.select-wrapper").remove(),$("#addfeed-defaults-cat").removeClass("initialized").material_select(),$("#addfeed-cat option:eq(0)").attr("selected",!0),$("#addfeed-cat").appendTo("#addFeed div.step3 div.addfeed-cat"),$("#addfeed-cat").parent("div.addfeed-cat").find("div.select-wrapper").remove(),$("#addfeed-cat").removeClass("initialized").material_select(),$("#addFeed div.step2,#addFeed div.step3").hide(),$("#addFeed div.step1").show()}),$("div.container.media").on("click","a.addFeed",function(e){$("#addFeed div.step3 div.modal-footer .media").show(),$("#addFeed div.step3 div.modal-footer .feeds").hide()}),$("div.container.feeds a.addFeed").click(function(e){$("#addFeed div.step3 div.modal-footer .media").hide(),$("#addFeed div.step3 div.modal-footer .feeds").show()}),$("#addFeed div.step1 div.card").click(function(e){var t=$(this).attr("class").split(" ")[1];$("#addFeed div.step1").hide(),$("#addFeed div.step2."+t).show(),"addfeed-direct"==t&&$("#addfeed-direct-url").focus()}),$("#addFeed div.step2").on("click","a.step3",function(e){var t=$(this).attr("class").split(" ")[1],d=!0;if("addfeed-direct"===t){var a=$("#addfeed-direct-url").val();if(""===a)return void alert("You must enter a URL!");if(0!==a.indexOf("/")&&0!==a.indexOf("http"))return void alert("That doesn't look like a valid URL!");if(-1!==a.indexOf("youtube.com/")){if(t="addfeed-youtube",-1!==a.indexOf("list=")){var i=a.split("list=")[1].split("&")[0];a="https://youtube.com/playlist?list="+("PL"==i.substr(0,2)||"LL"==i.substr(0,2)?"":"PL")+i}}else{if(-1!==a.indexOf("/me/"))return void alert("You must use the full URL (not /me/) when adding a multireddit!"+ENTER+ENTER+"Ex: https://www.reddit.com/user/evilnight/m/truemusic");if(-1===a.indexOf("reddit.com/")&&0!==a.indexOf("/r/")&&0!==a.indexOf("/user/")&&0!==a.indexOf("/by_id/"))return void alert("Sorry, that's not a supported URL.");t="addfeed-reddit"}$("#addfeed-url").val(a).parent("div").children("label").addClass("active")}else if("addfeed-defaults"===t){var a=$("#addfeed-defaults-cat option:selected").val();if(0===a.indexOf("|"))return void alert("Gotta pick a category from the pulldown.");$('#addfeed-cat option[value="'+a+'"]').attr("selected",!0),$("#addfeed-cat").appendTo("#addFeed div.step3 div.addfeed-cat"),$("#addfeed-cat").parent("div.addfeed-cat").find("div.select-wrapper").remove(),$("#addfeed-cat").removeClass("initialized").material_select(),$("#addfeed-source").val("defaults"),$("#addfeed-label").val("All feeds from "+a).attr("disabled",!0).parent("div").children("label").addClass("active"),$("#addfeed-url,#addfeed-descrip").val("n/a").attr("disabled",!0).parent("div").children("label").addClass("active")}if("addfeed-reddit"===t){d=!1,$("#addfeed-source").val("reddit");var a=$("#addfeed-url").val();if(""===a){if(a=$("#addfeed-reddit-url option:selected").val(),0===a.indexOf("|"))return void alert("Gotta pick a sub or a multi from the pulldown.");$("#addfeed-url").val(a).parent("div").children("label").addClass("active");var l=$("#addfeed-reddit-url option:selected").text().replace(" ("+a+")","");$("#addfeed-label").val(l).parent("div").children("label").addClass("active")}if(a.lastIndexOf("/")===a.length-1&&(a=a.substr(0,a.length-1)),0!==a.indexOf("http")&&(a="https://www.reddit.com"+a),-1===a.indexOf(".json")){var r=a.indexOf("?");-1===r?a+=".json":a=a.substr(0,r)+".json"+a.substr(r)}$("#loading").show(),$.ajax({dataType:"json",url:a.replace("http://","https://"),success:function(e){if(-1===a.indexOf("/r/"))$("#addFeed div.step2").hide(),$("#addFeed div.step3").show(),$("#loading").hide();else{var t="https://www.reddit.com/r/"+a.replace(".json","").split("/r/")[1].split("/")[0].split("?")[0]+"/about.json";$.ajax({dataType:"json",url:t,success:function(e){"nsfw"!=listr.bucket&&"gaynsfw"!=listr.bucket&&e.data.over18?alert("Sorry but this is an adult sub.  Adult subs can only be added to the NSFW buckets."+ENTER+ENTER+"Is this wrong?  Email: exceptions/at/radd.it"):($("#addfeed-label").val(e.data.title.htmlDecode()).parent("div").children("label:not(.active)").addClass("active"),null!==e.data.public_description_html&&e.data.public_description_html.length>0?$("#addfeed-descrip").val($.trim(e.data.public_description_html.htmlDecode().replace(/<p>/g," ").replace(/<\/p>/g," ").htmlDecode())).parent("div").children("label").addClass("active"):null!==e.data.description_html&&e.data.description_html.length>0&&$("#addfeed-descrip").val($.trim(e.data.description_html.htmlDecode().replace(/<p>/g," ").replace(/<\/p>/g," ").htmlDecode())).parent("div").children("label").addClass("active"),$("#addFeed div.step2").hide(),$("#addFeed div.step3").show()),$("#loading").hide()},error:function(e,t,d){$("#addFeed div.step2").hide(),$("#addFeed div.step3").show(),$("#loading").hide()}})}},error:function(e,t,d){$("#loading").hide(),alert('"'+a.replace(".json","")+'" is not a valid reddit URL.')}})}else if("addfeed-youtube"===t){var a=$(this).parent("div.opts").find("a.addfeed-youtube-url").attr("href");if(""==$("#addfeed-url").val()){$("#addfeed-url").val(a).parent("div").children("label").addClass("active");var l=$(this).parents("div.link-dsp").find("h5 span.title").text();$("#addfeed-label").val(l).parent("div").children("label").addClass("active")}else a=$("#addfeed-url").val();if(-1==a.indexOf("list=")&&-1==a.indexOf("/channel/")&&-1==a.indexOf("/user/"))return void alert("Sorry, that's not a supported Youtube URL.");$("#addfeed-source").val("youtube-playlist")}else if(""==$("#addfeed-url").val())return void alert("Error: Unknown source "+t);d&&($("#addFeed div.step2").hide(),$("#addFeed div.step3").show())}),$("div.addfeed-reddit").find("span.select-dropdown").click(function(){$("#"+$(this).data("activates")).find("li:eq(0)").addClass("disabled")}),$("div.addfeed-youtube a.addfeed-youtube-playlist-go,div.addfeed-youtube a.addfeed-youtube-channel-go").click(function(){function e(e){var t="";$.each(e,function(e,d){t+='<div class="link-dsp z-depth-1" data-url="'+d.url.replace(/"/g,"&quot;")+'"><img class="thumb z-depth-1 hide-on-small-only" src="'+d.thumb+'"><h5><span class="title">'+d.title+"</span></h5><p>"+d.descrip+'</p><div class="opts"><a class="step3 addfeed-youtube waves-effect waves-light btn"><i class="mdi-content-add left"></i>add</a><a target="_blank" href="'+d.url+'" class="addfeed-youtube-url waves-effect waves-light btn"><i class="mdi-action-open-in-new left"></i>open</a></div></div>'}),$("div.addfeed-youtube div.addfeed-youtube-results").show().children("div.results").html(t)}var t=$("#addfeed-youtube-playlist-query").val(),d="playlist";$(this).hasClass("addfeed-youtube-channel-go")&&(t=$("#addfeed-youtube-channel-query").val(),d="channel"),listr.sources["youtube.com"].search(t,e,{types:d})}),$("#addfeed-cat").change(function(){var e=$("#addfeed-cat option:selected").val();"|addNewCat"===e?$("#addFeed div.step3 div.addfeed-cat-new").show().find("input").focus():($("#addfeed-cat-new").val(""),$("#addFeed div.step3 div.addfeed-cat-new").hide())}),$("#addFeed div.step3 a.save").click(function(){var e="",t=$("#addfeed-cat option:selected").val();"|nil"===t?e+=ENTER+"You must select a category.":"|addNewCat"===t&&(t=$("#addfeed-cat-new").val(),-1!==t.indexOf("|")&&0==$("#addfeed-is-default:checked").length?e+=ENTER+"Categories cannot contain a |.":t.length<3?e+=ENTER+"Category must be at least 3 characters.":$("select.cats option:first-child").after('<option value="'+t.replace(/"/g,'\\"')+'">'+t+"</option>"));var d=$("#addfeed-source").val();""===d&&(e+=ENTER+"Invalid source.  Which is a bug.");var a=$("#addfeed-label").val();a.length<3&&(e+=ENTER+"Label must be at least 3 characters.");var i=$("#addfeed-url").val();"defaults"!=d&&0!==i.indexOf("http")&&0!==i.indexOf("/")&&(e+=ENTER+"Invalid URL!");var l=$("#addfeed-descrip").val();if(""!==e)return void alert("Cannot save feed."+ENTER+e);var r=$(this).attr("class").split(" ")[1];$.ajax({dataType:"json",url:"/create/feed",method:"POST",data:{bucket:listr.bucket,cat:t,label:a,url:i,descrip:l,source:d,is_default:$("#addfeed-is-default:checked").length},success:function(e){void 0!==e.error?alert("Error: "+e.error):"another"===r?$("div.container.feeds a.addFeed").click():"reload"===r?location.reload(!0):"close"===r&&($("div.container.media a.addFeed").removeClass("grey").addClass("blue-grey"),$("#addFeed").closeModal())}})})});
// sources.js
listr.sources={},listr.sources["archive.org"]={buckets:["vids","music"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/details/"))return{};var e={};return e.kind="vid",e.source="Archive.Org",e.id_source=i.url.split("/details/")[1].split("/")[0].split("?")[0],e.id_uni="arc|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-archiveorg"> </div>'))},load:function(i){$("#media-archiveorg").html('<iframe src="https://archive.org/embed/'+i.id_source+'?autoplay=1" allowfullscreen></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-archiveorg").html("")}},listr.sources["audiomack.com"]={buckets:["music"],bgColor:"white",_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/song/")&&-1==i.url.indexOf("/album/")&&-1==i.url.indexOf("/playlist/"))return{};var e={};return e.kind=-1==i.url.indexOf("/album/")?"music":"album",e.source="Audiomack",e.id_source=i.url.substr(i.url.indexOf(".com/")+5).split("?")[0].split("#")[0],e.id_uni="amk|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-audiomack"> </div>'))},load:function(i){$("#media-audiomack").html('<iframe src="https://www.audiomack.com/'+i.id_source.replace("song/","embed4/").replace("album/","embed4-album/").replace("playlist/","embed4-playlist/")+'?play=true"></iframe>').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-audiomack").html("")}},listr.sources["bandcamp.com"]={buckets:["music"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1!=i.url.indexOf("daily.bandcamp.com"))return{};var e={};return e.url=i.url.replace("http://","https://"),e.kind="page",e.source="Bandcamp",e.id_source=e.url.replace("https://","").replace(".bandcamp.com/","").replace("bandcamp.com/",""),e.id_uni="bcp|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-bandcamp"> </div>'))},load:function(i){$("#media-bandcamp").html('<iframe src="'+i.url+(-1==i.url.indexOf("?")?"?":"&")+'output=embed" width="100%" height="100%" frameborder="0" allowFullScreen style="overflow-x:hidden;"></iframe>').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-bandcamp").html("")}},listr.sources["coub.com"]={buckets:["vids","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),1==i.url.indexOf("coub.com/view/"))return{};var e={};return e.kind="vid",e.source="coub.com",e.id_source=i.url.split("coub.com/view/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="cou|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-coub"> </div>'))},load:function(i){$("#media-coub").html('<iframe src="https://coub.com/embed/'+i.id_source+'?muted=false&autostart=true&originalSize=false&hideTopBar=false&startWithHD=true"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-coub").html("")}},listr.sources["clyp.it"]={buckets:["music"],bgColor:"#F2A15A",_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="music",e.source="clyp.it",e.id_source=i.url.split("clyp.it/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="cit|"+e.id_source,e},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-clypit"> </div>'))},load:function(i){$("#media-clypit").html('<iframe src="https://clyp.it/'+i.id_source+'/widget"></iframe>').show()},error:function(){},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-clypit").html("")}},listr.sources["dailymotion.com"]={buckets:["music","vids","nsfw","gaynsfw"],bgColor:"black",_ads:!0,_pauses:!0,_streams:!0,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,_progress:!1,defaults:function(i){if(-1==i.url.indexOf("/video/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="DailyMotion",e.id_source=i.url.split("/video/")[1].split("?")[0].split("#")[0],e.id_uni="dmn|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-dailymotion"> </div>'))},load:function(i){$("#media-dailymotion").html('<iframe src="https://www.dailymotion.com/embed/video/'+i.id_source+'?autoplay=1&id=media-dailymotion&info=0&logo=0&webkit-playsinline=1&api=postMessage" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>').show(),window.addEventListener?window.addEventListener("message",listr.sources["dailymotion.com"].msg,!1):window.attachEvent("onmessage",listr.sources["dailymotion.com"].msg,!1)},msg:function(i){if(void 0!==i.data&&void 0!==i.origin&&-1!=i.origin.indexOf("dailymotion.com")){var e=i.data.params();if("ended"==e.event)listr.links.next();else if("error"==e.event)console.log("dailymotion error",e,i);else if("canplay"==e.event)$("div.media div.opts div.progressBar").show(),$("#progress").width(0);else if("durationchange"==e.event)listr.links.current.meta.length=parseInt(e.duration.replace("sc","")),listr.links.update(listr.links.current);else if("timeupdate"==e.event){var t=e.time,s=listr.links.current.meta.length;if($.isNumeric(t)&&$.isNumeric(s)&&s>0){var n=t/s;$("#progress").stop().animate({width:Math.round(n*$("div.progressBar").width())},999,"linear"),listr.broadcast({action:"progress",target:"links",link:listr.links.current,pct:n,cur:Math.round(t).toMMSS()})}}}},pause:function(i){i?$("#media-dailymotion iframe")[0].contentWindow.postMessage("pause",$("#media-dailymotion iframe").attr("src").split("?")[0]):$("#media-dailymotion iframe")[0].contentWindow.postMessage("play",$("#media-dailymotion iframe").attr("src").split("?")[0])},search:function(i,e){e([])},seek:function(i){var e=listr.links.current.meta.length;$.isNumeric(e)&&e>0&&$("#media-dailymotion iframe")[0].contentWindow.postMessage("seek="+Math.round(e*i),$("#media-dailymotion iframe").attr("src").split("?")[0])},stop:function(){$("#media-dailymotion").html(""),window.addEventListener?window.removeEventListener("message",listr.sources["dailymotion.com"].msg):window.detachEvent("onmessage",listr.sources["dailymotion.com"].msg,!1)}},listr.sources["deviantart.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/art/"))return{};var e={};return e.kind="pic",e.source="DeviantArt",e.id_source=i.url.split("?")[0].split("#")[0],e.id_uni="dva|"+e.id_source,e._loaded=!1,setTimeout(function(){$.ajax({dataType:"json",url:"https://backend.deviantart.com/oembed?url="+e.id_source+"&format=jsonp&callback=?",success:function(e){listr.sources["deviantart.com"]._events--,i._loaded=!0,void 0!==e.type&&"photo"==e.type&&(void 0!==e.url&&(i.url=e.url),void 0!==e.thumbnail_url_200h&&(i.thumbnail=e.thumbnail_url_200h),listr.links.update(i))}})},++this._events*listr.opts.ajaxDelay),e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'))},load:function(i){i._loaded?$("#media-pic").html('<img src="'+i.url+'">').show():i.idx==listr.links.current.idx&&setTimeout(function(){listr.sources["deviantart.com"].load(i)},100)},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic").html("")}},listr.sources["flickr.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="pic",e.source="flickr",e._loaded=!1,-1!=i.url.indexOf("/sets/")?{}:(-1==i.url.indexOf("flic.kr/p/")&&-1==i.url.indexOf("/photos/")||(-1!=i.url.indexOf("flic.kr/p/")?e.id_source=i.url.split(".kr/p/")[1].split("/")[0]:e.id_source=i.url.split("/photos/")[1].split("/")[1].split("/")[0],e.id_uni="fkr|"+e.id_source,setTimeout(function(){$.ajax({dataType:"json",url:"https://api.flickr.com/services/rest/?&method=flickr.photos.getInfo&api_key=d205f63a767091de503b53f1bd93639a&format=json&jsoncallback=?&photo_id="+e.id_source,success:function(e){if(listr.sources["flickr.com"]._events--,"fail"==e.stat||void 0===e.photo)i.active=!1,i.descrip="Flickr error";else{var t=e.photo;i.url="https://farm"+t.farm+".static.flickr.com/"+t.server+"/"+t.id+"_"+t.secret+"_b.jpg",i.thumb="https://farm"+t.farm+".static.flickr.com/"+t.server+"/"+t.id+"_"+t.secret+"_t.jpg"}i._loaded=!0}})},++this._events*listr.opts.ajaxDelay)),e)},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'))},load:function(i){i._loaded?$("#media-pic").html('<img src="'+i.url+'">').show():i.idx==listr.links.current.idx&&setTimeout(function(){listr.sources["flickr.com"].load(i)},100)},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic").html("")}},listr.sources["google.com"]={buckets:["music","vids","pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!0,_loaded:!0,_player:!1,defaults:function(i){var e=i.url.params();if(void 0===e.url)return{};for(i.url=decodeURIComponent(e.url),i.url.lastIndexOf("/")==i.url.length-1&&(i.url=i.url.substr(0,i.url.length-1)),i.domain=i.url.split("/")[2];i.domain.split(".").length>2&&i.domain.indexOf(".")<i.domain.length-6;)i.domain=i.domain.substr(i.domain.indexOf(".")+1);if(i.ext="",-1==i.url.indexOf("?")&&i.url.lastIndexOf(".")>i.url.lastIndexOf("/")&&(i.ext=i.url.substr(i.url.lastIndexOf(".")+1)),void 0!==listr.sources[i.domain])i.key=i.domain;else{if(void 0===listr.sources[i.ext])return{};i.key=i.ext}return listr.sources[i.key].defaults(i)},error:function(){},init:function(){},load:function(){},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){}},listr.sources["gfycat.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="webm",e.source="GfyCat",e.id_source=i.url.split("/")[3].split("?")[0].split("#")[0].split(".")[0],e.id_source.length<10?{}:0==e.id_source.indexOf("Identifier")?{}:(e.id_uni="gfc|"+e.id_source,e.thumb="https://thumbs.gfycat.com/"+e.id_source+"-poster.jpg",e)},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-gfycat"> </div>'))},load:function(i){$("#media-gfycat").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+'" webkit-playsinline="" controls="" onerror="setTimeout(function() { listr.links.current.descrip=\'Not found on host.\';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);"'+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="https://fat.gfycat.com/'+i.id_source+'.mp4" type="video/mp4"><source src="https://giant.gfycat.com/'+i.id_source+'.mp4" type="video/mp4"><source src="https://fat.gfycat.com/'+i.id_source+'.webm" type="video/webm"><source src="https://giant.gfycat.com/'+i.id_source+'.webm" type="video/webm"><source src="https://zippy.gfycat.com/'+i.id_source+'.mp4" type="video/mp4"><source src="https://zippy.gfycat.com/'+i.id_source+'.webm" type="video/webm"></video>').show()},pause:function(i){if(void 0===i)var i=!0;console.log("gfy pause "+i),i?$("#media-gfycat video").trigger("pause"):$("#media-gfycat video").trigger("play")},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-gfycat").html("")}},listr.sources["gyazo.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.source="Gyazo",e.id_source=i.url.split("/")[3].split(".")[0].split("?")[0].split("#")[0],e.id_uni="gya|"+e.id_source,"mp4"==i.ext||"webm"==i.ext||"gif"==i.ext?e.kind="webm":"jpg"==i.ext||"png"==i.ext?e.kind="pic":e.kind="link",e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'),$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-gyazo"> </div>'))},load:function(i){"webm"==i.kind?$("#media-gyazo").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+'" webkit-playsinline="" controls="" onerror="setTimeout(function() { listr.links.current.descrip=\'Not found on host.\';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);"'+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="'+i.url.replace(".gif",".mp4")+'" type="video/mp4"></video>').show():"pic"==i.kind?$("#media-pic").html('<img src="'+i.url+'">').show():$("<img/>").attr("src","https://i.gyazo.com/"+i.id_source+".png").load(function(){i.kind="pic",i.url="https://i.gyazo.com/"+i.id_source+".png",listr.links.update(i),$("#media-pic").html('<img src="https://i.gyazo.com/'+i.id_source+'.png">').show(),$(this).remove()}).error(function(){$("<img/>").attr("src","https://i.gyazo.com/"+i.id_source+".jpg").load(function(){i.kind="pic",i.url="https://i.gyazo.com/"+i.id_source+".jpg",listr.links.update(i),$("#media-pic").html('<img src="https://i.gyazo.com/'+i.id_source+'.jpg">').show(),$(this).remove()}).error(function(){i.kind="webm",i.url="https://i.gyazo.com/"+i.id_source+".mp4",listr.links.update(i),$("#media-gyazo").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+'" webkit-playsinline="" controls="" onerror="setTimeout(function() { listr.links.current.descrip=\'Not found on host.\';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);"'+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="https://i.gyazo.com/'+i.id_source+'.mp4" type="video/mp4"></video>').show()})})},pause:function(i){if(void 0===i)var i=!0;i?$("#media-gyazo video").trigger("pause"):$("#media-gyazo video").trigger("play")},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic,#media-gyazo").html("")}},listr.sources["hypem.com"]={buckets:["music"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("/premiere"))return{};this._init||this.init();var e={};return e.url=i.url.replace("/premiere/","/premiere-embed/").replace("http:","https:"),e.kind="music",e.source="HypeMachine",e.id_source=e.url.split("/premiere-embed/")[1].split("?")[0].split("#")[0],e.id_uni="hpm|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-hypem"> </div>'))},load:function(i){$("#media-hypem").html('<iframe src="'+i.url+'?play=true"></iframe>').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-hypem").html("")}},listr.sources["imgflip.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],bgColor:"#121211",_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};if(e.kind="pic",e.source="ImgFlip",-1!=i.url.indexOf("i.imgflip.com"))e.id_source=i.url.split("imgflip.com/")[1].split("/")[0].split(".")[0].split("?")[0].split("#")[0],e.url=i.url.replace("http://","https://");else if(-1!=i.url.indexOf("imgflip.com/gif/"))e.id_source=i.url.split("imgflip.com/gif/")[1].split("/")[0].split(".")[0].split("?")[0].split("#")[0],e.url="https://i.imgflip.com/"+e.id_source+".gif";else{if(-1==i.url.indexOf("imgflip.com/i/"))return{};e.id_source=i.url.split("imgflip.com/i/")[1].split("/")[0].split(".")[0].split("?")[0].split("#")[0],e.url="https://i.imgflip.com/"+e.id_source+".jpg"}return e.id_uni="imf|"+e.id_source,e},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'))},load:function(i){$("#media-pic").html('<img src="'+i.url+'">').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic").html("")}},listr.sources["imgur.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],bgColor:"#121211",_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e=i.url.replace("http://","https://").replace("Imgur.com","imgur.com").replace("www.","").split("?")[0].split("&")[0].split("#")[0],t={};if(t.source="Imgur",t.id_source=e.split("imgur.com/")[1].split("/")[0].split(".")[0],-1!=e.indexOf("/gallery/"))t.id_source=e.split("/gallery/")[1].split("/")[0].split(".")[0].split("?")[0],t.id_source.length<6?(t.kind="album",t.explodable="imgur-album",e="https://imgur.com/a/"+t.id_source+"/embed"):(t.kind="pic",t.ext="png",e="https://i.imgur.com/"+t.id_source+".png");else if(-1!=e.indexOf("/t/"))try{t.id_source=e.split("/t/")[1].split("/")[1].split("?")[0],t.kind="album",t.explodable="imgur-album",e="https://imgur.com/a/"+t.id_source+"/embed"}catch(s){return{}}else if(-1!=e.indexOf("/a/"))-1==e.indexOf("/embed")&&(e+="/embed"),t.id_source=e.split("/a/")[1].split("/")[0].split("?")[0],t.kind="album",t.explodable="imgur-album";else if(-1!=e.indexOf("/r/"))t.id_source=e.substr(e.lastIndexOf("/")+1).split(".")[0].split("?")[0],t.kind="pic",t.ext="png",e="https://i.imgur.com/"+t.id_source+".png";else if(-1!=e.indexOf("/topic/"))t.id_source=e.substr(e.lastIndexOf("/")+1).split(".")[0].split("?")[0],t.kind="album",t.explodable="imgur-album",e="https://imgur.com/a/"+t.id_source+"/embed";else if(e.lastIndexOf(",")>e.lastIndexOf("/")){e.lastIndexOf(".")>e.lastIndexOf(",")&&(e=e.substr(e.lastIndexOf("."))),t.id_source=e.split("imgur.com/")[1].split(",")[0];var n=e.split("imgur.com/")[1].replace(t.id_source+",","").split(",");t.related={},t.related.permalink=i.related.permalink,t.related.links=[],$.each(n,function(e,s){t.related.links.push({url:"https://i.imgur.com/"+s+".png",title:i.title+" #"+(e+2),author:i.author,source:i.source,related:{permalink:i.related.permalink}})}),t.ext="png",t.kind="pic",e="https://i.imgur.com/"+t.id_source+".png"}else"gif"==i.ext?(e+="v",t.ext="gifv",t.kind="webm"):"gifv"==i.ext||"webm"==i.ext?t.kind="webm":""==i.ext?(e=e.replace("//imgur.com","//i.imgur.com")+".png",t.ext="png",t.kind="pic"):t.kind="pic";return t.url=e,-1==t.url.indexOf("/a/")?(t.thumb=e.substr(0,e.lastIndexOf("."))+"m.jpg",t.id_source=e.split("/")[3].split(".")[0].split("?")[0]):t.id_source="a/"+e.split("/")[4].split("?")[0],t.id_uni="imr|"+t.id_source,t},error:function(){},explode:function(i){($("table thead th.sorting_desc").length>0||$("table thead th.sorting_asc").not("th.pos").length>0)&&$("th.pos").click();var e=i.split("/a/")[1].split("/")[0].split("?")[0],t="https://api.imgur.com/3/album/"+e+"/images";$.ajax({url:t,type:"GET",dataType:"json",success:function(i){var e=i.data;i.data.length;listr.links.stash(),listr.links.batchPush(!0),$.each(e,function(i,e){listr.links.push({url:e.link,title:null==e.title?(10>i?"0":"")+i+") "+listr.links.current.title:e.title,descrip:null==e.description?"":e.description,author:listr.links.current.author,score:listr.links.current.score,related:listr.links.current.related})}),listr.links.batchPush(!1),listr.links.restore(),listr.links.update()},error:function(){listr.links.restore(),listr.links.update(),alert("Retreiving image filenames failed. :/")},beforeSend:function(i){i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","Client-ID 64143810fbfc67d")}})},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'),$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-imgur"> </div>'))},load:function(i){if("pic"==i.kind)$("#media-pic").html('<img src="'+i.url+'">').show();else if("webm"==i.kind){var e=window.size(),t=i.url;t.lastIndexOf(".")>t.lastIndexOf("/")&&(t=t.substr(0,t.lastIndexOf("."))),$("#media-imgur").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+'" webkit-playsinline="" controls="" onerror="setTimeout(function() { listr.links.current.descrip=\'Not found on host.\';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);"'+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="'+t+'.mp4" type="video/mp4"><object style="max-width:100%;height:100%" type="application/x-shockwave-flash" data="https://s.imgur.com/include/flash/gifplayer.swf?imgur_video='+t+".mp4&amp;imgur_width="+e.width+"&amp;imgur_height="+$("div.container.media div.content").height()+'&amp;imgur_url="><param name="movie" value="https://s.imgur.com/include/flash/gifplayer.swf?imgur_video='+t+".mp4&amp;imgur_width="+e.width+"&amp;imgur_height="+$("div.container.media div.content").height()+'"><param name="allowscriptaccess" value="never"><param name="flashvars" value="height='+$("div.container.media div.content").height()+"&amp;width="+e.width+'"><param name="width" value="'+e.width+'"><param name="height" value="'+$("div.container.media div.content").height()+'"><param name="version" value="0"><param name="scale" value="scale"><param name="salign" value="tl"><param name="wmode" value="opaque"></object></video>').show()}else{var s="https://api.imgur.com/3/album/"+i.id_source.replace("a/","")+"/images";$.ajax({url:s,type:"GET",dataType:"json",success:function(e){var t=e.data;$.each(t,function(e,t){e?(void 0===i.related.links&&(i.related.links=[]),i.related.links.push({url:t.link,title:null==t.title?(10>e?"0":"")+e+") "+i.title:t.title,descrip:null==t.description?"":t.description,author:i.author,score:i.score,related:i.related})):(i.url=t.link,i.descrip=null==t.description?"":t.description,i.kind="pic")}),setTimeout(function(){listr.links.load(i)})},error:function(){alert("Retreiving image filenames failed. :/")},beforeSend:function(i){i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","Client-ID 64143810fbfc67d")}})}},pause:function(i){if(void 0===i)var i=!0;i?$("#media-imgur video").trigger("pause"):$("#media-imgur video").trigger("play")},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic,#media-imgur").html("")}},listr.sources.jpg={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.url=i.url,e.kind="pic",e.source="Direct",e.id_uni="img|"+i.domain+"|"+e.url.substr(e.url.lastIndexOf("/")+1).split(".")[0].split("?")[0],e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'))},load:function(i){$("#media-pic").html('<img src="'+i.url+'">').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic").html("")}},listr.sources.jpeg=listr.sources.jpg,listr.sources.png=listr.sources.jpg,listr.sources.gif=listr.sources.jpg,listr.sources["gifyoutube.com"]={buckets:["pics","eyecandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="pic",e.source="GIFYoutube",e.id_source=i.url.split(".com/")[1].replace("gif/","").replace(".gif","").split("?")[0].split("#")[0],e.id_uni="gyt|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-gifyoutube"> </div>'))},load:function(i){$("#media-gifyoutube").html('<iframe src="https://gifs.com/embed/'+i.id_source+'" frameborder="0" scrolling="no" width="100%" height="100%" style="-webkit-backface-visibility: hidden;-webkit-transform: scale(1);" ></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-gifyoutube").html("")}},listr.sources["gifs.com"]=listr.sources["gifyoutube.com"],listr.sources["livecap.tv"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("livecap.tv/t/"))return{};var e={};return e.kind="vid",e.source="livecap.tv",e.id_source=i.url.split("livecap.tv/t/")[1],e.id_uni="lct|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-livecap"> </div>'))},load:function(i){$("#media-livecap").html('<iframe src="https://www.livecap.tv/s/embed/'+i.id_source+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-livecap").html("")}},listr.sources["mixcloud.com"]={buckets:["music"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="",e.source="Mixcloud",e.id_source=i.url.split("mixcloud.com/")[1].cTrim("/"),e.id_uni="mxc|"+e.id_source,"/"!=i.url.substr(-1)&&(e.url=i.url+"/"),e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="embed-mixcloud"> </div>'))},load:function(i){$("#embed-mixcloud").html('<object width="100%" height="100%"><param name="movie" value="https://www.mixcloud.com/media/swf/player/mixcloudLoader.swf?autoplay=1&amp;embed_type=widget_standard&amp;feed='+encodeURIComponent(i.url)+'&amp;hide_cover=1&amp;mini=1&amp;replace=0"><param name="allowFullScreen" value="true"><param name="wmode" value="opaque"><param name="allowscriptaccess" value="always"><embed src="https://www.mixcloud.com/media/swf/player/mixcloudLoader.swf?autoplay=1&amp;embed_type=widget_standard&amp;feed='+encodeURIComponent(i.url)+'&amp;hide_cover=1&amp;mini=1&amp;replace=0" type="application/x-shockwave-flash" wmode="opaque" allowscriptaccess="always" allowfullscreen="true" width="100%" height="100%"></object>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#embed-mixcloud").html("")}},listr.sources["oddshot.tv"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(-1==i.url.indexOf("/shot/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="Oddshot.TV",e.id_source=i.url.split("/shot/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="otv|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-oddshot"> </div>'))},load:function(i){$("#media-oddshot").html('<iframe src="https://oddshot.tv/shot/'+i.id_source+'/embed" width="100%" height="100%" frameborder="0"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-oddshot").html("")}},listr.sources["openload.co"]={buckets:["vids"],_ads:!0,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/f/"))return{};var e={};return e.kind="vid",e.source="Openload.co",e.id_source=i.url.split("/f/")[1].split("/")[0].split("?")[0],e.id_uni="old|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-openload"> </div>'))},load:function(i){window.popAdsLoaded=!0,$("#media-openload").html('<iframe src="https://openload.co/embed/'+i.id_source+'" frameborder="0"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-openload").html("")}},listr.sources["openload.io"]=listr.sources["openload.co"],listr.sources["plays.tv"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/video/"))return{};var e={};return e.kind="vid",e.source="Plays.TV",e.id_source=i.url.split("/video/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="ptv|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-playstv"> </div>'))},load:function(i){$("#media-playstv").html('<iframe src="https://plays.tv/embed/'+i.id_source+'" frameborder="0"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-playstv").html("")}},listr.sources["reddit.com"]={buckets:["music","vids","pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_player:!1,_init:!0,_loaded:!0,_events:0,defaults:function(){return this._init||this.init(),{}},error:function(){},init:function(){this._init||(this._init=!0)},load:function(){},msg:function(){},search:function(i,e){var t="",s=0;if(listr.opts.onlySearchFeeds){var n=4048;$.each(listr.feeds.list,function(i,e){var r=e.url.replace("/r/","");"reddit"==e.source&&"Suggested"!=e.cat&&0==e.url.indexOf("/r/")&&-1==("+"+t+"+").indexOf("+"+r+"+")&&t.length+r.length<n&&(t+=(s>0?"+":"")+r,s++)}),$.each(listr.feeds.subs,function(i,e){-1==("+"+t+"+").indexOf("+"+e+"+")&&t.length+e.length<n&&(t+=(s>0?"+":"")+e,s++)}),""==t?(alert("No reddit feeds found!  Search all of reddit for "+i+"."),console.log("Search error: no reddit feeds found.",feeds)):t="https://www.reddit.com/r/"+t}else t="https://www.reddit.com";t+="/search.json?limit=100&sort=relevance&t=year&q="+encodeURIComponent(i),s>0&&(t+="&restrict_sr=on"),$.ajax({dataType:"json",url:t,cache:!0,error:function(){alert("reddit returned an error for that search."+ENTER+ENTER+"Try searching for something more specific.")},success:function(i){if("Listing"==i.kind&&void 0!=i.data){var t=[];$.each(i.data.children,function(i,e){if(listr.opts.allowNSFW||!e.data.over_18){var s=e.data.thumbnail;try{s=e.data.media.oembed.thumbnail_url}catch(n){}var r="<br><b>posted to /r/"+e.data.subreddit+"</b>";try{r=e.data.media.oembed.description+"<br>"+r}catch(n){}var o="";try{o=e.data.media.oembed.title}catch(n){}t.push({url:e.data.url,title:e.data.title,uploader_title:o,author:e.data.author,related:{permalink:e.data.permalink},thumb:s,descrip:r,feed:"reddit"})}}),e(t)}}})},seek:function(){},stop:function(){}},listr.sources["rediff.com"]={buckets:["vids"],bgColor:"black",_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("ishare.rediff.com/video/"))return{};var e={};return e.kind="vid",e.source="rediff",e.id_source=i.url.substr(i.url.lastIndexOf("/")+1).split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="rdf|"+e.id_source,e):{}},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-rediff"> </div>'))},load:function(i){$("#media-rediff").html('<iframe src="http://ishare.rediff.com/video/embed/'+i.id_source+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-rediff").html("")}},listr.sources["rt.com"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("rtd.rt.com")||-1==i.url.indexOf("/films/"))return{};var e={};return e.kind="vid",e.source="rt.com",e.id_source=i.url.split("/films/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="rtc|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-rtc"> </div>'))},load:function(i){$("#media-rtc").html('<object type="application/x-shockwave-flash" data="https://rtd.rt.com/s/jwplayer/player.swf" width="100%" height="100%"><param name="menu" value="false"><param name="wmode" value="transparent"><param name="src" value="https://rtd.rt.com/s/jwplayer/player.swf"><param name="flashvars" value="playlistfile=https://rtd.rt.com/films/'+i.id_source+'/playlist.xml&repeat=list&skin=https://rtd.rt.com/s/skin/skin.zip&stretching=uniform&controlbar.position=over"><embed id="video_object" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="https://rtd.rt.com/s/jwplayer/player.swf" width="100%" height="100%" flashvars="playlistfile=https://rtd.rt.com/films/'+i.id_source+'/playlist.xml&repeat=list&skin=https://rtd.rt.com/s/skin/skin.zip&stretching=uniform&controlbar.position=over"></embed></object>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-rtc").html("")}},listr.sources["sendvid.com"]={buckets:["vids","music","nsfw","gaynsfw"],_ads:!0,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="vid",e.source="SendVids",e.id_source=i.url.split("sendvid.com/")[1].split("/")[0].split(".")[0].split("?")[0].split("#")[0],e.id_uni="svd|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-sendvid"> </div>'))},load:function(i){$("#media-sendvid").html('<iframe src="https://sendvid.com/embed/'+i.id_source+'" allowfullscreen></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-sendvid").html("")}},listr.sources["streamable.com"]={buckets:["vids"],_ads:!1,_pauses:!0,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};e.kind="vid",e.source="Streamable";try{e.id_source=i.url.split("streamable.com/")[1].split("/")[0].split("?")[0].split("#")[0].split(".")[0]}catch(t){return{}}return e.id_source.length<4||e.id_source.length>6?{}:(e.id_uni="sbl|"+e.id_source,e.thumbnail="https://cdn.streamable.com/image/"+i.id_source,e)},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-streamable"> </div>'))},load:function(i){$("#media-streamable").html('<video style="height:100%;max-width:100%;" poster="'+i.thumb+"\" preload=\"\" autoplay=\"\" webkit-playsinline=\"\" controls=\"\" onerror=\"setTimeout(function() { listr.links.current.descrip='Not found on host.';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\""+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="https://cdn.streamable.com/video/mp4/'+i.id_source+'.mp4" type="video/mp4" class="mp4-source"></video>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-streamable video").trigger("pause"):$("#media-streamable video").trigger("play")},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-streamable").html("")}},listr.sources["soundcloud.com"]={buckets:["music"],bgColor:"#121211",_ads:!1,_pauses:!0,_streams:!0,_https:!0,_player:!1,_init:!1,_loaded:!1,_events:0,_progress:!1,_playcheck:!1,defaults:function(i){this._init||this.init();var e={};e.source="Soundcloud",i.url.split("/").length>4&&-1==i.url.indexOf("/sets/")?e.kind="track":e.kind="playlist";var t=i.url;return-1!=t.indexOf("w.soundcloud.com/")&&-1!=t.indexOf("?url=")?t=t.split("?url=")[1].split("&")[0].split("%3F")[0]:-1!=t.indexOf("soundcloud.com/")&&(t=t.split("soundcloud.com/")[1].split("?")[0].split("#")[0]),e.id_source=t,e.id_uni="sc|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-soundcloud"> </div>'),$.ajax({url:"https://w.soundcloud.com/player/api.js",dataType:"script",cache:!0,success:function(){listr.sources["soundcloud.com"]._loaded=!0}}),$.ajax({url:"https://connect.soundcloud.com/sdk.js",dataType:"script",cache:!0,success:function(){SC.initialize({client_id:"5585776362d6e8c7e18b41ef1e3315ff"})}}))},load:function(i){this._loaded?(-1==i.url.indexOf("w.soundcloud.com/player")?$("#media-soundcloud").html('<iframe id="sc-widget" src="https://w.soundcloud.com/player/?visual=true&auto_play=true&url='+i.url+'" width="100%" height="97%" scrolling="no" frameborder="no"></iframe>'):$("#media-soundcloud").html('<iframe id="sc-widget" src="'+i.url.replace("http:","https:")+'" width="100%" height="97%" scrolling="no" frameborder="no"></iframe>'),$("#media-soundcloud").show(),$("#sc-widget").load(function(){var e=0,t=0;SC.Widget("sc-widget").bind(SC.Widget.Events.READY,function(){setTimeout(function(){SC.Widget("sc-widget").getSounds(function(i){t=i.length}),SC.Widget("sc-widget").getCurrentSound(function(e){null==e||void 0===e.embeddable_by||"none"==e.embeddable_by?(i.active=!1,i.descrip="Not embeddable.",listr.links.update(i),listr.links.next()):(i.uploader=e.user.username,void 0!==e.artwork_url&&null!==e.artwork_url&&0==e.artwork_url.indexOf("http")&&(i.thumb=e.artwork_url),i.meta.length=Math.round(e.duration/1e3),listr.links.update(i),$("div.media div.opts div.progressBar").show(),$("#progress").width(0),listr.sources["soundcloud.com"]._progress=setInterval(function(){SC.Widget("sc-widget").getPosition(function(i){i=Math.round(i/1e3);var e=listr.links.current.meta.length;if($.isNumeric(i)&&$.isNumeric(e)&&e>0){var t=i/e;$("#progress").stop().animate({width:Math.round(t*$("div.progressBar").width())},999,"linear"),listr.broadcast({action:"progress",target:"links",link:listr.links.current,pct:t,cur:Math.round(i).toMMSS()})}})},1e3),$(window).resize())})},999)}),SC.Widget("sc-widget").bind(SC.Widget.Events.PLAY,function(){SC.Widget("sc-widget").getCurrentSoundIndex(function(i){e=i}),"hidden"!=$("span.btns a.resume").css("display")&&($("span.btns a.resume").hide(),$("span.btns a.pause").show())}),SC.Widget("sc-widget").bind(SC.Widget.Events.PAUSE,function(){"hidden"!=$("span.btns a.pause").css("display")&&($("span.btns a.pause").hide(),$("span.btns a.resume").show())}),SC.Widget("sc-widget").bind(SC.Widget.Events.FINISH,function(){e+1>=t?listr.links.next():(SC.Widget("sc-widget").getCurrentSound(function(e){i.meta.length=Math.round(e.duration/1e3)}),$("div.media div.opts div.progressBar").show(),$("#progress").width(0),clearInterval(listr.sources["soundcloud.com"]._progress),listr.sources["soundcloud.com"]._progress=setInterval(function(){SC.Widget("sc-widget").getPosition(function(i){i=Math.round(i/1e3);var e=listr.links.current.meta.length;if($.isNumeric(i)&&$.isNumeric(e)&&e>0){var t=i/e;$("#progress").stop().animate({width:Math.round(t*$("div.progressBar").width())},999,"linear"),listr.broadcast({action:"progress",target:"links",link:listr.links.current,pct:t,cur:Math.round(i).toMMSS()})}})},1e3))})})):i.idx==listr.links.current.idx&&setTimeout(function(){listr.sources["soundcloud.com"].load(i)},100)},pause:function(i){if(void 0===i)var i=!0;i?SC.Widget("sc-widget").pause():SC.Widget("sc-widget").play()},search:function(i,e){var t=!0;try{SC}catch(s){t=!1}return t?void SC.get("/tracks",{q:i,streamable:!0},function(i){var t=[];$.each(i,function(i,e){null!=e&&t.push({url:e.permalink_url,title:e.title,descrip:null===e.description?"":e.description.substr(0,255)+(e.description.length>255?"&hellip;":""),thumb:null===e.artwork_url?"":e.artwork_url,feed:"soundcloud",domain:"soundcloud.com",source:"Soundcloud"})}),e(t)}):void e([])},seek:function(i){var e=listr.links.current.meta.length;$.isNumeric(e)&&e>0&&SC.Widget("sc-widget").seekTo(i*e*1e3)},stop:function(){clearInterval(listr.sources["soundcloud.com"]._progress),$("#media-soundcloud").html("")}},listr.sources["triplejunearthed.com"]={buckets:["music"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/track/"))return{};var e={};return e.kind="track",e.source="Triple J",e.id_source=i.url.split("/track/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="jjj|"+e.id_source,e):{}},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-jjj"> </div>'))},load:function(i){$("#media-jjj").html('<iframe src="https://www.triplejunearthed.com/embed/'+i.id_source+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-jjj").html("")}},listr.sources["twitch.tv"]={buckets:["vids"],bgColor:"black",_ads:!0,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};e.source="TwitchTV",e.id_source=i.url.split(".tv/")[1].split("?")[0].split("#")[0],e.id_uni="ttv|"+e.id_source;var t=i.url.split("/").length;if(4==t)e.kind="channel",e.related={},e.related.chat=i.url+"/chat?popout=true";else{if(6!=t)return{};e.kind="vid"}return e},error:function(){},init:function(){this._init||(this._init=!0,window.__flash__toXML=function(){return!0},$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-twitchtv"></div>'))},load:function(i){"channel"==i.kind?$("#media-twitchtv").html('<iframe src="'+i.url+'/embed?auto_play=true"></iframe>').show():$("#media-twitchtv").html('<object data="http://www.twitch.tv/swflibs/TwitchPlayer.swf" width="100%" height="100%" id="clip_embed_player_flash" type="application/x-shockwave-flash"><param name="movie" value="http://www.twitch.tv/swflibs/TwitchPlayer.swf" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="allowFullScreen" value="true" /><param name="flashvars" value="channel='+i.id_source.split("/")[0]+"&videoId="+i.id_source.split("/")[1]+i.id_source.split("/")[2]+'&auto_play=true&start_volume=100" /></object>').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-twitchtv").html(""),$("#chat").remove(),$("div.container.media div.content div.media-dsp").css("max-width","")}},listr.sources["uploadica.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="pic",e.source="Uploadica",-1==i.url.indexOf("uploadica.com/images/")&&-1!=i.url.indexOf("uploadica.com/?v=")?(e.id_source=i.url.split("?v=")[1].split("&")[0].split("#")[0],e.url="http://www.uploadica.com/images/"+e.id_source):(e.id_source=links.url.split("/images/")[1].split("?")[0].split("#")[0],e.url=i.url.replace("https:","http:")),e.url.lastIndexOf(".")<e.url.lastIndexOf("/")?{}:(e.id_uni="uca|"+e.id_source,e)},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'))},load:function(i){$("#media-pic").html('<img src="'+i.url+'">').show()},msg:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic").html("")}},listr.sources["vidble.com"]={buckets:["pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};if(e.url=i.url.replace("http:","https:"),e.kind="pic",e.id_source=!1,-1!=e.url.indexOf("/album/"))e.kind="album",e.id_source="album:"+e.url.split("/album/")[1].split("/")[0].split("?")[0];else if(""==i.ext){if(-1==e.url.indexOf("vidble.com/show/"))return{};e.url=e.url.replace("/show/","/")+".jpg",e.ext="jpg"}else-1!=e.url.indexOf("vidble.com/explore/")&&(e.url=e.url.replace("/explore/","/"));return e.id_source||(e.id_source=e.url.split(".com/")[1].split("/")[0].split("?")[0]),e.source="Vidble",e.id_uni="vbl|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-pic").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-pic"> </div>'),$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-vidble"> </div>'))},load:function(i){"pic"==i.kind?$("#media-pic").html('<img src="'+i.url+'">').show():$("#media-vidble").html('<iframe src="'+i.url+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-pic,#media-vidble").html("")}},listr.sources["vimeo.com"]={buckets:["music","vids","nsfw","gaynsfw"],bgColor:"black",_ads:!1,_pauses:!0,_streams:!0,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,_progress:!1,defaults:function(i){if(listr.opts.hidden)return{};this._init||this.init();var e={};return e.meta=i.meta,e.kind="vid",e.source="Vimeo",e.id_source=i.url.split("?")[0],e.id_source=e.id_source.substr(e.id_source.lastIndexOf("/")+1),$.isNumeric(e.id_source)?(e.id_uni="vmo|"+e.id_source,setTimeout(function(){$.getJSON("https://vimeo.com/api/oembed.json?url="+encodeURIComponent(i.url),function(e){if(listr.sources["vimeo.com"]._events--,i.descrip=e.description,i.thumb=e.thumbnail_url,i.meta.length=e.duration,i.uploader_title=e.title,(i.title.isBadTitle()||"music"==listr.bucket&&""==i.meta.artist)&&(i.title=e.title),"music"==listr.bucket){var t=i.uploader_title.parseMeta();""==i.meta.artist&&""!=t.artist&&(i.meta.artist=t.artist,""!=t.track&&(i.meta.track=t.track)),""==i.meta.genre&&""!=t.genre&&(i.meta.genre=t.genre),""==i.meta.year&&""!=t.year&&(i.meta.year=t.year)}listr.links.update(i)})},++this._events*listr.opts.ajaxDelay),e):{}},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-vimeo"> </div>'))},load:function(i){$("#media-vimeo").html('<iframe id="vimeo-iframe" src="https://player.vimeo.com/video/'+i.id_source+'?api=1&player_id=vimeo-iframe&autoplay=true" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').show(),listr.sources["vimeo.com"]._player=$("#vimeo-iframe")[0],window.addEventListener?window.addEventListener("message",listr.sources["vimeo.com"].msg,!1):window.attachEvent("onmessage",listr.sources["vimeo.com"].msg,!1),$("div.media div.opts div.progressBar").show(),$("#progress").width(0),listr.sources["vimeo.com"]._progress=setInterval(function(){listr.sources["vimeo.com"]._player.contentWindow.postMessage({method:"getCurrentTime"},$("#vimeo-iframe").attr("src").split("?")[0])},1e3)},msg:function(i){if(void 0!==i.data&&void 0!==i.origin&&-1!=i.origin.indexOf("vimeo.com")){var e=$.parseJSON(i.data);if(void 0!==e.method){if(e.method="getCurrentTime"){var t=Math.round(e.value),s=listr.links.current.meta.length;if($.isNumeric(t)&&$.isNumeric(s)&&s>0){var n=t/s;$("#progress").stop().animate({width:Math.round(n*$("div.progressBar").width())},999,"linear"),listr.broadcast({action:"progress",target:"links",link:listr.links.current,pct:n,cur:Math.round(t).toMMSS()})}}}else void 0!==e.event&&("ready"==e.event&&(listr.sources["vimeo.com"].post("addEventListener","finish"),listr.sources["vimeo.com"].post("addEventListener","pause"),listr.sources["vimeo.com"].post("addEventListener","play")),"pause"==e.event&&"hidden"!=$("span.btns a.pause").css("display")?($("span.btns a.pause").hide(),$("span.btns a.resume").show()):"play"==e.event&&"hidden"!=$("span.btns a.resume").css("display")?($("span.btns a.resume").hide(),$("span.btns a.pause").show()):"finish"==e.event&&listr.links.next())}},post:function(i,e){var t={method:i};e&&(t.value=e),listr.sources["vimeo.com"]._player.contentWindow.postMessage(t,$("#vimeo-iframe").attr("src").split("?")[0])},pause:function(i){i?listr.sources["vimeo.com"].post("pause"):listr.sources["vimeo.com"].post("play")},search:function(i,e){e([])},seek:function(i){listr.sources["vimeo.com"]._player.contentWindow.postMessage({method:"seekTo",value:listr.links.current.meta.length*i},$("#vimeo-iframe").attr("src").split("?")[0])},stop:function(){$("#media-vimeo").html(""),window.addEventListener?window.removeEventListener("message",listr.sources["vimeo.com"].msg):window.detachEvent("onmessage",listr.sources["vimeo.com"].msg,!1),clearInterval(listr.sources["vimeo.com"]._progress)}},listr.sources["xboxdvr.com"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/video/"))return{};var e={};return e.url=i.url,"/"==e.url.substr(-1)&&(e.url=e.url.substr(0,e.url.length-1)),e.kind="vid",e.source="Xbox DVR",e.id_source=i.url.split("/video/")[1].split("/")[0].split("?")[0],e.id_uni="xdr|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-xboxdvr"> </div>'))},load:function(i){$("#media-xboxdvr").html('<iframe src="'+i.url+'/embed"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-xboxdvr").html("")}},listr.sources["vine.co"]={buckets:["vids"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/v/"))return{};var e={};return e.kind="vine",e.source="vine.co",e.id_source=i.url.split("/v/")[1].split("/")[0].split("?")[0],e.id_uni="vne|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-vine" </div>'))},load:function(i){$("#media-vine").html('<iframe src="https://vine.co/v/'+i.id_source+'/embed/postcard?audio=1"></iframe>').show(),$("<script>").attr("type","text/javascript").attr("src","https://platform.vine.co/static/scripts/embed.js").appendTo("#media-vine")},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-vine").html("")}},listr.sources.webm={buckets:["vids","music","pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!0,_streams:!0,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="webm",e.source="Direct",e.id_uni="wbm|"+i.domain+"|"+i.url.split("/")[3].split("?")[0],-1!=i.url.indexOf("pornwebms.com/webm")&&(e.url=i.url.replace("pornwebms.com/webm/","pornwebms.com/video/"),e.id_uni="pwm|"+e.url.split("/video/")[1].split(".")[0]),e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-embed").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-embed"> </div>'))},load:function(i){$("#media-embed").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+"\" webkit-playsinline=\"\" controls=\"\" onerror=\"setTimeout(function() { listr.links.current.descrip='Not found on host.';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\""+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="'+i.url+'" type="video/webm"></video>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-embed video").trigger("pause"):$("#media-embed video").trigger("play")},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-embed").html("")}},listr.sources["webm.land"]=$.extend({},listr.sources.webm),listr.sources["webm.land"].defaults=function(i){if(this._init||this.init(),-1==i.url.indexOf("/media/")&&-1==i.url.indexOf("/w/"))return{};var e={};return e.kind="webm",e.source="WebM.land",e.id_source=i.url.split("webm.land/")[1].split("/")[1].split(".")[0].split("?")[0].split("#")[0],e.id_uni="wbm|"+e.id_source,e.url="http://webm.land/media/"+e.id_source+".webm",e.thumb="http://webm.land/media/thumbnails/"+e.id_source+".jpeg",e},listr.sources["webmshare.com"]=$.extend({},listr.sources.webm),listr.sources["webmshare.com"].defaults=function(i){this._init||this.init();var e={};return e.kind="webm",e.source="WebM.land",e.id_source=i.url.split("webmshare.com/")[1].split("?")[0].split("#")[0].replace("play/","").replace(".webm","").split("/")[0],e.id_uni="wbm|"+e.id_source,-1==i.url.indexOf(".webm")&&(e.url="http://s1.webmshare.com/"+e.id_source+".webm"),e},listr.sources["youtube.com"]={buckets:["vids","music","nsfw","gaynsfw"],bgColor:"black",_ads:!1,_pauses:!0,_streams:!0,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,_progress:!1,defaults:function(i){this._init||this.init();var e={};if(e.meta=i.meta,e.source="Youtube",e.url=i.url.replace("youtu.be/","youtube.com/watch?v=").replace("youtube.com/embed/","youtube.com/watch?v=").replace("watch%3Fv%3D","watch?v=").replace("/list/","/playlist?list="),-1!=e.url.indexOf("list=")&&(e.explodable="youtube-playlist"),-1!=e.url.indexOf("youtube.com/watch")&&-1!=e.url.indexOf("v=")){if(e.kind="vid",e.id_source=e.url.split("v=")[1].split("?")[0].split("&")[0].split("#")[0],e.id_uni="ytv|"+e.id_source,e.meta.start=i.url.parseYoutubeTime(),void 0===i._defaults)return e;setTimeout(function(){$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&id="+encodeURIComponent(e.id_source),success:function(e){if(listr.sources["youtube.com"]._events--,void 0!==e.items&&e.items.length>0){var t=e.items[0].snippet;if(""==i.descrip&&(i.descrip=t.description),i.meta.length=e.items[0].contentDetails.duration.toMMSS(),0!=i.thumb.indexOf("http")&&(void 0!==t.thumbnails.high?i.thumb=t.thumbnails.high.url:void 0!==t.thumbnails.medium?i.thumb=t.thumbnails.medium.url:void 0!==t.thumbnails.standard&&(i.thumb=t.thumbnails.standard.url)),i.uploader_title=t.title,(i.title.isBadTitle()||"music"==listr.bucket&&""==i.meta.artist)&&(i.title=t.title),"music"==listr.bucket){var s=i.uploader_title.parseMeta();""==i.meta.artist&&""!=s.artist&&(i.meta.artist=s.artist,""!=s.track&&(i.meta.track=s.track)),""==i.meta.genre&&""!=s.genre&&(i.meta.genre=s.genre),""==i.meta.year&&""!=s.year&&(i.meta.year=s.year)}listr.links.update(i)}}})},++this._events*listr.opts.ajaxDelay)}else if(e.url.indexOf("list=")>-1||-1!=e.url.indexOf("/channel/")){if(e.kind="playlist",-1!=e.url.indexOf("/channel/")?(e.id_source=e.url.split("/channel/")[1].split("/")[0].split("?")[0].split("#")[0].replace("UC","UU"),e.id_uni="ytc|"+e.id_source):(e.id_source=e.url.split("list=")[1].split("&")[0].split("#")[0],"PL"!=e.id_source.substr(0,2)&&"LL"!=e.id_source.substr(0,2)&&(e.id_source="PL"+e.id_source),e.id_uni="ytp|"+e.id_source),void 0===i._defaults)return e;setTimeout(function(){$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&id="+encodeURIComponent(e.id_source),success:function(e){listr.sources["youtube.com"]._events--,void 0!==e.items&&e.items.length>0&&((i.title.isBadTitle()||"music"==listr.bucket&&""==i.meta.artist)&&(i.title=e.items[0].snippet.title),0==e.items[0].contentDetails.itemCount?(listr.links.current.descrip="No vids found in playlist.",listr.links.current.active=!1):(i.descrip=e.items[0].snippet.description,i.meta.length=e.items[0].contentDetails.itemCount+" vids"),listr.links.update(i))}})},++this._events*listr.opts.ajaxDelay)}else if(e.url.indexOf("/user/")>-1){if(e.kind="user",e.id_source=e.url.split("/user/")[1].split("/")[0].split("?")[0],e.id_uni="ytu|"+e.id_source,void 0===i._defaults)return e;setTimeout(function(){$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&forUsername="+encodeURIComponent(e.id_source),success:function(e){if(listr.sources["youtube.com"]._events--,void 0!==e.items&&e.items.length>0){var t=e.items[0];(i.title.isBadTitle()||"music"==listr.bucket&&""==i.meta.artist)&&(i.title=t.snippet.title),i.descrip=t.snippet.description,i.id_source=t.contentDetails.relatedPlaylists.uploads,i.url="https://youtube.com/playlist?list="+i.id_source,i.kind="playlist",listr.links.update(i)}}})},++this._events*listr.opts.ajaxDelay)}return e},explode:function(i){($("table thead th.sorting_desc").length>0||$("table thead th.sorting_asc").not("th.pos").length>0)&&$("th.pos").click(),listr.links.stash();var e=listr.opts.clearOnLoad;listr.opts.clearOnLoad=!1;listr.links.list.length;listr.feeds["youtube-playlist"].load(i,function(){listr.links.restore(),listr.links.update()}),listr.opts.clearOnLoad=e},error:function(i){var e="";if(0==i.data?e="Could not connect.":2==i.data?e="Invalid parameters.":100==i.data?e="Video deleted.":101==i.data||105==i.data?e="Not embeddable.":150==i.data&&(e="Restricted in your region."),0!=i.data&&5!=i.data)if(""==e&&console.log("unknown youtube error",i),listr.opts.replaceYoutube&&"vid"==listr.links.current.kind&&"music"==listr.bucket){var t=listr.links.current.title;"music"==listr.bucket&&(t=listr.links.current.meta.artist+" "+listr.links.current.meta.track),t=t.toLowerCase().replace(/\W+/g," ").replace(/\//g," ").replace(/-/g," ").replace(" featuring "," ").replace(" feat. "," ").replace(" ft. "," ").replace(" ft "," ").replace(" with "," ").replace(" w/ "," ").replace(" and "," ").replace("&"," ").replace("!"," ");var s=t.replace(/  /g," ").split(" ");t="",$.each(s,function(i,e){$.isNumeric(e)||(t+=(i>0?" ":"")+e)}),$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&order=relevance&safeSearch=none&type=video&videoSyndicated=true&videoEmbeddable=true&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&q="+encodeURIComponent(t)+("music"==listr.bucket?"&videoCategoryId=10":""),error:function(){listr.links.current.descrip="Video could not be found or replaced.",listr.links.current.active=!1,listr.links.update(listr.links.current),listr.links.next()},success:function(i){if(void 0!==i.items&&i.items.length>0){var s=t.replace(/  /g," ").split(" "),n=!1;-1==t.indexOf("live")&&-1==t.indexOf("concert")&&-1==t.indexOf(" 1")&&-1==t.indexOf(" 0")&&-1==t.indexOf(" 20")&&-1==t.indexOf("at the")&&-1==t.indexOf("perform")&&-1==t.indexOf("preform")&&-1==t.indexOf("sings")||(n=!0);var r=!1;-1==t.indexOf("remix")&&-1==t.indexOf("cover")&&-1==t.indexOf("demo")||(r=!0);var o=!1;-1==t.indexOf("full ")&&-1==t.indexOf("album")&&-1==t.indexOf("concert")&&-1==t.indexOf("soundcheck")||(o=!0);var d=s.length+2,a=-1,u=-1,c=!1,l=!1;if("music"==listr.bucket&&(c=$.trim(listr.links.current.meta.artist.toLowerCase().replace(/\W+/g," ")),l=$.trim(listr.links.current.meta.track.toLowerCase().replace(/\W+/g," "))),$.each(i.items,function(i,e){var t=0,d=e.snippet,p=$.trim(d.title.toLowerCase().replace(/\W+/g," ").replace(/\//g," ").replace(/-/g," ").replace("featuring "," ").replace(" feat "," ").replace(" ft. "," ").replace(" ft "," ").replace(" with "," ").replace(" w "," ").replace(" and "," ").replace("the "," ").replace(/  /g," ")),m=$.trim(d.description.toLowerCase().replace(/\W+/g," ").replace(/\//g," ").replace(/-/g," ").replace("featuring "," ").replace(" feat "," ").replace(" ft. "," ").replace(" ft "," ").replace(" with "," ").replace(" w "," ").replace(" and "," ").replace("the "," ").replace(/  /g," ")),f=p.split(" ");-1==p.indexOf("you sing")&&-1==p.indexOf("karaoke")&&-1==p.indexOf("kareoke")&&-1==p.indexOf("singalong")&&-1==p.indexOf("no vocal")&&-1==p.indexOf("virtual")&&-1==p.indexOf("how to")&&-1==p.indexOf("drumming")&&-1==p.indexOf("s only")&&-1==m.indexOf("you sing")&&-1==m.indexOf("karaoke")&&-1==m.indexOf("kareoke")&&-1==m.indexOf("singalong")&&-1==m.indexOf("no vocal")&&-1==m.indexOf("virtual")&&-1==m.indexOf("how to")&&-1==m.indexOf("drumming")&&-1==m.indexOf("s only")||(t-=3),n?-1!=p.indexOf("live")||-1!=p.indexOf("concert")||-1!=p.indexOf(" 0")||-1!=p.indexOf(" 1")||-1!=p.indexOf(" 2")||-1!=p.indexOf("at the")||-1!=p.indexOf("on the")||-1!=p.indexOf("perform")||-1!=p.indexOf("preform")||-1!=p.indexOf("sings")||-1!=m.indexOf("live")||-1!=m.indexOf("concert")||-1!=m.indexOf(" 0")||-1!=m.indexOf(" 1")||-1!=m.indexOf(" 2")||-1!=m.indexOf("at the")||-1!=m.indexOf("on the")||-1!=m.indexOf("perform")||-1!=m.indexOf("preform")||-1!=m.indexOf("sings")?t++:t--:-1==p.indexOf("live")&&-1==p.indexOf("concert")&&-1==p.indexOf(" 0")&&-1==p.indexOf(" 1")&&-1==p.indexOf(" 2")&&-1==p.indexOf("at the")&&-1==p.indexOf("perform")&&-1==p.indexOf("preform")&&-1==p.indexOf("sings")&&-1==m.indexOf("live")&&-1==m.indexOf("concert")&&-1==m.indexOf(" 0")&&-1==m.indexOf(" 1")&&-1==m.indexOf(" 2")&&-1==m.indexOf("at the")&&-1==m.indexOf("perform")&&-1==m.indexOf("preform")&&-1==m.indexOf("sings")?t++:t-=3,r?-1!=p.indexOf("remix")||-1!=p.indexOf("cover")||-1!=p.indexOf("demo")||-1!=m.indexOf("remix")||-1!=m.indexOf("cover")||-1!=m.indexOf("demo")?t++:t--:-1==p.indexOf("remix")&&-1==p.indexOf("cover")&&-1==p.indexOf("demo")&&-1==m.indexOf("remix")&&-1==m.indexOf("cover")&&-1==m.indexOf("demo")?t++:t--,o?-1!=p.indexOf("full ")||-1!=p.indexOf("album")||-1!=p.indexOf("concert")||-1!=p.indexOf("soundcheck")||-1!=m.indexOf("full ")||-1!=m.indexOf("album")||-1!=m.indexOf("concert")||-1!=m.indexOf("soundcheck")?t++:t--:-1==p.indexOf("full ")&&-1==p.indexOf("album")&&-1==p.indexOf("concert")&&-1==p.indexOf("soundcheck")&&-1==m.indexOf("full ")&&-1==m.indexOf("album")&&-1==m.indexOf("concert")&&-1==m.indexOf("soundcheck")?t++:t--,"music"==listr.bucket&&(-1==p.indexOf(c)&&-1==m.indexOf(c)&&(t-=10),-1==p.indexOf(l)&&-1==m.indexOf(l)&&(t-=10)),$.each(f,function(i,e){$.each(s,function(i,s){e==s&&t++})}),f.length>s.length&&(t-=f.length-s.length),t>a&&(a=t,u=i)}),a>d&&void 0!==i.items[u]){var p=i.items[u];listr.links.current.descrip="The original link could not be found.  This link was automatically replaced with the best match.",listr.links.current.id_source=p.id.videoId,listr.links.current.url="https://youtube.com/watch?v="+p.id.videoId,listr.links.current.title+=" *","music"==listr.bucket&&(listr.links.current.meta.track+=" *");try{listr.links.current.thumb=p.snippet.thumbnails.high.url}catch(m){listr.links.current.thumb=p.snippet.thumbnails["default"].url}listr.links.update(listr.links.current),listr.links.load(listr.links.current)}else listr.links.current.descrip="Video could not be found or replaced.",listr.links.current.active=!1,listr.links.update(listr.links.current),listr.links.next()}else listr.links.current.descrip="Youtube error: "+e,listr.links.current.active=!1,listr.links.update(listr.links.current),listr.links.next()}})}else listr.links.current.descrip="Youtube error: "+e,listr.links.current.active=!1,listr.links.update(listr.links.current),listr.links.next()},init:function(){if(!this._init&&(this._init=!0,0==$("#media-youtube").length)){var i=window.size();$("<script>").attr("type","text/javascript").text('function onYouTubeIframeAPIReady() {listr.sources["youtube.com"]._player = new YT.Player("media-youtube", {height: '+(i.height-65)+",width: "+i.width+',playerVars: { "autoplay": 1, "modestbranding": 1, "rel": 0, "showinfo": 1, "playsinline": 1, "cc_load_policy": 0, "iv_load_policy": 3, "controls": 2, "color": "white", "html5": 1, "disablekb": 1, "autohide": 1},events: {"onError": listr.sources["youtube.com"].error,"onReady": function() { listr.sources["youtube.com"]._player.addEventListener("onStateChange", listr.sources["youtube.com"].msg); listr.sources["youtube.com"]._player.setVolume(100);  listr.sources["youtube.com"]._loaded = true;}}});}').appendTo("body"),$("div.container.media div.content").append('<div id="media-youtube" class="media-dsp hidden hide-on-load"><span><br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;youtube loading..</span></div>'),window.adModuleLoaded=!0,$.ajax({url:"//www.youtube.com/iframe_api",dataType:"script",cache:!0})}},load:function(i){this._loaded?("vid"==i.kind?this._player.loadVideoById(i.id_source,i.meta.start):"playlist"==i.kind&&this._player.loadPlaylist({list:i.id_source,listType:"playlist"}),$("#media-youtube").show(),$("div.media div.opts div.progressBar").show(),$("#progress").width(0),listr.sources["youtube.com"]._progress=setInterval(function(){var i=listr.sources["youtube.com"]._player,e=i.getCurrentTime(),t=i.getDuration();if($.isNumeric(e)&&$.isNumeric(t)&&t>0){var s=e/t;$("#progress").stop().animate({width:Math.round(s*$("div.progressBar").width())},999,"linear"),listr.broadcast({action:"progress",target:"links",link:listr.links.current,pct:s,cur:Math.round(e).toMMSS()})}},1e3)):i.idx==listr.links.current.idx&&setTimeout(function(){listr.sources["youtube.com"].load(i)},100)},msg:function(i){if(-1==i.data)"playlist"==listr.links.current.kind&&listr.sources["youtube.com"]._player.getPlaylistIndex()>0&&setTimeout(function(){listr.sources["youtube.com"]._player.playVideo()},250);else if(0==i.data)try{"vid"!=listr.links.current.kind&&listr.sources["youtube.com"]._player.getPlaylistIndex()+1!=listr.sources["youtube.com"]._player.getPlaylist().length||listr.links.next()}catch(e){}else if(1==i.data){if("hidden"!=$("span.btns a.resume").css("display")&&($("span.btns a.resume").hide(),$("span.btns a.pause").show()),"playlist"==listr.links.current.kind){""==listr.links.current.meta.length&&(listr.links.current.meta.length=listr.sources["youtube.com"]._player.getPlaylist().length+" vids",listr.links.update(listr.links.current));var t=$.extend({},listr.links.current),s=listr.sources["youtube.com"]._player.getVideoData();t.kind="vid",t.id_uni="ytv|"+s.video_id,t.url="https://youtube.com/watch?v="+s.video_id,t.title=s.title,t.meta=s.title.parseMeta(),listr.broadcast({action:"load",target:"links",link:t})}}else 2==i.data&&"hidden"!=$("span.btns a.pause").css("display")&&($("span.btns a.pause").hide(),$("span.btns a.resume").show())},pause:function(i){if(void 0===i)var i=!0;i?listr.sources["youtube.com"]._player.pauseVideo():listr.sources["youtube.com"]._player.playVideo()},search:function(i,e,t){if(void 0===t)var t={types:"video,playlist,channel"};$.ajax({dataType:"json",url:"https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&order=relevance&safeSearch=none&type="+t.types+("video"==t.types?"&videoEmbeddable=true":"")+"&key=AIzaSyCZwSZBG0DReBq7-EZT_EWRQbLe7v_yL1o&q="+encodeURIComponent(i),success:function(t){if(void 0!==t.items&&t.items.length>0){var s=[],n=i.toLowerCase().split(" ");Math.floor(n.length/2);$.each(t.items,function(i,e){"youtube#video"==e.id.kind?s.push({url:"https://youtube.com/watch?v="+e.id.videoId,title:e.snippet.title,descrip:e.snippet.description,thumb:e.snippet.thumbnails["default"].url,feed:"youtube",domain:"youtube.com"}):"youtube#playlist"==e.id.kind?s.push({url:"https://www.youtube.com/playlist?list="+e.id.playlistId,title:e.snippet.title,descrip:(e.snippet.channelTitle.length>0?"<b>/u/"+e.snippet.channelTitle+"</b> ":"")+e.snippet.description,thumb:e.snippet.thumbnails["default"].url,feed:"youtube",domain:"youtube.com"}):"youtube#channel"==e.id.kind&&s.push({url:"https://www.youtube.com/channel/"+e.id.channelId,title:e.snippet.title,descrip:(e.snippet.channelTitle.length>0?"<b>/u/"+e.snippet.channelTitle+"</b> ":"")+e.snippet.description,thumb:e.snippet.thumbnails["default"].url,feed:"youtube",domain:"youtube.com"})}),setTimeout(function(){e(s)},666)}}})},seek:function(i){var e=listr.sources["youtube.com"]._player,t=e.getDuration();$.isNumeric(t)&&t>0&&e.seekTo(i*t)},stop:function(){clearInterval(listr.sources["youtube.com"]._progress);try{listr.sources["youtube.com"]._player.stopVideo()}catch(i){}}},listr.sources["youtu.be"]=$.extend({},listr.sources["youtube.com"]),listr.sources["youtu.be"].search=function(i,e){e([])},listr.sources["youtu.be"].stop=function(){},listr.sources["veoh.com"]={buckets:["vids","music","nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/watch/"))return{};var e={};return e.kind="vid",e.source="Veoh",e.id_source=i.url.split("/watch/")[1].split("/")[0].split("?")[0],e.id_uni="veo|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-veoh"> </div>'))},load:function(i){$("#media-veoh").html('<object id="veohFlashPlayer" name="veohFlashPlayer" width="100%" height="100%"><param name="movie" value="http://www.veoh.com/swf/webplayer/WebPlayer.swf?version=AFrontend.5.7.0.1492&permalinkId='+i.id_source+'&player=videodetailsembedded&videoAutoPlay=1&id=anonymous"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.veoh.com/swf/webplayer/WebPlayer.swf?version=AFrontend.5.7.0.1492&permalinkId=v16439142GRyZJsPn&player=videodetailsembedded&videoAutoPlay=0&id=anonymous" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="100%" height="100%" id="veohFlashPlayerEmbed" name="veohFlashPlayerEmbed"></embed></object>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-veoh").html("")}},listr.sources["vid.me"]={buckets:["vids","nsfw","gaynsfw"],bgColor:"black",_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="vid",e.source="vid.me",e.id_source=i.url.replace(".me/e/",".me/").split("vid.me/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_source.length<4||e.id_source.length>6?{}:(e.id_uni="vme|"+e.id_source,e)},init:function(){this._init||(this._init=!0,$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-vidme"> </div>'))},load:function(i){$("#media-vidme").html('<iframe src="https://vid.me/e/'+i.id_source+'?autoplay=1"></iframe>').show()},seek:function(){},stop:function(){$("#media-vidme").html("")},error:function(){},msg:function(){},search:function(i,e){e([])}},listr.sources.mp3={buckets:["music","nsfw","gaynsfw"],_ads:!1,_pauses:!0,_streams:!0,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="mp3",e.source="Direct",e.id_uni="mp3|"+i.domain+"|"+i.url.split("/")[3].split("?")[0],e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-embed").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-embed"> </div>'))},load:function(i){$("#media-embed").html('<audio style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+"\"  controls=\"\" onended=\"listr.links.next();\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\"><source src=\""+i.url+'" type="audio/mp3"></audio>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-embed audio").trigger("pause"):$("#media-embed audio").trigger("play")},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-embed").html("")}},listr.sources.wav={buckets:["music","nsfw","gaynsfw"],_ads:!1,_pauses:!0,_streams:!0,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="wav",e.source="Direct",e.id_uni="wav|"+i.domain+"|"+i.url.split("/")[3].split("?")[0],e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-embed").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-embed"> </div>'))},load:function(i){$("#media-embed").html('<audio style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+"\"  controls=\"\" onended=\"listr.links.next();\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\"><source src=\""+i.url+'" type="audio/wav"></audio>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-embed audio").trigger("pause"):$("#media-embed audio").trigger("play")},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-embed").html("")}},listr.sources.ogg={buckets:["music","nsfw","gaynsfw"],_ads:!1,_pauses:!0,_streams:!0,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="ogg",e.source="Direct",e.id_uni="ogg|"+i.domain+"|"+i.url.split("/")[3].split("?")[0],e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-embed").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-embed"> </div>'))},load:function(i){$("#media-embed").html('<audio style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+"\"  controls=\"\" onended=\"listr.links.next();\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\"><source src=\""+i.url+'" type="audio/ogg"></audio>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-embed audio").trigger("pause"):$("#media-embed audio").trigger("play")},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-embed").html("")}},listr.sources.mp4={buckets:["vids","music","pics","eyecandy","ladycandy","nsfw","gaynsfw"],_ads:!1,_pauses:!0,_streams:!0,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="mp4",e.source="Direct",e.id_uni="mp4|"+i.domain+"|"+i.url.split("/")[3].split("?")[0],e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-embed").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp"  id="media-embed"> </div>'))},load:function(i){$("#media-embed").html('<video style="height:100%;max-width:100%;" preload="" autoplay="" poster="'+i.thumb+"\" webkit-playsinline=\"\" controls=\"\" onerror=\"setTimeout(function() { listr.links.current.descrip='Not found on host.';listr.links.current.active=false;listr.links.update(listr.links.current);listr.links.next();},500);\" onplay=\"if ($('span.btns a.resume').css('display') != 'hidden') { $('span.btns a.resume').hide(); $('span.btns a.pause').show(); }\" onpause=\"if ($('span.btns a.pause').css('display') != 'hidden') { $('span.btns a.pause').hide(); $('span.btns a.resume').show(); }\""+("media"==listr.bucket||"music"==listr.bucket||"vids"==listr.bucket?' onended="listr.links.next();"':' loop=""')+'><source src="'+i.url+'" type="video/mp4"></video>').show()},msg:function(){},pause:function(i){if(void 0===i)var i=!0;i?$("#media-embed video").trigger("pause"):$("#media-embed video").trigger("play")},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-embed").html("")}},listr.sources["bitporno.sx"]={buckets:["nsfw","gaynsfw"],_ads:!0,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("v="))return console.log("no id found!",i.url.indexOf("v=")),{};this._init||this.init();var e={};return e.kind="vid",e.source="BitPorno",e.id_source=i.url.split("v=")[1].split("/")[0].split("&")[0].split("#")[0],e.id_uni="bpo|"+e.id_source,e},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://www.bitporno.sx/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["cliphunter.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("cliphunter.com/w/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="ClipHunter",e.id_source=i.url.split("/w/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="chr|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.cliphunter.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["drtuber.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("/video/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="Dr Tuber",e.id_source=i.url.split("/video/")[1].split("/")[0].split(".")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="drt|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.drtuber.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["eroshare.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="media",e.source="Eroshare",e.id_source=i.url.split("eroshare.com/")[1].split(".")[0].split("/")[0].split("?")[0].split("#")[0],e.id_source.length<5?{}:(e.id_uni="ero|"+e.id_source,e)},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://eroshare.com/embed/'+i.id_source+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-nsfw").html("")}},listr.sources["eporner.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};e.kind="vid",e.source="ePorner",e.id_source=!1;try{e.id_source=i.url.split("/")[4].split("/")[0].split(".")[0].split("/")[0].split("?")[0].split("#")[0]}catch(t){}return $.isNumeric(e.id_source)?(e.id_uni="epr|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.eporner.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["playvids.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("/v/"))return{};var e={};return e.kind="vid",e.source="PlayVids",e.id_source=i.url.split("/v/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="pvd|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://www.playvids.com/embed/'+i.id_source+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-nsfw").html("")}},listr.sources["porndoo.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){if(this._init||this.init(),-1==i.url.indexOf("porndoo.com/video/"))return{};var e={};return e.kind="vid",e.source="porndoo",e.id_source=i.url.split("porndoo.com/video/")[1].split("/")[0].split("?")[0].split("#")[0],e.id_uni="pdo|"+e.id_source,e},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://porndoo.com/embed/'+i.id_source+'/"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-nsfw").html("")}},listr.sources["pornhd.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("pornhd.com/videos/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="PornHD",e.id_source=i.url.split("pornhd.com/videos/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="phd|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.pornhd.com/video/embed/'+i.id_source+'?highquality=1"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["pornhub.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("pornhub.com/view_video.php?viewkey="))return{};this._init||this.init();var e={};return e.kind="vid",e.source="Pornhub",e.id_source=i.url.split("pornhub.com/view_video.php?viewkey=")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="phb|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://pornhub.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["porntrex.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("porntrex.com/video/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="PornTrex",e.id_source=i.url.split("/video/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="ptx|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.porntrex.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["pornxs.com"]={buckets:["nsfw","gaynsfw"],_ads:!0,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};e.kind="vid",e.source="PornXS";try{e.id_source=i.url.split("pornxs.com/")[1].split("/")[1].split("-")[0].split(".")[0].split("?")[0].split("#")[0]}catch(t){e.id_source=!1}return $.isNumeric(e.id_source)?(e.id_uni="pxs|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://embed.pornxs.com/embed.php?id='+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["redtube.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="vid",e.source="RedTube",e.id_source=i.url.split("redtube.com/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="rte|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://embed.redtube.com/?id='+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["spankbang.com"]={buckets:["nsfw","gaynsfw"],_ads:!0,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){var e={};if(e.kind="vid",e.source="SpankBang",-1!=i.url.indexOf("/video/"))e.id_source=i.url.split("spankbang.com/")[1].split("/video/")[0];else{if(-1==i.url.indexOf("/play/"))return{};e.id_source=i.url.split("spankbang.com/")[1].split("/play/")[0]}return this._init||this.init(),e.id_uni="sbg|"+e.id_source,e},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://spankbang.com/'+i.id_source+'/embed/"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["sunporno.com"]={buckets:["nsfw","gaynsfw"],_ads:!0,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("sunporno.com/videos/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="SunPorno",e.id_source=i.url.split("sunporno.com/videos/")[1].split(".")[0].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="spo|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://embeds.sunporno.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["tnaflix.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("/video"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="TNA Flix",e.id_source=i.url.split("/video")[1].split(".")[0].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="tfx|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://player.tnaflix.com/video/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["tube8.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!1,_player:!1,defaults:function(i){this._init||this.init();var e={};return e.kind="vid",e.source="Tube8","/"==i.url.substr(-1)&&(i.url=i.url.substr(0,i.url.length-1)),e.id_source=i.url.substr(i.url.lastIndexOf("/")+1),$.isNumeric(e.id_source)?(e.id_uni="tb8|"+e.id_source,e):{}},error:function(){},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="'+i.url.replace("tube8.com/","tube8.com/embed/")+'"></iframe>').show()},msg:function(){},pause:function(){},post:function(){},search:function(i,e){e([])},seek:function(){},stop:function(){$("#media-nsfw").html("")}},listr.sources["xnxx.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("xnxx.com/video"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="xnxx",e.id_source=i.url.split("/video")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="xnx|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://flashservice.xvideos.com/embedframe/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["xvideos.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("xvideos.com/video")&&-1==i.url.indexOf("xvideos.com/embedframe/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="XVideos",-1!=i.url.indexOf("xvideos.com/embedframe/")?e.id_source=i.url.split("xvideos.com/embedframe/")[1].split("/")[0].split("?")[0].split("#")[0]:e.id_source=i.url.split("xvideos.com/video")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="xvd|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://flashservice.xvideos.com/embedframe/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["viptube.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("viptube.com/video/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="VIPtube",e.id_source=i.url.split("/video/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="vtb|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.viptube.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["xxxyours.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!0,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("xxxyours.com/video/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="XXXYours",e.id_source=i.url.split("/video/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="xys|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://xxxyours.com/embed/'+i.id_source+'"></iframe>').show();},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["youjizz.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("youjizz.com/videos/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="YouJizz",e.id_source=i.url.split("youjizz.com/videos/")[1].split(".")[0].split("/")[0].split("?")[0].split("#")[0],e.id_source=e.id_source.substr(e.id_source.lastIndexOf("-")+1),$.isNumeric(e.id_source)?(e.id_uni="yjz|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="http://www.youjizz.com/videos/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}},listr.sources["youporn.com"]={buckets:["nsfw","gaynsfw"],_ads:!1,_pauses:!1,_streams:!1,_https:!1,_events:0,_init:!1,_loaded:!0,_player:!1,defaults:function(i){if(-1==i.url.indexOf("youporn.com/watch/"))return{};this._init||this.init();var e={};return e.kind="vid",e.source="YouPorn",e.id_source=i.url.split("youporn.com/watch/")[1].split("/")[0].split("?")[0].split("#")[0],$.isNumeric(e.id_source)?(e.id_uni="ypn|"+e.id_source,e):{}},init:function(){this._init||(this._init=!0,0==$("#media-nsfw").length&&$("div.container.media div.content").append('<div class="hidden hide-on-load media-dsp" id="media-nsfw"> </div>'))},load:function(i){$("#media-nsfw").html('<iframe src="https://youporn.com/embed/'+i.id_source+'"></iframe>').show()},error:function(){},msg:function(){},seek:function(){},stop:function(){$("#media-nsfw").html("")},search:function(i,e){e([])}};
// links.js
listr.links={},listr.links.current={idx:-1,related:{},meta:{}},listr.links.list=[],listr.links.rejected=[],listr.links.stashed=[],listr.links.userBlacklist=["makeswordcloudsagain"],listr.links.blacklist=["dropbox.com/","drive.google.com/folderview","modelmayhem.com/","pokecheck.org/","commons.wikimedia.org/wiki/file:","imdb.com/","instagram.com/","video.google.com/","twitter.com/","facebook.com/","github.com/","mediafire.com/","mediacru.sh/","gifsound.com/","gfysound.com/","spring.me/",".fbcdn.net/","//fbcdn-","porndirtypix.com/",".kxcdn.com/",".kn3.net/","minus.com/","weshare.me/","imgnet.x10.mx/","tophdimgs.com/","sharethispicture.tk/","buttimage".substr(-5)+"buttnimage".substr(-6)+".com/","buttimg".substr(-3)+"buttchili".substr(-5)+".net/"],-1===navigator.userAgent.toLowerCase().indexOf("phone")&&-1===navigator.userAgent.toLowerCase().indexOf("mobile")||listr.links.blacklist.push("bandcamp.com/"),-1!==navigator.userAgent.indexOf("iPhone")&&listr.links.blacklist.push("soundcloud.com/"),listr.links.table=null,listr.links.autoskip=!1,listr.links.autoskipMS=9e3,listr.search={},listr.search.list=[],listr.search.push=function(i){listr.links.stash(),listr.links.push(listr.search.list[i]),listr.links.restore()},listr.links.defaults={kind:"",active:!0,url:"",title:"",thumb:"",descrip:"",feed:"",meta:{},related:{},feed:"",id_feed:"",utc_feed:"",subreddit:"",author:"",score:0,domain:"",source:"",id_source:"",uploader:"",uploader_title:"",uploader_url:"",id_uni:"",explodable:!1,embed:""},listr.links.stash=function(){var i=$("#links tr.selected").index(),t=[];listr.links.stashed=[],$.each(listr.links.list,function(s,e){var l=$("#links tr td i.idx-"+e.idx).parent("td").parent("tr").index();l>i?listr.links.stashed.push(e):t.push(e)}),listr.links.list=t.clone()},listr.links.restore=function(){listr.links.stashed.length>0&&(listr.links.batchPush(!0,"links"),$.each(listr.links.stashed,function(i,t){listr.links.push(t)}),listr.links.batchPush(!1,"links")),listr.links.update()},listr.links.clear=function(i){if($("ul.quickLoad,div.grid div.cardCont").html(""),void 0===i)$("div.container.links div.listings a").remove(),listr.links.list=[],listr.listings.list=[],listr.links.table.rows().remove().draw(),listr.broadcast({action:"clear",target:"links"});else if("listing"===i)$("div.container.links div.listings a").remove(),listr.listings.list=[];else if(void 0!==i.domain){var t=i.domain,s=[];$.each(listr.links.list,function(i,e){e.domain!=t&&s.push(e)}),$.each(s,function(i,t){t.idx=i}),listr.links.list=s,listr.links.table.rows().remove(),$.each(listr.links.list,function(i,t){listr.links.addRow(t)}),listr.links.table.draw()}else if(void 0!==i.kind){var e=i.kind,s=[];$.each(listr.links.list,function(i,t){t.kind!=e&&s.push(t)}),$.each(s,function(i,t){t.idx=i}),listr.links.list=s,listr.links.table.rows().remove(),$.each(listr.links.list,function(i,t){listr.links.addRow(t)}),listr.links.table.draw()}$("#nixLinks").closeModal()},listr.links.push=function(i){if(void 0===i.url)return!1;void 0!==i.idx&&delete i.idx,i.url=i.url.replace("//m.","//").replace("//en.m.","//"),i.url.lastIndexOf("/")==i.url.length-1&&(i.url=i.url.substr(0,i.url.length-1));var t=!1,s=i.url.toLowerCase();if($.each(listr.links.blacklist,function(i,e){-1!==s.indexOf(e)&&(t=!0)}),t||void 0===i.author||$.each(listr.links.userBlacklist,function(s,e){e==i.author&&(t=!0)}),t)return!1;if(void 0===i.ext||""==i.ext){var e=i.url.split("?")[0];if(e.lastIndexOf(".")>e.lastIndexOf("/")){var l=e.split("/");i.ext=l[l.length-1].split(".")[1].split("?")[0].split("&")[0].split("#")[0]}else i.ext=""}if(void 0!==i.domain&&""!=i.domain||(i.domain=i.url.split("/")[2]),void 0===i.domain)return!1;for(i.domain=i.domain.toLowerCase();i.domain.split(".").length>2&&i.domain.indexOf(".")<i.domain.length-6;)i.domain=i.domain.substr(i.domain.indexOf(".")+1);void 0!==i.thumb&&null!==i.thumb&&0==i.thumb.indexOf("http")||(i.thumb=listr.thumb),i.thumb=i.thumb.htmlDecode().replace("http://a.thumbs.redditmedia.com/","https://a.thumbs.redditmedia.com/").replace("http://b.thumbs.redditmedia.com/","https://b.thumbs.redditmedia.com/").replace("http://i.ytimg.com/","https://i.ytimg.com/").replace("http://i1.ytimg.com/","https://i1.ytimg.com/").replace("http://i2.ytimg.com/","https://i2.ytimg.com/").replace("http://i3.ytimg.com/","https://i3.ytimg.com/"),void 0===i.title&&(i.title=i.url),"http"==i.title.substr(0,4)&&(i.title=i.title.replace(/\//g,"-")),i.title=i.title.htmlDecode().replace("[FRESH] ","").replace("https:--","").replace("http:--","").replace("www.","").replace(/  /g," ").cTrim(" -,"+ENTER),'"'==i.title.substr(0,1)&&'"'==i.title.substr(-1)&&(i.title=i.title.cTrim('"')),"'"==i.title.substr(0,1)&&"'"==i.title.substr(-1)&&(i.title=i.title.cTrim("'")),"music"===listr.bucket?(i.meta=$.extend(i.meta,i.title.parseMeta()),i.title=i.title.replace("--","  ").replace(" - ","  ").replace("- ","  ").replace(" -","  "),-1==i.title.indexOf("  ")&&(i.title=i.title.replace("-","  ")),i.title=i.title.replace(/  /g," ")):"vids"===listr.bucket&&(i.meta=$.extend(i.meta,{length:""}));var n=i.domain;if(void 0===listr.sources[n]&&(n=i.ext),void 0===listr.sources[n]||"media"!=listr.bucket&&-1==$.inArray(listr.bucket,listr.sources[n].buckets)||!listr.opts.allowAds&&listr.sources[n]._ads||!listr.opts.allowNoStream&&!listr.sources[n]._streams||"https:"==document.location.protocol&&!listr.sources[n]._https)return-1==i.url.indexOf("reddit.com/")&&listr.links.rejected.push(i),!1;var r=listr.links.list.length;if("related"!=listr.links.batchTarget&&"search"!=listr.links.batchTarget||(r+=1e3),listr.links.batch){if(listr.links.batchLinks.length>999)return-1==i.url.indexOf("reddit.com/")&&listr.links.rejected.push(i),!1;r+=listr.links.batchLinks.length}var a=$.extend({idx:r,key:n},listr.links.defaults,i);if(void 0===a._defaults&&(listr.links.batch&&"links"!=listr.links.batchTarget||(a._defaults=!0),$.extend(a,listr.sources[n].defaults(a))),""==a.id_uni)return-1==a.url.indexOf("reddit.com/")&&listr.links.rejected.push(a),listr.broadcast({action:"reject",target:"source",link:a}),!1;""==a.subreddit&&void 0!==a.related.permalink&&-1!=a.related.permalink.indexOf("/r/")&&(a.subreddit=a.related.permalink.split("/r/")[1].split("/")[0].split("?")[0]);var d=!1;if($.each(listr.links.list,function(i,t){a.id_uni==t.id_uni&&(d=!0)}),d)return listr.broadcast({action:"reject",target:"duplicate",link:a}),!1;if(listr.links.batch){if($.each(listr.links.batchLinks,function(i,t){a.id_uni==t.id_uni&&(d=!0)}),d)return listr.broadcast({action:"reject",target:"batch",link:a}),!1;listr.links.batchLinks[listr.links.batchLinks.length]=a}else toast("Add: "+a.title,1e3),listr.broadcast({action:"push",target:"links",link:a}),listr.links.list[listr.links.list.length]=a,listr.links.addRow(a),"none"==$("div.container.grid").css("display")&&"none"==$("div.container.links").css("display")&&(listr.opts.showGrid?$("div.container.grid").show():$("div.container.links").show(),$(window).scroll()),1==listr.links.list.length&&setTimeout(function(){$("#links tbody tr:eq(0)").click()},250),$("div.container.links div.opts a.plAdd.blue-grey").removeClass("blue-grey").addClass("grey"),$(window).resize();return a},listr.links.search=function(i){function t(i){var t=listr.search.list.length;return t||($("#linksAdd div.results div.col.header ul").html(""),$("#linksAdd div.results div.col.content").html("")),listr.links.batchPush(!0,"search"),$.each(i,function(t,s){i[t]=listr.links.push(s)}),listr.links.batchPush(!1,"search"),self!=top?void(listr.search.list=[]):void $.each(i,function(i,s){if(s!==!1){var e="#linksAdd div.results div.col.header ul.tabs li."+s.source.toLowerCase(),l="#results-"+s.source.toLowerCase();0===$(e).length&&($("#linksAdd div.results div.col.header ul").append('<li class="tab '+s.source.toLowerCase()+'"><a href="'+l+'">'+s.source+"</a></li>"),$("#linksAdd div.results div.col.content").append('<div id="'+l.substr(1)+'" class="col s12"> </div>'),setTimeout(function(){$("#linksAdd ul.tabs").tabs(),t&&$("#linksAdd ul.tabs li:first a").click()}));var n=l+" div."+s.kind;0==$(n).length&&$(l).append('<div class="'+s.kind+'"><h4>'+s.kind+"s</h4></div>"),$(n).append('<div class="link-dsp z-depth-1 idx-'+s.idx+'"><img class="thumb z-depth-1 hide-on-small-only" src="'+s.thumb+'"><h6><span class="title">'+s.title+'</span> (<span class="source">'+s.source+"</span>)</h6><p>"+s.descrip+'</p><div class="opts"><a onClick="listr.links.load(listr.search.list['+(t+i)+']);" class="waves-effect waves-light btn"><i class="mdi-action-visibility left"></i>load</a><a onClick="listr.search.push('+(t+i)+');" class="waves-effect waves-light btn"><i class="mdi-av-queue left"></i>queue</a><a onClick="listr.links.stop();" target="_blank" href="'+s.url+'" class="waves-effect waves-light btn"><i class="mdi-action-open-in-new left"></i>open</a></div></div>')}})}listr.search.list=[],$("#linksAdd div.results").show(),$("#linksAdd div.results div.col.content").html('<p style="text-align:center">searching for '+i+"&hellip;</p>"),$.each(listr.sources,function(s,e){-1!=$.inArray(listr.bucket,listr.sources[s].buckets)&&e.search(i,t)})},listr.links.addRow=function(i){"music"==listr.bucket?listr.links.table.row.add(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.meta.artist,i.meta.track,i.meta.genre,i.meta.year,$.isNumeric(i.meta.length)?i.meta.length.toMMSS():i.meta.length,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']):"vids"==listr.bucket?listr.links.table.row.add(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.title,$.isNumeric(i.meta.length)?i.meta.length.toMMSS():i.meta.length,i.kind,i.author,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']):listr.links.table.row.add(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.title,i.kind,i.author,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']),listr.links.quicklinkAdd(i)},listr.links.quickloadRefresh=function(){$("ul.quickLoad,div.container.grid div.cardCont").html(""),listr.links.table.rows().iterator("row",function(i,t){var s=listr.links.table.row(t).data(),e=parseInt($("<div/>").html(s[0]).find(".pos").text());listr.links.quicklinkAdd(listr.links.list[e])}),$("ul.quickLoad li.idx-"+listr.links.current.idx).length>0&&($("ul.quickLoad li.active").removeClass("active"),$("#links tr.selected").removeClass("selected"),$("ul.quickLoad li.idx-"+listr.links.current.idx+",div.grid div.cardCont div.card.idx-"+listr.links.current.idx).addClass("active"),$("#links tr td i.pos.idx-"+listr.links.current.idx).parent("td").parent("tr").addClass("selected"),$("ul.quickLoad").animate({scrollTop:$("ul.quickLoad").scrollTop()+$("ul.quickLoad li.idx-"+listr.links.current.idx).position().top-window.size().height/4+75},333),$("div.grid div.cardCont").animate({scrollTop:$("div.grid div.cardCont").scrollTop()+$("div.grid div.cardCont div.card.idx-"+listr.links.current.idx).position().top-1.1*window.size().height},333));var i=listr.listings.list.clone();listr.listings.list=[],$("div.container.links div.listings a").remove(),$.each(i,function(i,t){listr.listings.push(t)})},listr.links.quicklinkAdd=function(i){if(void 0!==i){var t=i.title.htmlDecode();$("span.btns select.jump").append('<option value="'+i.idx+'">'+t.substr(0,75)+"</option>"),"music"===listr.bucket&&(t=""!=i.meta.artist?"<b>"+i.meta.artist+"</b><br><i>"+i.meta.track+"</i>"+(""!=i.meta.genre?'<br><span class="genres capitalize">'+i.meta.genre.replace(/<br>/g,"/ ").replace(/,/g,"/ ").replace(/ \/ /g,"/ ")+"</span>":"")+(""!=i.meta.year?"<br>"+i.meta.year:""):t.replace(" [","<br>[").replace("] (","]<br>(").replace("](","]<br>("));var s=$("ul.quickLoad li.listing");if(s.length>0&&s.detach(),$("ul.quickLoad").append('<li class="idx-'+i.idx+'"><span><img class="thumb" src="'+listr.thumb+'">'+t+"</span></li>"),s.length>0&&s.appendTo($("ul.quickLoad")),s=$("div.cardCont div.card.listing").parent("div"),s.length>0&&s.detach(),$("div.container.grid div.cardCont").append('<div class="col l3 m6 s12"><div class="card idx-'+i.idx+' grey lighten-4 z-depth-2"><div class="about"><div class="title">'+t+'</div></div><div class="btns"><i class="nix small mdi-content-clear blue-text text-darken-4 hide-on-small-only"></i><i class="open small mdi-action-open-in-new blue-text text-darken-4 hide-on-small-only"></i></div><div class="thumb"><img class="z-depth-1" src="/img/little_r.png"><br><div class="details">'+i.source+"<br>"+i.kind+"</div></div></div></div>"),s.length>0&&s.appendTo($("div.container.grid div.content div.cardCont")),self==top||"string"==$.type(document.referrer)&&0==document.referrer.indexOf("http")){var e=$("ul.quickLoad li.idx-"+i.idx+" span img"),l=$("div.container.grid div.card.idx-"+i.idx+" div.thumb img"),n=new Image;n.onload=function(){e.attr("src",this.src),l.attr("src",this.src)},n.onerror=function(){var t=this.src;-1!=t.indexOf("imgur.com/")&&(-1!=t.indexOf("lm.jpg")?(t=t.replace("lm.jpg","m.jpg"),e.attr("src",t),l.attr("src",t),i.thumb=t):-1!=t.indexOf("hm.jpg")?(t=t.replace("hm.jpg","m.jpg"),e.attr("src",t),l.attr("src",t),i.thumb=t):console.log("imgur missing thumb: "+t))},n.src=i.thumb}}},listr.links.batch=!1,listr.links.batchTarget=!1,listr.links.batchLinks=[],listr.links.batchPush=function(i,t){if(void 0===t)var t="links";if(listr.links.batch=i,listr.links.batch)listr.links.batchTarget=t,listr.broadcast({action:"batchPush",target:t,val:"start"});else{if("links"===t){if(0==listr.links.batchLinks.length)return void(listr.opts.embedded?alert("Ooopsie, no valid links were found!"+ENTER+ENTER+"Try this link on radd.it!  The embedded player doesn't support all sites!"):alert("Ooopsie, no valid links were found!"));if(listr.opts.shuffleOnLoad){var s=listr.links.list.length;listr.links.batchLinks.shuffle(),$.each(listr.links.batchLinks,function(i,t){t.idx=i+s})}}$.each(listr.links.batchLinks,function(i,s){var e=!1;"search"==t?$.each(listr.search.list,function(i,t){s.id_uni==t.id_uni&&(e=!0)}):"related"==t?$.each(listr.related.list,function(i,t){s.id_uni==t.id_uni&&(e=!0)}):$.each(listr.links.list,function(i,t){s.id_uni==t.id_uni&&(e=!0)}),e||(listr.broadcast({action:"push",target:t,link:s}),"search"==t?listr.search.list.push(s):"related"==t?listr.related.list.push(s):(listr.links.list.push(s),listr.links.addRow(s))),listr.links.batchTarget=!1}),"links"===t&&($(window).resize(),"none"==$("div.container.grid").css("display")&&"none"==$("div.container.links").css("display")&&(listr.opts.showGrid?$("div.container.grid").show():$("div.container.links").show(),listr.navi.update()),listr.links.batchLinks.length>0&&(0===$("div.container.links tr.selected").length||$("div.container.links tr.selected").index()===$("div.container.links tr").length-3)&&setTimeout(function(){listr.links.next()})),listr.broadcast({action:"batchPush",target:t,val:"stop"}),listr.links.batchLinks=[]}},listr.links.hoverCard=function(i,t){$("#hoverCard div.card-image img").attr("src",t.thumb);var s="";""!=t.title&&(s+="<b>"+t.title+"</b>"),""!=t.kind&&(s+=" ("+t.kind+")"),void 0!==t.meta.length&&""!=t.meta.length&&(s+=t.meta.length+" "),""!=t.url&&(s+="<br><i>"+t.url.replace("https://","").replace("http://","").replace("www.","").substr(0,30)+(t.url.length>36?"&hellip;":"")+"</i><br>"),s+="<br>",""==t.author&&""==t.subreddit||(s+="Posted "),""!=t.author&&(s+="by u/"+t.author),""!=t.subreddit&&(s+=" to r/"+t.subreddit,0!=t.score&&(s+="<br>"+t.score+" pts<br>")),""==t.author&&""==t.subreddit||(s+="<br>"),""!=t.descrip&&(s+=t.descrip),s.length>0?$("#hoverCard div.card-content").html(s).show():$("#hoverCard div.card-content").html("").hide(),$("#hoverCard").show().css("left",i.x.toString()+"px").css("top",i.y.toString()+"px")},$(document).ready(function(){setTimeout(function(){listr.broadcast({action:"init",bucket:listr.bucket,user:listr.user,opts:listr.opts})});var i=[{width:"4%"},{width:"50%"},{width:"10%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"10%"},{width:"5%"}];"music"==listr.bucket?i=[{width:"3%"},{width:"20%"},{width:"20%"},{width:"15%"},{width:"8%"},{width:"8%"},{width:"3%"},{width:"10%"},{width:"10%"},{width:"3%"}]:"vids"==listr.bucket&&(i=[{width:"3%"},{width:"50%"},{width:"10%"},{width:"5%"},{width:"10%"},{width:"3%"},{width:"10%"},{width:"15%"},{width:"3%"}]),listr.links.table=$("#links").DataTable({deferRender:!0,paging:!1,scrollY:$(window).height()-221,columns:i}),$("#quick-search-query").click(function(){"Quickload"==$(this).val()&&$(this).val("")}),$("a.quick-search-full").click(function(){var i=$("#quick-search-query").val();return"Quickload"==i?void alert("First enter your search to the left."):i.length<3?void alert("Search must be at least 3 characters."):($("#linksAddQry").val(i),$("#linksAdd a.linksSearch").click(),$("#linksAdd").openModal(),void $("#linksAdd div.input-field label").addClass("active"))}),$("a.quick-search-go,a.quick-search-random").click(function(){function i(i){if(0==i.length)return void l++;if(listr.links.batchPush(!0,"search"),$.each(i,function(i,t){("music"!=listr.bucket||-1==t.title.toLowerCase().indexOf("cover")&&-1==t.title.toLowerCase().indexOf("mashup"))&&listr.links.push(t)}),listr.links.batchPush(!1,"search"),++l==e||l+1==e&&listr.search.list.length>0){if(0==listr.search.list.length)alert("No links found!");else if("top"==s)self!=top?listr.links.push(listr.search.list[0]):listr.links.load(listr.search.list[0]);else if("random"==s){for(var t=0,n=listr.search.list.random();3>t&&n.id_uni==listr.links.current.id_uni;)n=listr.search.list.random(),t++;listr.links.load(n)}$("#loading").hide()}}var t=$("#quick-search-query").val();if("Quickload"==t)return void alert("First enter your search to the left.");if(t.length<3)return void alert("Search must be at least 3 characters.");var s="top";$(this).hasClass("quick-search-random")&&(s="random"),$("#loading").show(),listr.search.list=[];var e=0,l=0;$.each(listr.sources,function(s,l){-1!=$.inArray(listr.bucket,listr.sources[s].buckets)&&(e++,l.search(t,i))})}),$("a.explode").click(function(){listr.sources[listr.links.current.key].explode(listr.links.current.url)}),$("div.container.media div.opts div.progressBar").click(function(i){var t=$("div.progressBar").width();t>0&&($("#progress").stop().animate({width:i.offsetX},100,"linear"),listr.sources[listr.links.current.key].seek(i.offsetX/t))}),$("div.container.media div.opts").on("click","a.addFeed",function(i){i.preventDefault(),$("#addFeed").openModal(),setTimeout(function(){$("#addfeed-direct-url").val("/r/"+listr.links.current.subreddit),$("#addFeed div.step1").hide(),$("a.addfeed-direct").click()})}),$("ul.quickLoad").scroll(function(){$("ul.quickLoad li:last").offset().top<2*$("ul.quickLoad").height()&&$("ul.quickLoad li.listing:first").click()}),$("#links tbody").on("click","tr",function(){var i=listr.links.table.row(this).data();if(void 0!==i){listr.links.table.$("tr.selected").removeClass("selected"),$(this).addClass("selected"),$("div.container.links div.dataTables_scrollBody").animate({scrollTop:$("div.container.links div.dataTables_scrollBody").scrollTop()+$("#links tr.selected").position().top-2*$("#links tr.selected").height()},250);var t=$(this).find("i.pos").text();setTimeout(function(){listr.links.load(t)})}}),$("div.container.links div.dataTables_scrollHead").click(function(i){if($(i.target).hasClass("shuffle"))if(listr.opts.shuffleOnLoad=!listr.opts.shuffleOnLoad,listr.opts.shuffleOnLoad){$("th.shuffle i").addClass("blue-grey"),$("a.togShuffle").addClass("blue-grey").removeClass("grey");var t=listr.links.list.splice(listr.links.current.idx+1,listr.links.list.length-listr.links.current.idx-1);listr.links.batchPush(!0),$.each(t,function(i,t){listr.links.push(t)}),listr.links.batchPush(!1),listr.links.update()}else $("th.shuffle i").removeClass("blue-grey"),$("a.togShuffle").addClass("grey").removeClass("blue-grey");else setTimeout(function(){listr.links.quickloadRefresh()})}),$("th.shuffle").unbind("click"),$("#links_wrapper").addClass("z-depth-1"),$("div.grid div.content div.cardCont").on("click","div.card div.btns i.open",function(){var i=-1,t=$(this).parent("div").parent("div.card").attr("class").split(/\s+/);$.each(t,function(t,s){0==s.indexOf("idx-")&&(i=parseInt(s.replace("idx-","")))}),-1!=i&&void 0!==listr.links.list[i]&&window.open(listr.links.list[i].url,"_blank")}),$("div.grid div.content div.cardCont").on("mouseover","div.card div.thumb img",function(i){if(!($("#hoverCard:visible").length>0)){var t=-1,s=$(this).parent("div").parent("div.card").attr("class").split(/\s+/);$.each(s,function(i,s){0==s.indexOf("idx-")&&(t=parseInt(s.replace("idx-","")))});var e=$("#hoverCard").height()*-.666;"none"!=$("div.container.media").css("display")&&(e+=$("div.container.media").height()),i.clientY+e<$("div.container.grid").position().top?e=$("div.container.grid").position().top-i.clientY:i.clientY+e+$("#hoverCard").height()>$("div.container.grid").position().top+$(window).height()&&(e=$("div.container.grid").position().top+$(window).height()-i.clientY-$("#hoverCard").height()-$(window).height()/20);var l=0;l=i.pageX+$("#hoverCard").width()+48<$(window).width()?i.pageX+32:i.pageX-$("#hoverCard").width()-48,l>0&&-1!=t&&listr.links.hoverCard({x:l,y:i.clientY+e},listr.links.list[t])}}),$("div.grid div.content div.cardCont").on("mouseout","div.card",function(){$("#hoverCard").hide()}),$("#hoverCard").click(function(){$("#hoverCard").hide()}),$("#links tbody").on("mouseover","tr td i.about",function(i){var t=listr.links.table.row($(this).parents("tr")).data(),s=parseInt($("<div/>").html(t[0]).find(".pos").text());if(void 0===listr.links.list[s]&&(s=parseInt($("<div/>").html(t[1]).find(".pos").text())),!(void 0===listr.links.list[s]||$(window).width()<321)){var e=-365,l=$("#hoverCard").height()*-.666;"none"!==$("div.container.media").css("display")&&(l+=$("div.container.media").height()),i.clientY+l<$("div.container.links").position().top?l=$("div.container.links").position().top-i.clientY:i.clientY+l+$("#hoverCard").height()>$("div.container.links").position().top+$(window).height()&&(l=$("div.container.links").position().top+$(window).height()-i.clientY-$("#hoverCard").height()-$(window).height()/20),listr.links.hoverCard({x:i.clientX+e,y:i.clientY+l},listr.links.list[s])}}),$("#links tbody").on("mouseout","tr td",function(){$("#hoverCard").hide()}),$("div.grid div.content div.cardCont").on("click","div.card div.btns i.nix",function(){event.stopPropagation();var i=-1,t=$(this).parent("div").parent("div.card").attr("class").split(/\s+/);if($.each(t,function(t,s){0==s.indexOf("idx-")&&(i=parseInt(s.replace("idx-","")))}),-1!=i){var s=$("ul.quickLoad li.listing");s.length>0&&s.detach(),$("ul.quickLoad li,div.grid div.cardCont div.card").remove(),listr.links.table.rows().remove(),listr.links.list.splice(i,1);for(var e=listr.links.list.length,l=i;e>l;l++)listr.links.list[l].idx=listr.links.list[l].idx-1;$.each(listr.links.list,function(i,t){listr.links.addRow(t)}),listr.links.table.draw(!1),s.length>0&&s.appendTo($("ul.quickLoad")),$("ul.quickLoad li.idx-"+listr.links.current.idx).addClass("active"),i===listr.links.current.idx?$("#links tbody tr:eq("+i+")").click():$("#links tbody tr:eq("+listr.links.current.idx+")").addClass("selected")}}),$("#links tbody").on("click","tr td i.nix",function(){event.stopPropagation();var i=parseInt($(this).parent("td").parent("tr").find("i.pos").text());if(void 0!==listr.links.list[i]){var t=$("ul.quickLoad li.listing");t.length>0&&t.detach(),$("ul.quickLoad li,div.grid div.cardCont div.card").remove(),listr.links.table.rows().remove(),listr.links.list.splice(i,1);for(var s=listr.links.list.length,e=i;s>e;e++)listr.links.list[e].idx=listr.links.list[e].idx-1;$.each(listr.links.list,function(i,t){listr.links.addRow(t)}),listr.links.table.draw(!1),t.length>0&&t.appendTo($("ul.quickLoad")),$("ul.quickLoad li.idx-"+listr.links.current.idx).addClass("active"),i===listr.links.current.idx?$("#links tbody tr:eq("+i+")").click():$("#links tbody tr:eq("+listr.links.current.idx+")").addClass("selected")}}),$("span.btns a.prev").click(function(){$(this).hasClass("clicked")?($(this).removeClass("clicked"),setTimeout(function(){$("#links tr:eq(1)").children("td").eq(0).click()})):($(this).addClass("clicked"),setTimeout(function(){if($("span.btns a.prev").hasClass("clicked")){$("span.btns a.prev").removeClass("clicked");var i=parseInt($("#links tr.selected").find("i.pos").text());void 0===listr.links.list[i]?$("#links tr").eq(1).children("td").eq(0).click():listr.links.current.url!=listr.links.list[i].url?$("#links tr.selected").children("td").eq(0).click():$("#links tr.selected").prev().index()>=0&&$("#links tr.selected").prev().children("td").eq(0).click()}},250)),window.getSelection().removeAllRanges()}),$("span.btns a.next").click(function(){$("span.btns a.next.clicked").length>0?($("span.btns a.next.clicked").removeClass("clicked"),listr.links.autoskip?($("span.btns a.next").addClass("grey").removeClass("green"),clearTimeout(listr.links.autoskip),listr.links.autoskip=!1):($("span.btns a.next").addClass("green").removeClass("grey"),listr.links.autoskip=setTimeout(function(){listr.links.next()},listr.links.autoskipMS))):($("span.btns a.next").not(".clicked").addClass("clicked"),setTimeout(function(){$("span.btns a.next.clicked").length>0&&($("span.btns a.next.clicked").removeClass("clicked"),0==$("div.container.links tr.selected").length?$("#links tr:eq(1) td:eq(0)").click():$("#links tr.selected").next().children("td").eq(0).length>0?$("#links tr.selected").next().children("td").eq(0).click():$("div.container.links div.listings a:eq(0)").length>0?$("div.container.links div.listings a:eq(0)").click():listr.links.stop())},333)),window.getSelection().removeAllRanges()}),$("span.btns a.pause").click(function(){"pics"!=listr.bucket&&"eyecandy"!=listr.bucket&&"ladycandy"!=listr.bucket&&listr.sources[listr.links.current.key].pause(!0),listr.broadcast({action:"pause",target:"links",link:listr.links.current}),$("span.btns a.pause").hide(),$("span.btns a.resume").show()}),$("span.btns a.resume").click(function(){listr.sources[listr.links.current.key].pause(!1),listr.broadcast({action:"resume",target:"links",link:listr.links.current}),$("span.btns a.resume").hide(),$("span.btns a.pause").show()}),$("nav span.select-dropdown").click(function(i){var t=$("ul.quickLoad");return i.stopPropagation(),0==listr.links.list.length?void setTimeout(function(){$("ul.quickLoad").stop(),$("body").click()}):void(!t.hasClass("virgin")&&t.hasClass("keepOpen")?($("div.container.media div.content").css("max-width","").children("div,iframe").css("max-width",""),$("div.navBtns a:last").removeClass("darken-2").addClass("darken-4"),t.removeClass("keepOpen"),setTimeout(function(){$("body").click()}),setTimeout(function(){$("a.aboutMin:visible").click()},225),$.cookie(listr.bucket+"|showQuick","false")):($("select.jump.virgin").removeClass("virgin"),$("div.navBtns a:last").removeClass("darken-4").addClass("darken-2"),setTimeout(function(){t.stop().css({"overflow-y":"auto",width:"320px",height:"0px","max-height":"0px",left:"",right:"0",position:"absolute",display:"block"});var i=window.size();i.halfSize&&(i.height*=2),i.width>960&&($("div.container.media div.content").css("max-width",i.width-320+"px").children("div,iframe").css("max-width",i.width-320+"px"),t.addClass("keepOpen"),$.cookie(listr.bucket+"|showQuick","true")),$("ul.quickLoad li.idx-"+listr.links.current.idx).length>0?t.animate({height:i.height-66,"max-height":i.height-66,scrollTop:$("ul.quickLoad").scrollTop()+$("ul.quickLoad li.idx-"+listr.links.current.idx).position().top-i.height/4+75},333):t.animate({height:i.height-66,"max-height":i.height-66},333)})))}),$("div.grid div.cardCont").on("click","div.card",function(i){if(!($(i.target).hasClass("nix")||$(i.target).hasClass("append")||$(i.target).hasClass("open")))if($(this).hasClass("listing")){var t=$(this).attr("class").split(/\s+/),s=-1;if($.each(t,function(i,t){0==t.indexOf("listing-")&&(s=parseInt(t.replace("listing-","")))}),void 0===listr.listings.list[s])return void console.log("ERROR: no listing data for "+s);-1==s?console.log("ERROR: listing not found for quickload"):$("div.listings a:eq("+s+")").click()}else{var t=$(this).attr("class").split(/\s+/),e=-1;$.each(t,function(i,t){0==t.indexOf("idx-")&&(e=parseInt(t.replace("idx-","")))}),-1==e?console.log("ERROR: idx not found for quickload"):$("#links tbody tr td").find("i.idx-"+e).parent("td").parent("tr").click()}}),$("ul.quickLoad").on("click","li",function(){if($(this).hasClass("listing")){var i=$(this).attr("class").split(/\s+/),t=-1;if($.each(i,function(i,s){0==s.indexOf("listing-")&&(t=parseInt(s.replace("listing-","")))}),void 0===listr.listings.list[t])return void console.log("ERROR: no listing data for "+t);-1==t?console.log("ERROR: listing not found for quickload"):$("div.listings a:eq("+t+")").click()}else{var i=$(this).attr("class").split(/\s+/),s=-1;$.each(i,function(i,t){0==t.indexOf("idx-")&&(s=parseInt(t.replace("idx-","")))}),-1==s?console.log("ERROR: idx not found for quickload"):$("#links tbody tr td").find("i.idx-"+s).parent("td").parent("tr").click()}}),$("a.togShuffle").click(function(i){setTimeout(function(){$("th.shuffle").click()}),i.preventDefault()}),$("a.togLinks").click(function(i){$("div.container.options div."+listr.bucket+' div.showGrid input[display!="none"]').click(),i.preventDefault()}),$("a.nixLinks").click(function(){var i=[],t=[];$.each(listr.links.list,function(s,e){""!=e.kind&&-1===$.inArray(e.kind,i)&&i.push(e.kind),""!=e.domain&&-1===$.inArray(e.domain,t)&&t.push(e.domain)});var s="";$.each(i,function(i,t){s+="<a onclick=\"listr.links.clear({'kind':'"+t+'\'});" class="waves-effect waves-light btn-large darken-2"><i class="mdi-content-clear left"></i>Remove '+t+"s</a>"}),$.each(t,function(i,t){s+="<a onclick=\"listr.links.clear({'domain':'"+t+'\'});" class="waves-effect waves-light btn-large darken-2"><i class="mdi-content-clear left"></i>Remove '+t+"</a>"}),$("#nixLinks span.options").html(s)}),$("div.container.links div.opts a.addLink").click(function(){$("#linksAdd input").focus()}),$("#linksAdd a.linksSearch").click(function(){var i=$("#linksAdd input").val();listr.links.search(i)}),$("div.container.media div.opts span."+listr.bucket).show()}),$(window).resize(function(){var i=window.size();null!==listr.links.table&&(i.halfSize?($("#links_filter,div.container.media div.qsCont,div.container.media div.afterCont").hide(),"music"===listr.bucket?(listr.links.table.columns(1).visible(!1),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1),listr.links.table.columns(8).visible(!1),listr.links.table.columns(9).visible(!1)):"vids"===listr.bucket?(listr.links.table.columns(2).visible(!1),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1),listr.links.table.columns(8).visible(!1)):(listr.links.table.columns(2).visible(!1),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1))):i.width<600?($("#links_filter,div.container.media div.qsCont").hide(),$("div.container.media div.afterCont").show(),"music"===listr.bucket?(listr.links.table.columns(1).visible(!0),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1),listr.links.table.columns(8).visible(!1),listr.links.table.columns(9).visible(!0)):"vids"===listr.bucket?(listr.links.table.columns(2).visible(!0),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1),listr.links.table.columns(8).visible(!0)):(listr.links.table.columns(2).visible(!1),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!0))):i.width<960?($("#links_filter,div.container.media div.qsCont").hide(),$("div.container.media div.afterCont").show(),"music"===listr.bucket?(listr.links.table.columns(1).visible(!0),listr.links.table.columns(3).visible(!0),listr.links.table.columns(4).visible(!0),listr.links.table.columns(5).visible(!0),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!1),listr.links.table.columns(8).visible(!1),listr.links.table.columns(9).visible(!0)):"vids"===listr.bucket?(listr.links.table.columns(2).visible(!0),listr.links.table.columns(3).visible(!0),listr.links.table.columns(4).visible(!1),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!0),listr.links.table.columns(8).visible(!0)):(listr.links.table.columns(2).visible(!0),listr.links.table.columns(3).visible(!1),listr.links.table.columns(4).visible(!0),listr.links.table.columns(5).visible(!1),listr.links.table.columns(6).visible(!1),listr.links.table.columns(7).visible(!0))):($("#links_filter,div.container.media div.qsCont,div.container.media div.afterCont").show(),"music"===listr.bucket?(listr.links.table.columns(1).visible(!0),listr.links.table.columns(3).visible(!0),listr.links.table.columns(4).visible(!0),listr.links.table.columns(5).visible(!0),listr.links.table.columns(6).visible(!0),listr.links.table.columns(7).visible(!0),listr.links.table.columns(8).visible(!0),listr.links.table.columns(9).visible(!0)):"vids"===listr.bucket?(listr.links.table.columns(2).visible(!0),listr.links.table.columns(3).visible(!0),listr.links.table.columns(4).visible(!0),listr.links.table.columns(5).visible(!0),listr.links.table.columns(6).visible(!0),listr.links.table.columns(7).visible(!0),listr.links.table.columns(8).visible(!0)):(listr.links.table.columns(2).visible(!0),listr.links.table.columns(3).visible(!0),listr.links.table.columns(4).visible(!0),listr.links.table.columns(5).visible(!0),listr.links.table.columns(6).visible(!0),listr.links.table.columns(7).visible(!0))),setTimeout(function(){listr.links.table.draw(!1)}),i.width<960?$("ul.quickLoad.keepOpen").length>0&&($("ul.quickLoad.keepOpen").removeClass("keepOpen"),$("div.container.media div.content").css("max-width","").children("div,iframe").css("max-width","")):"none"!==$("ul.quickLoad").css("display")&&($("ul.quickLoad").not(".keepOpen").addClass("keepOpen"),$("div.container.media div.content").css("max-width",i.width-320+"px").children("div,iframe").css("max-width",i.width-320+"px")),$("ul.quickLoad").css({height:i.height-62,"max-height":i.height-62}))}),listr.links.update=function(i){if(void 0===i)var i=!1;else $.isNumeric(i)&&(i=listr.links.list[i]);if(i){if($("#relatedLinks li.idx-"+i.idx).length>0){var t=$("#relatedLinks li.idx-"+i.idx);t.children("a").html(i.title)}else if($("#linksAdd div.results div div.idx-"+i.idx).length>0);else if($("#links tr td i.idx-"+i.idx).length>0){var s=listr.links.table.row(i.idx);if(void 0===s)return;var e="mdi-action-info-outline";if(i.active){var l=$("ul.quickLoad li.idx-"+i.idx);if(l.length>0){var n=i.title.htmlDecode();"music"===listr.bucket&&(n=""!=i.meta.artist?"<b>"+i.meta.artist+"</b><br><i>"+i.meta.track+"</i>"+(""!=i.meta.genre?'<br><span class="capitalize">'+i.meta.genre.replace(/<br>/g,"/ ").replace(/,/g,"/ ").replace(/ \/ /g,"/ ")+"</span>":"")+(""!=i.meta.year?"<br>"+i.meta.year:""):n.replace(" [","<br>[").replace("] (","]<br>(").replace("](","]<br>(")),l.children("span").html('<img class="thumb" src="'+i.thumb+'">'+n),listr.broadcast({action:"update",target:"links",link:i})}}else e="mdi-alert-warning",$("ul.quickLoad li.idx-"+i.idx).css("color","lightgrey");"music"===listr.bucket?s.data(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.meta.artist,i.meta.track,i.meta.genre,i.meta.year,$.isNumeric(i.meta.length)?i.meta.length.toMMSS():i.meta.length,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']).draw(!1):"vids"===listr.bucket?s.data(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.title,$.isNumeric(i.meta.length)?i.meta.length.toMMSS():i.meta.length,i.kind,i.author,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']).draw(!1):s.data(['<i class="pos idx-'+i.idx+'">'+i.idx+"</i>",i.title,i.kind,i.author,i.score,i.subreddit,i.source,'<i class="about mdi-action-info-outline"></i><i class="nix mdi-action-highlight-remove"></i>']).draw(!1)}i.idx==listr.links.current.idx&&i.id_uni==listr.links.current.id_uni&&(self==top&&(document.title="radd.it: "+i.title),$("div.container.media div.section.opts .title h4,nav span.title").text(i.title),"music"===listr.bucket&&i.meta.artist.length>0?$("#quick-search-query").val(i.meta.artist):i.title.isBadTitle()||$("#quick-search-query").val(i.title.firstProperNoun()))}else listr.links.table.rows().remove(),$.each(listr.links.list,function(i,t){listr.links.addRow(t)}),listr.links.table.draw(!1),listr.links.quickloadRefresh()},listr.links.load=function(i){if($.isNumeric(i))if(void 0!==listr.links.list[i])i=listr.links.list[i];else{var t=-1;$.each(listr.links.list,function(s,e){e.idx==i&&(t=s)}),-1!=t&&(i=listr.links.list[t])}var s=i.domain;if(void 0===listr.sources[s]&&(s=i.ext),void 0===listr.sources[s])return console.log("LOAD ERROR, no source for "+i.domain+" or ext for "+i.ext,i),void listr.links.next();try{if(!i.active||!listr.opts.allowNoStream&&!listr.sources[s]._streams||!listr.opts.allowAds&&listr.sources[s]._ads||!listr.opts.allowNSFW&&i.meta.nsfw)return listr.broadcast({action:"reject",target:"links",link:i}),void listr.links.next();if("https:"==document.location.protocol&&!listr.sources[s]._https)return listr.broadcast({action:"reject",target:"links",link:i}),i.descrip="HTTPS not supported.",i.active=!1,listr.links.update(i),void listr.links.next()}catch(e){}listr.links.stop(),listr.links.current=i,self==top&&(document.title="radd.it: "+i.title),void 0!==i.subreddit&&i.subreddit.length>0?listr.user?$("span.abPostFeed").html('to <a class="addFeed" href="#addFeed" title="add r/'+i.subreddit+' to feeds">r/'+i.subreddit+"</a>"):$("span.abPostFeed").html('to <a class="feedOpen" title="open r/'+i.subreddit+'" target="_blank" href="https://reddit.com/r/'+i.subreddit+'">r/'+i.subreddit+"</a>"):$("span.abPostFeed").html(""),void 0!==i.source&&i.source.length>0?$("span.abPostSource").html('<a class="sourceOpen" title="open '+i.kind+" on "+i.source+'" target="_blank" href="'+i.url.replace("/embed","").replace("?embed","?")+'">'+i.source+"</a>"):$("span.abPostSource").html(""),$("span.abLinksCnt,span.abCommentsCnt").html(""),$("div.container.media div.section.opts .title h4,nav span.title").text(i.title),$(".hide-on-load").hide(),(i.idx<listr.links.list.length||self!=top)&&(listr.links.rejected=[],listr.related.list=[],listr.related.last=-1,$("#linksAdd").closeModal(),$("#linksAdd div.results div.col.header ul").html(""),$("#linksAdd div.results div.col.content").html(""),$("#linksAdd div.results").hide()),self==top&&(0==Object.keys(i.related).length?$("div.media div.opts a.addLink").show():$.each(i.related,function(i,t){void 0!==t&&(void 0!==listr.related[i]?setTimeout(function(){listr.related[i](t)}):console.log("ERROR: No related handler found for "+i))})),"music"===listr.bucket&&i.meta.artist.length>0?$("#linksAddQry").val(i.meta.artist):i.title.isBadTitle()||$("#linksAddQry").val(i.title.firstProperNoun()),$("#linksAdd div.input-field label").addClass("active"),$("a.blue-grey").not(".keep-color").removeClass("blue-grey").addClass("grey"),i.explodable&&i.idx<listr.links.list.length&&$("a.explode."+i.explodable).show();var l="#121211";void 0!==listr.sources[s].bgColor&&(l=listr.sources[s].bgColor),$("div.container.media").css("background-color",l),"media"==listr.navi.sections[listr.navi.active]&&$(window).scrollTop()<8&&""!=$("div.container.media").css("min-height")?$("#naviDown").css("background-color",l):$("#naviDown").css("background-color",""),"music"==listr.bucket&&($("div.container.media div.opts a.amazon").unbind("click").click(function(){""==i.meta.artist?window.open("http://www.amazon.com/s?field-keywords="+listr.links.current.meta.track.replace(/&/g,"and")+"&camp=1789&creative=390957&linkCode=ur2&tag=raddit-20","_blank"):window.open("http://www.amazon.com/s?field-keywords="+listr.links.current.meta.artist.replace(/&/g,"and")+" "+listr.links.current.meta.track.replace(/&/g,"and")+"&camp=1789&creative=390957&linkCode=ur2&tag=raddit-20","_blank")}).show(),$("#visualizer").length>0&&(listr.sources[s]._pauses?$("#visualizer").show():$("#visualizer").hide())),i.idx<listr.links.list.length&&($("ul.quickLoad li.active,div.grid div.card.active").removeClass("active"),$("ul.quickLoad li.idx-"+i.idx).addClass("active"),$("div.grid div.card.idx-"+i.idx).addClass("active"),$("ul.quickLoad").animate({scrollTop:$("ul.quickLoad").scrollTop()+$("ul.quickLoad li.idx-"+i.idx).position().top-window.size().height/4+75},333),$("div.grid div.cardCont").animate({scrollTop:$("div.grid div.cardCont").scrollTop()+$("div.grid div.cardCont div.card.idx-"+i.idx).position().top-1.15*window.size().height},333)),listr.sources[s].load(i),listr.broadcast({action:"load",target:"links",link:i}),listr.links.autoskip&&(clearTimeout(listr.links.autoskip),i.idx==listr.links.list.length-1&&0==$("div.container.links div.listings a:eq(0)").length?$("span.btns a.next").click().click():listr.links.autoskip=setTimeout(function(){listr.links.next()},listr.links.autoskipMS)),listr.sources[s]._pauses?($("#naviDown").css("bottom","-16px"),$("div.mediaAbout h6").css("margin-right","226px"),$("span.btns a.pause").show()):($("#naviDown").css("bottom","8px"),$("div.mediaAbout h6").css("margin-right","168px")),listr.opts.showOffliberty&&-1!=$.inArray("music",listr.sources[s].buckets)&&$("a.offliberty").unbind("click").bind("click",function(){window.open("http://offliberty.com/#"+i.url,"_blank")}).show();var n=!1,r=!1,a=!1;$.each(listr.like.list,function(t,s){s.url.replace("youtu.be/","youtube.com/watch?v=").split("://")[1]==i.url.split("://")[1]&&(a=t,t>0?n=!0:r=!0)}),n&&$("a.addLike").removeClass("grey").addClass("blue-grey"),r&&$("a.dislike").show().unbind("click").click(function(){$("a.dislike").removeClass("grey").addClass("blue-grey"),$.ajax({dataType:"json",url:"/delete/suggestion",method:"POST",data:{idx:listr.like.list[a].idx},success:function(i){void 0!==i.error?(alert("Error: "+i.error),$("a.dislike").removeClass("blue-grey").addClass("grey")):listr.links.next()},error:function(i,t,s){alert("Error removing suggestion. :/"+ENTER+ENTER+t),console.log("radd.it suggestion nix error",listr.links.current.meta,t,s)}})}),listr.opts.showMedia&&"none"==$("div.container.media").css("display")?($("div.container.media").show(),$("window,body").animate({scrollTop:0},2e3),window.size().width>960&&listr.links.list.length>0&&!listr.opts.embedded&&listr.opts.showQuick&&setTimeout(function(){$("div.quickLoad span.select-dropdown").click()},1e3)):i.idx%25==0&&($("a.ppdonate").removeClass("darken-4").addClass("darken-3"),setTimeout(function(){$("a.ppdonate").removeClass("darken-3").addClass("darken-2")},200),setTimeout(function(){$("a.ppdonate").removeClass("darken-2").addClass("darken-1")},400),setTimeout(function(){$("a.ppdonate").removeClass("darken-1").addClass("darken-2")},600),setTimeout(function(){$("a.ppdonate").removeClass("darken-2").addClass("darken-3")},800),setTimeout(function(){$("a.ppdonate").removeClass("darken-3").addClass("darken-4")},1e3)),$(".zoomContainer").remove(),listr.opts.allowZoom&&"pic"==i.kind&&$("#media-pic img:visible").length&&$("#media-pic img").attr("data-zoom-image",i.url).elevateZoom({zoomType:"inner",cursor:"crosshair",scrollZoom:!0,zoomWindowFadeIn:250,zoomWindowFadeOut:250}),listr.sources[s]._streams||-1!=$.inArray("pics",listr.sources[s].buckets)||(listr.opts.preventClose=!0,setTimeout(function(){listr.opts.preventClose=!1},3500)),$(window).resize()},listr.links.prev=function(){listr.broadcast({action:"prev",target:"links",link:listr.links.current}),setTimeout(function(){$("span.btns a.prev").not(".clicked").click()},100)},listr.links.next=function(){listr.broadcast({action:"next",target:"links",link:listr.links.current}),listr.opts.autoSkip&&setTimeout(function(){$("span.btns a.next").not(".clicked").click()},100)},listr.links.stop=function(){listr.broadcast({action:"stop",target:"links",link:listr.links.current}),$("span.btns a.prev.clicked").removeClass("clicked"),$.each(listr.sources,function(i,t){listr.sources[i]._init&&t.stop()})},String.prototype.parseMeta=function(){var i=this,t={};if("music"===listr.bucket){t.artist="",t.track="",t.genre="",t.year="",t.length="";var s=i.lastIndexOf("20");-1===s&&(s=i.lastIndexOf("19")),-1===s&&(s=i.lastIndexOf("18")),-1===s&&(s=i.lastIndexOf("17")),-1===s&&(s=i.lastIndexOf("16")),-1===s&&(s=i.lastIndexOf("15")),-1!==s?(t.year=i.substr(s,4).replace("(","").replace(")","").replace("[","").replace("]",""),$.isNumeric(t.year)&&4===t.year.length?i=i.substr(0,s):t.year=""):s=i.length;var e=!1,l=i.indexOf(" -");if(-1==l&&(l=i.indexOf("")),-1==l&&(l=i.indexOf("")),-1==l&&(l=i.indexOf("-"),-1!=l&&(i=i.replace("-"," - "))),-1==l&&(l=i.indexOf("- ")),-1==l&&(l=i.indexOf(" //")),-1==l&&(l=i.indexOf(": ")),-1==l&&(l=i.indexOf(" by "),-1!=l&&(i=i.replace(" by "," - "),e=!0)),-1==l&&(l=i.indexOf(" from "),-1!=l&&(i=i.replace(" from "," - "),e=!0)),-1==l&&(l=i.indexOf(" at "),-1!=l&&(i=i.replace(" at "," - "))),-1===l&&(l=i.indexOf(": ")),-1===l&&(l=i.indexOf(" @ ")),-1===l&&(l=i.indexOf("-"),-1!=l&&(i=i.replace("-"," - "))),-1===l?t.track=i:(t.artist=i.substr(0,l).cTrim(" \"/\\'-()"+ENTER),0===t.artist.indexOf("[")&&-1!==t.artist.indexOf("]")&&(t.artist=t.artist.substr(t.artist.indexOf("]")+1).cTrim(" \"'-"+ENTER)),t.track=i.substr(l+2,s-l).cTrim(" \"/\\'-[]()"+ENTER)),l=t.track.lastIndexOf("["),-1!=l){var n=t.track.lastIndexOf("]");if(0===l?-1!==n&&(t.genre=t.track.substr(1,n-1),t.track=t.track.substr(n+1)):(t.genre=t.track.substr(l+1).replace("]","").replace(/\//g,"<br>").cTrim(" \"'-[]()"+ENTER),t.track=t.track.substr(0,l).cTrim(" \"'-()[]"+ENTER)),$.isNumeric(t.genre))""===t.year&&(t.year=t.genre),t.genre="";else{var r=["unofficial","official","new","hot","fresh","best","good","indie","alternative","xpost","crosspost"],a=!0;$.each(r,function(i,s){0===t.genre.toLowerCase().indexOf(s)&&(a=!1)}),a||(t.genre="")}}else t.track=t.track.cTrim(" \"'-()[]"+ENTER);if(e&&""!=t.artist&&""!=t.title){var d=t.track;t.track=t.artist,t.artist=d}if(-1!=i.indexOf(".com/")||-1!=i.indexOf(".net/")||-1!=i.indexOf(".org/")||-1!=i.indexOf("youtu.be/")||t.artist.length<3&&t.track.length<3)t.artist="",t.track=i;else{var o=t.artist.substr(-1);"("!=o&&"["!=o||(t.artist=$.trim(t.artist.substr(0,t.artist.length-1))),o=t.track.substr(-1),"("!=o&&"["!=o||(t.track=$.trim(t.track.substr(0,t.track.length-1)));var c=["Jan","Feb","Mar","March","Apr","April","Jun","June","Jul","July","Aug","Sep","Sept","Oct","Nov","Dec"];$.each(c,function(i,s){-1!=t.track.indexOf("("+s)&&(t.track=$.trim(t.track.replace("("+s,"")),t.year=$.trim(s+" "+t.year))})}}return t.artist.split("(").length>t.artist.split(")").length&&(t.artist+=")"),t.artist.split(")").length>t.artist.split("(").length&&(t.artist="("+t.artist),t.track.split("(").length>t.track.split(")").length&&(t.track+=")"),t.track.split(")").length>t.track.split("(").length&&(t.track="("+t.track),t.track.length>60&&(t.track=t.track.substr(0,60)+"&hellip;"),t.genre.length>52&&(t.genre=t.genre.substr(0,52)+"&hellip;"),""==t.track&&(""!=t.genre?(t.track=t.genre,t.genre=""):""!=t.year&&(t.track=t.year,t.year="")),t},String.prototype.firstProperNoun=function(){var i=this,t=i.split(" "),s=999,e=!1,l=!1,n="";return $.each(t,function(i,t){if(void 0!==t[0]&&t[0].replace(/[^A-Z]/,"_")===t[0]){if(e=!0,!l){n+=" "+t,t.length<s&&(s=t.length);var r=n.split(" ").length;(r>4||r>3&&s>3)&&(l=!0)}}else e&&(l=!0)}),n.length<7&&(n=i),$.trim(n.replace(/[.,\?\!\[\]()'":;<>]/g,"").replace(" HD","").replace(" HQ",""))},String.prototype.isBadTitle=function(){var i=this.toLowerCase();return!!($.trim(i).length<3||$.isNumeric(i.replace(/@/g,"").replace(/-/g,"").replace(/:/g,"").replace(/\//g,"").replace(/ /g,""))||"episode"==i||-1!=i.indexOf("youtu.be")||-1!=i.indexOf("youtube")||-1!=i.indexOf("vimeo")||-1!=i.indexOf("soundcloud")||-1!=i.indexOf("bandcamp")||-1!=i.indexOf("http")||0==i.indexOf("iframe:")||0==i.indexOf("stream")||0==i.indexOf("part ")||0==i.indexOf("here")||0==i.indexOf("live")||0==i.indexOf("original")||0==i.indexOf("obligatory")||0==i.indexOf("remix")||0==i.indexOf("music")||0==i.indexOf("this")||0==i.indexOf("vid")||0==i.indexOf("link")||0==i.indexOf("game")||-1!=i.indexOf("for the lazy")||-1!=i.indexOf("this here"))};
// listings.js
listr.listings={},listr.listings.list=[],listr.listings.push=function(i){var l=listr.listings.list.length;i.idx=l,listr.listings.list.push(i),listr.broadcast({action:"push",target:"listings",listing:i}),-1!==i.label.indexOf("/")&&(i.label=i.label.substr(i.label.lastIndexOf("/")+1)),$("div.container.links div.listings").append('<a class="btn waves-effect amber lighten-1 grey-text text-darken-3 z-depth-1 listing-'+l+" feed-"+i.feed+'" title="'+i.descrip+'"><i class="mdi-av-queue left"></i> '+i.label.substr(0,36)+(i.label.length>36?"&hellip;":"")+"</a>"),$("ul.quickLoad").append('<li class="listing listing-'+l+" feed-"+i.feed+'"><span><img class="thumb" src="/img/little_r.png"><i>More from '+i.label+"</i></span></li>"),$("div.container.grid div.content div.cardCont").append('<div class="col l3 m6 s12"><div class="card listing listing-'+l+" feed-"+i.feed+' grey lighten-4 z-depth-light"><div class="about"><div class="title" style="width:100%;text-align:center;"><br><br>Load more<br>from '+i.label+'</div><div class="details hide-on-small-only">&nbsp;</div></div><div class="thumb"><img src="/img/little_r.png"><br><div class="details hide-on-small-only">&nbsp;</div></div></div></div>')},$(document).ready(function(){$("div.container.links div.listings").on("click","a",function(i){i.preventDefault();var l=$(this).attr("class").split(/\s+/),s="",t=-1;return $.each(l,function(i,l){0==l.indexOf("listing-")?t=parseInt(l.replace("listing-","")):0==l.indexOf("feed-")&&(s=l.replace("feed-",""))}),void 0===listr.feeds[s]?void console.log("ERROR: no feed data for "+s):void 0===listr.listings.list[t]?void console.log("ERROR: no listing data for "+t):(listr.feeds[s].load(listr.listings.list[t].url),$("ul.quickLoad li.listing-"+t).remove(),$("div.cardCont div.card.listing-"+t).parent("div").remove(),$(this).remove(),void listr.listings.list.splice(t,1))})});
// related.js
listr.related={},listr.related.list=[],listr.related.last=-1,listr.related.push=function(t){listr.links.stash(),listr.links.push(listr.related.list[t]),listr.links.restore()},listr.related.update=function(){if(listr.opts.pushRelated){if(listr.related.list.length>0){var t=listr.related.list.clone();listr.related.list=[],listr.links.batchPush(!0),$.each(t,function(t,e){listr.links.push(e)}),listr.links.batchPush(!1)}}else{var e=listr.related.list.length;e&&$("a.relatedNext").show();var l="";$("span.abCommentsCnt:visible").length>0&&(l="and "),$("span.abLinksCnt").html(l+'<a class="relatedLinks" href="#related" title="search or see found links">'+e+" link"+(1==e?"":"s")+"</a> ")}},$("div.media div.opts div.mediaAbout").on("click","a.relatedNext",function(){listr.related.last++,listr.related.last>=listr.related.list.length&&(listr.related.last=-1),-1==listr.related.last?$("#links tr.selected").children("td").eq(0).click():listr.links.load(listr.related.list[listr.related.last])}),$("div.media div.opts div.mediaAbout").on("click","a.relatedLinks",function(t){t.preventDefault(),(listr.related.list.length||listr.links.rejected.length)&&($("#linksAdd div.results").show(),$("#linksAdd div.results div.col.header ul").html(""),$("#linksAdd div.results div.col.content").html("")),$.each(listr.related.list,function(t,e){if(e!==!1){var l="#linksAdd div.results div.col.header ul.tabs li."+e.source.toLowerCase(),s="#results-"+e.source.toLowerCase();0===$(l).length&&($("#linksAdd div.results div.col.header ul").append('<li class="tab '+e.source.toLowerCase()+'"><a href="'+s+'">'+e.source+"</a></li>"),$("#linksAdd div.results div.col.content").append('<div id="'+s.substr(1)+'" class="col s12"> </div>'),setTimeout(function(){$("#linksAdd ul.tabs").tabs(),$("#linksAdd ul.tabs li:first a").click()}));var i=s+" div."+e.kind;0==$(i).length&&$(s).append('<div class="'+e.kind+'"><h4>'+e.kind+"s</h4></div>");var a="";if(void 0!==e.meta.comment)if(e.meta.comment.length<400)a=e.meta.comment;else{var d=e.meta.comment.indexOf(e.title);a=200>d?e.meta.comment.substr(0,400)+"&hellip;":"&hellip;"+e.meta.comment.substr(d-200,400)+"&hellip;"}else void 0!==e.descrip&&(a=e.descrip.length<400?e.descrip:e.descrip.substr(0,400)+"&hellip;");a=a.replace(e.title.replace(".com/ ",".com/"),"<b>"+e.title.replace(".com/ ",".com/")+"</b>").replace("https://","").replace("http://","").replace("www.",""),$(i).append('<div class="link-dsp z-depth-1 idx-'+e.idx+'"><img class="thumb z-depth-1 hide-on-small-only" src="'+e.thumb+'"><h6><span class="title">'+e.title.replace(".com/ ",".com/")+'</span> (<span class="source">'+e.source+"</span>)</h6><p>"+(e.author.length?"&lt;"+e.author+"&gt; ":"")+a+"<br><b>"+e.url.substr(0,66)+(e.url.length>66?"...":"")+'</b></p><div class="opts"><a onClick="listr.links.load(listr.related.list['+t+']);" class="waves-effect waves-light btn"><i class="mdi-action-visibility left"></i>load</a><a onClick="listr.related.push('+t+');" class="waves-effect waves-light btn"><i class="mdi-av-queue left"></i>queue</a><a target="_blank" href="'+e.url+'" class="waves-effect waves-light btn"><i class="mdi-action-open-in-new left"></i>open</a></div></div>')}}),$.each(listr.links.rejected,function(t,e){if(e!==!1){var l="#linksAdd div.results div.col.header ul.tabs li.rejected",s="#results-rejected";0===$(l).length&&($("#linksAdd div.results div.col.header ul").append('<li class="tab rejected"><a href="'+s+'">Unsupported</a></li>'),$("#linksAdd div.results div.col.content").append('<div id="'+s.substr(1)+'" class="col s12"> </div>'),setTimeout(function(){$("#linksAdd ul.tabs").tabs(),$("#linksAdd ul.tabs li:first a").click()})),void 0!==e.kind&&0!=e.kind.length||(e.kind="link");var i=s+" div."+e.kind;0==$(i).length&&$(s).append('<div class="'+e.kind+'"><h4>'+e.kind+"s</h4></div>");var a="";if(void 0!==e.meta.comment)if(e.meta.comment.length<400)a=e.meta.comment;else{var d=e.meta.comment.indexOf(e.title);a=200>d?e.meta.comment.substr(0,400)+"&hellip;":"&hellip;"+e.meta.comment.substr(d-200,400)+"&hellip;"}else void 0!==e.descrip&&(a=e.descrip.length<400?e.descrip:e.descrip.substr(0,400)+"&hellip;");a=a.replace(e.title.replace(".com/ ",".com/"),"<b>"+e.title.replace(".com/ ",".com/")+"</b>").replace("https://","").replace("http://","").replace("www.",""),$(i).append('<div class="link-dsp z-depth-1 idx-'+e.idx+'"><img class="thumb z-depth-1 hide-on-small-only" src="'+e.thumb+'"><h6><span class="title">'+e.title.replace(".com/ ",".com/")+'</span> (<span class="source">'+e.domain+"</span>)</h6><p>"+(e.author.length?"&lt;"+e.author+"&gt; ":"")+a+"<br><b>"+e.url.substr(0,66)+(e.url.length>66?"...":"")+'</b></p><div class="opts"><a target="_blank" href="'+e.url+'" class="waves-effect waves-light btn"><i class="mdi-action-open-in-new left"></i>open</a></div></div>')}}),$("#linksAdd").openModal()}),listr.related.chat=function(){},listr.related.links=function(t){listr.links.batchPush(!0,"related"),$.each(t,function(t,e){listr.links.push(e)}),listr.links.batchPush(!1,"related"),listr.related.update()},listr.related.permalink=function(t){t.lastIndexOf("/")===t.length-1&&(t=t.substr(0,t.length-1)),0===t.indexOf("/")&&(t="https://www.reddit.com"+t);var e=!1;if(9===t.split("/").length&&(e=!0),-1===t.indexOf(".json")){var l=t.indexOf("?");-1===l?t+=".json":t=t.substr(0,l)+".json"+t.substr(l)}$.ajax({dataType:"json",url:t,cache:!0,success:function(e){var l={},s=!1;try{l=e[0].data.children[0].data,s=e[1].data.children}catch(i){s=!1}if(s===!1)return void console.log("ERROR: unknown reply for permalink",e);listr.links.batchPush(!0,"related");var a=0;setTimeout(function(){!function e(t,s){$.each(t,function(t,i){if("t1"==i.kind){if(a++,void 0!==i.data.body_html&&null!=i.data.body_html){var d=i.data.body_html,r=$("<div />").html(d.htmlDecode()).find("a");r.each(function(){var t={comment:i.data.body_html.htmlDecode().htmlDecode()};void 0!==$(this).attr("href")&&0==$(this).attr("href").indexOf("http")&&i.data.score>=0&&listr.links.push({url:$(this).attr("href"),title:$(this).html(),feed:"reddit",id_feed:i.data.name,utc_feed:i.data.created_utc,author:i.data.author,score:i.data.score,related:{permalink:l.permalink+i.data.id},meta:t})})}""!=i.data.replies&&e(i.data.replies.data.children,s+1)}})}(s,0),listr.links.batchPush(!1,"related"),$("span.abCommentsCnt").html(', <a target="_blank" href="'+t.replace(".json","")+'" title="u/'+l.author+ENTER+l.score+" pt"+(1==l.score?"":"s")+'">'+a+" comment"+(1==a?"":"s")+"</a>"),listr.related.update()})}})};
// like.js
listr.like={},listr.like.list={},listr.like.push=function(i,e){if(void 0===e)var e=!0;var t=listr.opts.shuffleOnLoad;e&&i.length>1&&(listr.opts.clearOnLoad&&listr.links.clear(),listr.opts.shuffleOnLoad=!0),listr.links.batchPush(!0,"links"),$.each(i,function(i,e){if(void 0!==listr.like.list[e]){var t=listr.like.list[e],l={title:t.label,url:t.url,thumb:t.thumb};""!=t.permalink&&(l.related={permalink:t.permalink}),listr.links.push(l)}}),listr.links.batchPush(!1,"links"),listr.opts.shuffleOnLoad=t},$(document).ready(function(){$("#likedCats").change(function(i){var e=$("#likedCats option:selected").val();$("div.container.liked div.content div.links div.results").hide(),$("#liked-"+e).show()}),$("div.container.liked").on("click","ul.collection li.collection-header",function(i){$("div.container.liked li.collection-item").hide("slideup"),$(this).parent("div").parent("ul").find("li.collection-item").each(function(i,e){$(e).slideDown()})}),$("div.container.liked").on("click","ul.collection li.collection-item",function(i){if(!($(i.currentTarget).hasClass("nix")||$(i.currentTarget).hasClass("append")||$(i.currentTarget).hasClass("open"))){var e=!1,t=$(this).attr("class").split(/\s+/);if($.each(t,function(i,t){0==t.indexOf("idx-")&&(e=parseInt(t.replace("idx-","")))}),e===!1)return void alert("Error: Like URL not found.");var l=listr.like.list[e],a={title:l.label,url:l.url,thumb:l.thumb};if(""!=l.permalink&&(a.related={permalink:l.permalink}),listr.links.batchPush(!0,"related"),a=listr.links.push(a),listr.links.batchPush(!1,"related"),a)listr.related.list=[],listr.links.load(a);else{var r=!1;if($.each(listr.links.list,function(i,e){e.url==l.url&&(r=e.idx)}),r===!1)return alert('Error loading "'+l.label+'".'+ENTER+"Domain may no longer be supported."),void console.log("liked error",e,l);$("ul.quickLoad li.idx-"+r).click()}}}),$("div.container.liked").on("click","ul.collection li.collection-item a.likeOpen",function(i){i.stopPropagation(),i.preventDefault();var e=!1,t=$(this).parent("div").parent("li").attr("class").split(/\s+/);return $.each(t,function(i,t){0==t.indexOf("idx-")&&(e=parseInt(t.replace("idx-","")))}),e===!1||void 0===listr.like.list[e]||void 0===listr.like.list[e].url?void alert("Error: Like URL not found."):void window.open(listr.like.list[e].url,"_blank")}),$("div.container.liked").on("click","ul.collection li.collection-item a.likeNix",function(i){i.stopPropagation(),i.preventDefault();var e=!1,t=$(this).parent("div").parent("li").attr("class").split(/\s+/);return $.each(t,function(i,t){0==t.indexOf("idx-")&&(e=parseInt(t.replace("idx-","")))}),e===!1||void 0===listr.like.list[e]?void alert("Error: Like URL not found."):void(confirm('Remove "'+listr.like.list[e].label+'" from liked?')&&$.ajax({dataType:"json",url:"/delete/like",method:"POST",data:listr.like.list[e],success:function(i){if(void 0!==i.error)alert("Error: "+i.error);else{var t=$("div.container.liked ul.collection li.collection-item.idx-"+e).parent("div").parent("ul");t.parent("div").attr("id").replace("liked-","");$("div.container.liked ul.collection li.collection-item.idx-"+e).parent("div").remove(),delete listr.like.list[e]}}}))}),$("div.container.liked").on("click","ul.collection li.collection-item a.likeAppend",function(){event.stopPropagation(),event.preventDefault();var i=!1,e=$(this).parent("div").parent("li").attr("class").split(/\s+/);if($.each(e,function(e,t){0==t.indexOf("idx-")&&(i=parseInt(t.replace("idx-","")))}),i===!1)return void alert("Error: Like URL not found.");var t=listr.like.list[i],l={title:t.label,url:t.url,thumb:t.thumb};""!=t.permalink&&(l.related={permalink:t.permalink}),listr.links.stash(),l=listr.links.push(l),listr.links.restore()}),setTimeout(function(){$("div.container.liked div ul.collection").each(function(i,e){var t="",l=$(e).find("li.collection-item"),a=[];$.each(l,function(i,e){var l=!1,r=$(e).attr("class").split(/\s+/);$.each(r,function(i,e){0==e.indexOf("idx-")&&(l=parseInt(e.replace("idx-","")))}),l!==!1&&-1==$.inArray(l,a)&&(a.push(l),""==t&&void 0!==listr.like.list[l]&&(t=listr.like.list[l].cat),listr.broadcast({action:"push",target:"like",link:listr.like.list[l]}))});var r=a.length;if(r>0){if(r>1||self!=top){var n="listr.like.push(["+a.join()+"]);";$(e).hasClass("suggested")&&(n="listr.like.push(["+a.join()+"], false);"),$("<div>").addClass("col s12 m4 l3").html('<li class="card collection-item avatar idx-all z-depth-2" onclick="event.stopPropagation();'+n+'"><div class="title">Add all</div><img class="right z-depth-1" src="'+listr.thumb+'"></li>').prependTo(e)}""!=t&&listr.broadcast({action:"push",target:"feeds",feed:{source:"radd.it",url:"/"+listr.user+"/liked/"+i,label:t+" ("+r+" link"+(r>1?"s":"")+")",idx:-1,cat:"~~|Liked"}})}}),$("div.liked ul.collection li.collection-header a").tooltip()}),$("a.addLike").click(function(i){void 0===listr.links.current.related.permalink||-1!=listr.links.current.related.permalink.indexOf("/wiki/")?$("#addLike a.nopermalink").show():$("#addLike a.permalink").show(),$("#addlike-url").val(listr.links.current.url).parent("div").children("label").addClass("active"),$("#addlike-title").val(listr.links.current.title).parent("div").children("label").addClass("active"),$("#addlike-thumb").val(listr.links.current.thumb).parent("div").children("label").addClass("active"),$("#addlike-thumb-img").attr("src",listr.links.current.thumb),listr.links.current.descrip.length>0&&$("#addlike-descrip").val(listr.links.current.descrip).parent("div").children("label").addClass("active"),$("#addlike-cat option:eq(0)").attr("selected",!0),$("#addlike-cat").appendTo("#addLike div.addlike-cat"),$("#addlike-cat").parent("div.addlike-cat").find("div.select-wrapper").remove(),$("#addlike-cat").removeClass("initialized").material_select(),$("#addLike div.addlike-cat-new").hide(),$("#addlike-cat-new").val("")}),$("#addlike-cat").change(function(){var i=$("#addlike-cat option:selected").val();"|addNewCat"===i?$("#addLike div.addlike-cat-new").show().find("input").focus():($("#addlike-cat-new").val(""),$("#addLike div.addlike-cat-new").hide())}),$("#addlike-thumb").change(function(){var i=$(this).val();$("<img>").attr("src",i).load(function(){$("#addlike-thumb-img").attr("src",i)}).error(function(){$("#addlike-thumb-img").attr("src",listr.links.current.thumb),$("#addlike-thumb").val(listr.links.current.thumb),alert("That's not a valid image URL!")})}),$("#addLike a.save,#addLike a.upvote").click(function(){var i={bucket:listr.bucket,cat:$("#addlike-cat-new").val(),url:$("#addlike-url").val(),thumb:$("#addlike-thumb-img").attr("src"),label:$("#addlike-title").val(),descrip:$("#addlike-descrip").val()};""==i.cat?i.cat=$("#addlike-cat option:selected").val():$("select.cats option:first-child").after('<option value="'+i.cat.replace(/"/g,'\\"')+'">'+i.cat+"</option>");try{i.permalink=listr.links.current.related.permalink}catch(e){}if($(this).hasClass("upvote")){if(void 0===i.permalink)return void alert("Cannot upvote, no reddit permalink found.");i={permalink:i.permalink}}else{if(0===i.cat.indexOf("|"))return void alert("You must select a category.");if(i.label.length<3)return void alert("Title must be at least 3 characters.")}$("#addLike").closeModal(),$("#loading").show(),$.ajax({dataType:"json",url:"/create/like",method:"POST",data:i,success:function(e){if(void 0!==e.error)alert("Error: "+e.error);else if(void 0===e.idx)alert("Error: no ID returned.");else if(-1!=e.idx){var t=!1;if($.each(listr.like.list,function(e,l){l.cat===i.cat&&(t=$("div.container.liked ul.collection li.idx-"+l.idx).parents("ul.collection"))}),t===!1){var l=$("#likedCats option").length;$("#"+$("#likedCats").parent("div").children("span.select-dropdown").data("activates")).remove();var a=$("#likedCats").parent("div").parent("div");$("#likedCats").detach().appendTo(a),$("#likedCats").parent("div").children("div.select-wrapper").remove(),$("#likedCats").append('<option value="'+l+'">'+i.cat+"</option>").removeClass("initialized").material_select(),$("div.container.liked div.content div.links").append('<div class="hidden" id="liked-'+l+'"><ul class="collection z-depth-1"></ul></div>'),t=$("div.container.liked ul.collection").filter(":last"),$("div.container.liked div.content ul.tabs").tabs()}$("<div>").addClass("col s12 m4 l3").html('<li class="card collection-item avatar idx-'+e.idx+' z-depth-3"><div class="title">'+i.label+'</div><img class="right z-depth-1" src="'+i.thumb+'"><div class="btns"><a class="nix secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="remove from liked"><i class="mdi-content-clear"></i></a><a class="open secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="open on host site"><i class="mdi-action-open-in-new"></i></a><a class="append secondary-content blue-text text-darken-4 tooltipped" data-position="top" data-tooltip="add to loaded"><i class="mdi-content-add"></i></a></div></li>').appendTo(t),"none"==$("div.container.liked").css("display")&&$("div.container.liked").show(),$("a.addLike.grey").removeClass("grey").addClass("blue-grey"),listr.like.list[e.idx]=i,listr.broadcast({action:"push",target:"like",link:i})}$("#loading").hide()},error:function(i,e,t){alert("Error saving to liked."+ENTER+ENTER+"Try it again, eh?"),$("#loading").hide(),console.log("liked error: "+t,i)}})}),$("div.container.liked ul.suggested").on("click","div.btns a.nixSugg",function(i){i.stopPropagation(),i.preventDefault();var e=!1,t=$(this).parent("div").parent("li").attr("class").split(/\s+/);if($.each(t,function(i,t){0==t.indexOf("idx-")&&(e=parseInt(t.replace("idx-","")))}),e===!1||void 0===listr.like.list[e])return alert("Error: cannot find that suggestion in the list.  Weird, huh?"),void console.log("suggestion nix error",e,listr.like.list);$(this).parent("div").parent("li").parent("div").remove();var l=listr.like.list[e].idx;delete listr.like.list[e],$.ajax({dataType:"json",url:"/delete/suggestion",method:"POST",data:{idx:l},success:function(i){void 0!==i.error&&alert("Error: "+i.error)},error:function(i,e,t){alert("Error removing suggestion. :/"+ENTER+ENTER+e),console.log("radd.it suggestion nix (2) error",listr.links.current.meta,e,t)}})})});
// playlists.js
listr.playlists={},listr.playlists.list=[],$(document).ready(function(){$("a.plAdd").click(function(l){$("#plAdd-pl-new,#plAdd-descrip").val(""),0==listr.playlists.list.length?($("#plAdd-pl option:eq(1)").attr("selected",!0),$("div.plAdd-pl").hide(),$("#plAdd a.append").hide(),$("div.plAdd-pl-new").show(),setTimeout(function(){$("#plAdd-pl-new").focus().parent("div").children("label").addClass("active")})):($("#plAdd-pl option:eq(0)").attr("selected",!0),$("div.plAdd-pl").show(),$("#plAdd a.append").show(),$("div.plAdd-pl-new").hide()),$("#plAdd-pl").appendTo("#plAdd div.plAdd-pl"),$("#plAdd-pl").parent("div.plAdd-pl").find("div.select-wrapper").remove(),$("#plAdd-pl").removeClass("initialized").material_select()}),$("#plAdd-pl").change(function(){var l=$("#plAdd-pl option:selected").val();"|addNewPL"===l?($("#plAdd div.plAdd-pl-new").show(),$("#plAdd a.append").hide(),$("#plAdd-pl-new").focus()):($("#plAdd-pl-new").val(""),$("#plAdd div.plAdd-pl-new").hide(),$("#plAdd a.append").show())}),$("#plAdd-thumb").change(function(){var l=$(this).val();$("<img>").attr("src",l).load(function(){$("#plAdd-thumb-img").attr("src",l)}).error(function(){$("#plAdd-thumb-img").attr("src",listr.links.current.thumb),$("#plAdd-thumb").val(listr.links.current.thumb),alert("That's not a valid image URL!")})}),$("#plAdd a.save,#plAdd a.append").click(function(){var l="/create",e="create",p=$("#plAdd-pl-new").val(),d=$("#plAdd-pl option:selected").val();if(""===p&&void 0!==listr.playlists.list[d])if(p=listr.playlists.list[d].label,l="/update",$(this).hasClass("save")){if(self==top&&!confirm('This will replace all links in "'+p+'"!'+ENTER+ENTER+"This cannot be undone.  Hit OK to continue."))return;e="save"}else e="append";else if(p.length<3)return void alert("Playlist name must be at least 3 characters.");var t={action:e,url:!1,bucket:listr.bucket,label:p,descrip:$("#plAdd-descrip").val(),links:listr.links.list};"/update"==l&&(t.url=listr.playlists.list[d].url),$("#loading").show(),$.ajax({dataType:"json",url:l+"/playlist",method:"POST",data:t,success:function(l){$("#loading").hide(),void 0!==l.error?alert("Error: "+l.error):("create"==l.action&&($("select.playlists option:first-child").after('<option value="'+listr.playlists.list.length+'">'+p+"</option>"),delete t.links,t.url=l.url,listr.playlists.list.push(t)),$("div.container.links div.opts a.plAdd.grey").removeClass("grey").addClass("blue-grey"),$("#plAdd").closeModal())},error:function(l,e,p){alert("Error saving playlist."+ENTER+ENTER+"Try it again, eh?"),$("#loading").hide()}})}),$("a.plAppend").click(function(l){$("#plAppend-url").val(listr.links.current.url).parent("div").children("label").addClass("active"),$("#plAppend-title").val(listr.links.current.title).parent("div").children("label").addClass("active"),$("#plAppend-thumb").val(listr.links.current.thumb).parent("div").children("label").addClass("active"),$("#plAppend-thumb-img").attr("src",listr.links.current.thumb),$("#plAppend-pl-new,#plAppend-descrip").val("");try{$("#plAppend-perma").val(listr.links.current.related.permalink)}catch(l){$("#plAppend-perma").val("")}0==listr.playlists.list.length?($("#plAppend-pl option:eq(1)").attr("selected",!0),$("div.plAppend-pl,div.modal-footer a.append").hide(),$("div.modal-footer a.create").css("display","inline-block"),$("div.plAppend-pl-new").show()):($("#plAppend-pl option:eq(0)").attr("selected",!0),$("div.plAppend-pl-new,div.modal-footer a.create").hide(),$("div.modal-footer a.append").css("display","inline-block"),$("div.plAppend-pl").show()),$("#plAppend-pl").appendTo("#plAppend div.plAppend-pl"),$("#plAppend-pl").parent("div.plAppend-pl").find("div.select-wrapper").remove(),$("#plAppend-pl").removeClass("initialized").material_select()}),$("#plAppend-pl").change(function(){var l=$("#plAppend-pl option:selected").val();"|addNewPL"===l?($("div.modal-footer a.append").hide(),$("div.modal-footer a.create").css("display","inline-block"),$("#plAppend div.plAppend-pl-new").show(),$("#plAppend-pl-new").focus()):($("div.modal-footer a.append").css("display","inline-block"),$("div.modal-footer a.create").hide(),$("#plAppend-pl-new").val(""),$("#plAppend div.plAppend-pl-new").hide())}),$("#plAppend-thumb").change(function(){var l=$(this).val();$("<img>").attr("src",l).load(function(){$("#plAppend-thumb-img").attr("src",l)}).error(function(){$("#plAppend-thumb-img").attr("src",listr.links.current.thumb),$("#plAppend-thumb").val(listr.links.current.thumb),alert("That's not a valid image URL!")})}),$("#plAppend a.save").click(function(){var l="/create",e=$("#plAppend-pl-new").val(),p=$("#plAppend-pl option:selected").val();if(""==e&&void 0!==listr.playlists.list[p])e=listr.playlists.list[p].label,l="/update";else if(e.length<3)return void alert("Playlist name must be at least 3 characters.");var d={bucket:listr.bucket,url:!1,label:e,descrip:$("#plAppend-descrip").val(),links:[{url:$("#plAppend-url").val(),thumb:$("#plAppend-thumb-img").attr("src"),title:$("#plAppend-title").val()}]};"/update"==l&&(d.action="append",d.url=listr.playlists.list[p].url),""!=$("#plAppend-perma").val()&&(d.links[0].related={permalink:$("#plAppend-perma").val()}),$("#loading").show(),$.ajax({dataType:"json",url:l+"/playlist",method:"POST",data:d,success:function(l){$("#loading").hide(),void 0!==l.error?(alert("Error: "+l.error.htmlDecode()),console.log("plAppend error: "+l.error.htmlDecode())):("create"==l.action&&($("select.playlists option:first-child").after('<option value="'+listr.playlists.list.length+'">'+d.label+"</option>"),delete d.links,d.url=l.url,listr.playlists.list.push(d)),$("div.media a.plAppend.grey,#naviDown span.btns a.plAppend.grey").removeClass("grey").addClass("blue-grey"),$("#plAppend").closeModal())},error:function(l,e,p){alert("Error saving playlist."+ENTER+ENTER+"Try it again, eh?"),$("#loading").hide()}})})});
// cookie.js
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(f){var a=/\+/g;function d(i){return b.raw?i:encodeURIComponent(i)}function g(i){return b.raw?i:decodeURIComponent(i)}function h(i){return d(b.json?JSON.stringify(i):String(i))}function c(i){if(i.indexOf('"')===0){i=i.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{i=decodeURIComponent(i.replace(a," "));return b.json?JSON.parse(i):i}catch(j){}}function e(j,i){var k=b.raw?j:c(j);return f.isFunction(i)?i(k):k}var b=f.cookie=function(q,p,v){if(p!==undefined&&!f.isFunction(p)){v=f.extend({},b.defaults,v);if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setTime(+u+r*86400000)}return(document.cookie=[d(q),"=",h(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var w=q?undefined:{};var s=document.cookie?document.cookie.split("; "):[];for(var o=0,m=s.length;o<m;o++){var n=s[o].split("=");var j=g(n.shift());var k=n.join("=");if(q&&q===j){w=e(k,p);break}if(!q&&(k=e(k))!==undefined){w[j]=k}}return w};b.defaults={};f.removeCookie=function(j,i){if(f.cookie(j)===undefined){return false}f.cookie(j,"",f.extend({},i,{expires:-1}));return !f.cookie(j)}}));
$(document).ready(function() {
<?php
  $cnt = 0;

  if ($embedded && $loggedIn) {
    echo chr(10) . 
      'listr.feeds.list.push({'
        . '"source":"radd.it"'
        . ', "url":"/read/hotlinks"'
        . ', "label":"Suggested Links"'
        . ', "idx":-1'
        . ', "cat":"00|Mixed"'
      . '});';

    $cnt++;
    echo chr(10) . 
      'listr.feeds.list.push({'
        . '"source":"reddit"'
        . ', "url":"/r/' . $allSubs . '"'
        . ', "label":"Load all subreddits"'
        . ', "idx":-1'
        . ', "cat":"00|Mixed"'
      . '});';
  }

  if ($foundFeeds) {
    $dupeFeeds = array();

    $suggestions->data_seek(0);
    while ($sug = $suggestions->fetch_row()) {
      // kind, source, label, descrip, url, permalink
      $s_kind = $sug[0];
      if ($s_kind != "feed" || $cnt > 10) continue;
      $s_source = $sug[1];
      $s_label = $sug[2];
      $s_descrip = $sug[3];
      $s_url = $sug[4];
      if (in_array(strtolower($s_url), $dupeFeeds)) continue;
      $dupeFeeds[] = strtolower($s_url);

      $s_permalink = $sug[5];

      echo chr(10) . 
        'listr.feeds.list.push({'
          . '"source":"' . $s_source . '"'
          . ', "url":"' . str_replace('"', '\\"', $s_url) . '"'
          . ', "label":"' . str_replace('"', '\\"', $s_label) . '"'
          . ', "idx":-1'
          . ', "cat":"Suggested"'
          // . ', "descrip":"' . str_replace('"', '\\"', str_replace(chr(10), '<br>', $l_descrip)) . '"'
        . '});';

        $cnt++;
    }
  }

  $feeds->data_seek(0);
  while ($l_feed = $feeds->fetch_row()) {
    // cat, source, hasOpts, url, label, descrip, is_sticky, is_default
    $l_cat_full = $l_feed[0];
    $l_cat = $l_cat_full;
    if (strpos($l_cat, "|") !== false) $l_cat = substr($l_cat, strpos($l_cat, "|") + 1);

    $l_source = $l_feed[1];
    $hasOpts = $l_feed[2];
    $l_url = $l_feed[3];

    $l_label = $l_feed[4];
    $l_descrip = str_replace(chr(10), "  ", $l_feed[5]);
    $sticky = ($l_feed[6] == 0 ? false : true);
    $default = ($l_feed[7] == 0 ? false : true);
    $userOnly = ($l_feed[8] == 0 ? false : true);

    $l_idx = $l_feed[9];

    if (!$loggedIn && $userOnly) continue;        // if not logged in, skip the user-only feeds
    else if ($loggedIn && $default) continue;   // if we are logged in, skip the default feeds

    echo chr(10) . 
      'listr.feeds.list.push({'
        . '"source":"' . $l_source . '"'
        . ', "url":"' . str_replace('"', '\\"', $l_url) . '"'
        . ', "label":"' . str_replace('"', '\\"', $l_label) . '"'
        . ', "idx":' . $l_idx
        . ', "cat":"' . str_replace('"', '\\"', $l_cat_full) . '"'
        // . ', "descrip":"' . str_replace('"', '\\"', str_replace(chr(10), '<br>', $l_descrip)) . '"'
      . '});';
  }


  if ($foundLinks) {
    $suggestions->data_seek(0);
    $cnt = 0;
    while ($sug = $suggestions->fetch_row()) {
        // kind, source, label, descrip, url, permalink, thumb
      $s_kind = $sug[0];
      if ($s_kind != "link" || $cnt > 98) continue;
      $s_source = $sug[1];
      $s_label = $sug[2];
      $s_descrip = $sug[3];
      $s_url = $sug[4];
      $s_permalink = $sug[5];
      $s_thumb = str_replace("http:", "https:", $sug[6]);
      $s_id = $sug[7];

      if ($s_thumb == "" || substr($s_thumb, 0, 4) != "http") {
        if ($bucket == "ladycandy") $s_thumb = "/img/eyecandy.jpg";
        else if ($bucket == "gaynsfw") $s_thumb = "/img/nsfw.jpg";
        else if ($bucket == "media") $s_thumb = "/img/little_r.png";
        else $s_thumb = "/img/" . $bucket . ".jpg";
      }

      echo 
        chr(10) . 'listr.like.list[' . ($cnt * -1) . '] = {'
          . '"idx":' . $s_id
          . ',"bucket":"' . str_replace('"', '\\"', $bucket) . '"'
          . ', "cat":"Suggested"'
          . ', "url":"' . str_replace('"', '\\"', $s_url) . '"'
          . ', "thumb":"' . str_replace('"', '\\"', $s_thumb) . '"'
          . ', "label":"' . str_replace(array(chr(10), chr(13)), '<br>', str_replace('"', '\\"', $s_label)) . '"'
          . ', "permalink":"' . str_replace('"', '\\"', $s_permalink) . '"'
        . '};'
      ;

      $cnt++;
    }
  }

  // else {
  if ($foundLinks || $userLikes->num_rows > 0) {
    if (!$embedded) echo "$('div.container.liked').show();listr.navi.update();";

    $userLikes->data_seek(0);
    while ($like = $userLikes->fetch_row()) {
      // cat, label, url, thumb, permalink
      $l_cat = $like[0];
      $l_label = $like[1];
      $l_url = $like[2];
      $l_thumb = $like[3];
      $l_perma = $like[4];
      $l_idx = $like[5];

      echo 
        chr(10) . 'listr.like.list[' . $l_idx . '] = {'
          . '"idx":' . $l_idx
          . ',"bucket":"' . str_replace('"', '\\"', $bucket) . '"'
          . ', "cat":"' . str_replace('"', '\\"', $l_cat) . '"'
          . ', "url":"' . str_replace('"', '\\"', $l_url) . '"'
          . ', "thumb":"' . str_replace('"', '\\"', $l_thumb) . '"'
          . ', "label":"' . str_replace(array(chr(10), chr(13)), '<br>', str_replace('"', '\\"', $l_label)) . '"'
          . ', "permalink":"' . str_replace('"', '\\"', $l_perma) . '"'
        . '};'
      ;
    }
  }

  foreach ($userPlaylists as $key => $pl)
    echo chr(10) . 'listr.playlists.list.push({'
        . '"url":"' . str_replace('"', '\\"', $pl["url"]) . '"'
        . ',"label":"' . str_replace('"', '\\"', $pl["label"]) . '"'
        . ',"descrip":"' . str_replace('"', '\\"', $pl["descrip"]) . '"'
    . '});';

  if (!$loggedIn) echo "setTimeout(function() { $('.hide-on-no-user').unbind('click').click(function(event) { event.preventDefault(); alert('You must be logged-in to use this feature.'); }); });";
  // if (!$loggedIn) echo "$('.hide-on-no-user').hide();";

  if (!$foundFeeds && $feeds->num_rows == 0) echo "$('div.container.feeds').hide();";

  if ($bucket == "media") echo "$('div.container.options div.section:eq(0),.hide-on-no-user,.hide-on-media-bucket').hide();";

  if ($listrURL !== "" && $feed !== "") echo 'listr.feeds["' . $feed . '"].load("' . $listrURL . '");';
  else if ($loggedIn && $userCats === "") echo "setTimeout(function() { $('div.feeds a.addFeed').click(); $('#addFeed div.firsttimer').show(); });";
?>});</script></body></html>
